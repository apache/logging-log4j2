<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Release notes :: Apache Log4j</title>
    <link rel="canonical" href="https://logging.apache.org/log4j/2.x/release-notes.html">
    <meta name="generator" content="Antora 3.2.0-alpha.8">
<link rel="stylesheet" href="./_/css/site.css">
<link rel="icon" href="./_/../_images/favicon.ico" type="image/x-icon">
<!-- `@asciidoctor/tabs` extension styles -->
<link rel="stylesheet" href="./_/css/vendor/tabs.css">
<style>
  /* Swap colors of `IMPORTANT` and `WARNING` blocks */ 
  .doc .admonitionblock.important .icon { background-color: #f70; }
  .doc .admonitionblock.warning .icon { background-color: #e40046; }
  /* Default `h4`, `h5`, and `h6` are smaller than the normal text, fix header font sizing: */
  .doc h1 { font-size: 1.9rem; }
  .doc h2 { font-size: 1.7rem; }
  .doc h3 { font-size: 1.5rem; font-weight: 400; }
  .doc h4 { font-size: 1.3rem; font-weight: 500; }
  .doc h5 { font-size: 1.1rem; font-weight: 500; text-decoration: underline; }
  .doc h6 { font-size: 0.9rem; font-weight: 500; text-decoration: underline; }
  /* Default `code`, `pre`, and `.colist` (source code annotations) fonts are too big, adjust them: */
  .doc .colist>table code, .doc p code, .doc thead code { font-size: 0.8em; }
  .doc pre { font-size: 0.7rem; }
  .doc .colist { font-size: 0.75rem; }
  /* Make links more visible: */
  .doc a { text-decoration: underline; }
  .doc a code { text-decoration: underline; color: #1565c0; }
  /* Tab header fonts aren't rendered good, adjusting the font weight: */
  .tablist > ul li { font-weight: 500; }
  /* `page-toclevels` greater than 4 are not supported by Antora UI, patching it: */
  .toc .toc-menu li[data-level="4"] a {
    padding-left: 2.75rem;
  }
  /* Replace the default highlight.js color for strings from red (unnecessarily signaling something negative) to green: */
  .hljs-string {
    color: #0f8532;
  }
</style>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="navbar-item">
        <img src="./_/../_images/logo-small-white.png" alt="Apache Log4j"/>
      </div>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://logging.apache.org">a subproject of&nbsp;<strong>Apache Logging Services</strong></a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="ROOT" data-version="">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="index.html">Home</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="download.html">Download</a>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="release-notes.html">Release notes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="https://logging.apache.org/support.html">Support</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://logging.apache.org/security.html">Security</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="manual/index.html">Manual</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="manual/getting-started.html">Getting started</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="manual/installation.html">Installation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="manual/api.html">API</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="manual/api.html#loggers">Loggers</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="manual/eventlogging.html">Event Logger</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="manual/simple-logger.html">Simple Logger</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="manual/status-logger.html">Status Logger</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="manual/logbuilder.html">Fluent API</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="manual/api.html#fish-tagging">Fish tagging</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="manual/customloglevels.html">Levels</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="manual/markers.html">Markers</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="manual/thread-context.html">Thread Context</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="manual/messages.html">Messages</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="manual/flowtracing.html">Flow Tracing</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="manual/implementation.html">Implementation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="manual/architecture.html">Architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="manual/config-intro.html">Configuration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="manual/configuration.html">Configuration file</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="manual/systemproperties.html">Configuration properties</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="manual/customconfig.html">Programmatic configuration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="manual/appenders.html">Appenders</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="manual/appenders/file.html">File appenders</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="manual/appenders/rolling-file.html">Rolling file appenders</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="manual/appenders/database.html">Database appenders</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="manual/appenders/network.html">Network Appenders</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="manual/appenders/message-queue.html">Message queue appenders</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="manual/appenders/delegating.html">Delegating Appenders</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="manual/layouts.html">Layouts</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="manual/json-template-layout.html">JSON Template Layout</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="manual/pattern-layout.html">Pattern Layout</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="manual/lookups.html">Lookups</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="manual/filters.html">Filters</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="manual/scripts.html">Scripts</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="manual/jmx.html">JMX</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="manual/extending.html">Extending</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="manual/plugins.html">Plugins</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="manual/performance.html">Performance</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="manual/async.html">Asynchronous loggers</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="manual/garbagefree.html">Garbage-free logging</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">References</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="plugin-reference.html">Plugin reference</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="javadoc.html">Java API reference</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Resources</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="faq.html">F.A.Q.</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="migrate-from-log4j1.html">Migrating from Log4j 1</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="migrate-from-logback.html">Migrating from Logback</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="migrate-from-slf4j.html">Migrating from SLF4J</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="graalvm.html">Building GraalVM native images</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="hibernate.html">Integrating with Hibernate</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="jakarta.html">Integrating with Jakarta EE</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="soa.html">Integrating with service-oriented architectures</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="development.html">Development</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="components.html">Components</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="log4j-iostreams.html">Log4j IOStreams</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="log4j-spring-boot.html">Log4j Spring Boot Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="log4j-spring-cloud-config-client.html">Log4j Spring Cloud Configuration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="log4j-jul.html">JUL-to-Log4j bridge</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="log4j-to-jul.html">Log4j-to-JUL bridge</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Related projects</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://logging.apache.org/log4j/jakarta/index.html">Log4j Jakarta EE</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://logging.apache.org/log4j/jmx-gui/index.html">Log4j JMX GUI</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://logging.apache.org/log4j/kotlin/index.html">Log4j Kotlin</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://logging.apache.org/log4j/scala/index.html">Log4j Scala</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://logging.apache.org/log4j/tools/index.html">Log4j Tools</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://logging.apache.org/log4j/transform/index.html">Log4j Transformation Tools</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Home</a></li>
    <li><a href="download.html">Download</a></li>
    <li><a href="release-notes.html">Release notes</a></li>
  </ul>
</nav>
<div class="edit-this-page"><a href="https://github.com/apache/logging-log4j2/edit/2.x/src/site/antora/modules/ROOT/pages/release-notes.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="1">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Release notes</h1>
<div class="sect1">
<h2 id="release-notes-2-x-x"><a class="anchor" href="#release-notes-2-x-x"></a>2.x.x</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This minor release contains bug fixes, behavioral improvements, and a fully-fledged support for the GraalVM native image generation.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-25-0-graalvm"><a class="anchor" href="#release-notes-2-25-0-graalvm"></a>GraalVM reachability metadata</h3>
<div class="paragraph">
<p>Log4j Core and all its extension modules have been enriched with embedded
<a href="https://www.graalvm.org/latest/reference-manual/native-image/metadata/">GraalVM reachability metadata</a>.
This allows the generation of GraalVM native images out-of-the-box without any additional steps.
See our <a href="graalvm.html" class="xref page">GraalVM guide</a> for details.</p>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-25-0-PL-ex"><a class="anchor" href="#release-notes-2-25-0-PL-ex"></a>Exception handling in Pattern Layout</h3>
<div class="paragraph">
<p>Exception handling in <a href="manual/pattern-layout.html" class="xref page">Pattern Layout</a> went through a major rewrite.
This effectively helped with fixing some bugs by matching the feature parity of all exception converters.
Some important highlights from this rewrite:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Rendered stack traces are ensured to be prefixed with a newline, which used to be a whitespace in earlier versions.</p>
</li>
<li>
<p>Switched the default exception converter from <a href="manual/pattern-layout.html#converter-exception-extended" class="xref page">the extended exception converter</a> to <a href="manual/pattern-layout.html#converter-exception" class="xref page">the plain exception converter</a>, which is more performant.</p>
</li>
<li>
<p>The support for the <code>{ansi}</code> option in exception converters is removed.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-25-0-instant-format"><a class="anchor" href="#release-notes-2-25-0-instant-format"></a>Date &amp; time formatting</h3>
<div class="paragraph">
<p>Historically, Log4j contains custom date &amp; time formatting utilities for performance reasons, i.e., <a href="javadoc/log4j-core/org/apache/logging/log4j/core/util/datetime/FixedDateFormat.html"><code>FixedDateFormat</code></a> and <a href="javadoc/log4j-core/org/apache/logging/log4j/core/util/datetime/FastDateFormat.html"><code>FastDateFormat</code></a>.
These have been deprecated for removal in favor of Java&#8217;s <a href="https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html"><code>DateTimeFormatter</code></a>.
After upgrading, if you experience any date &amp; time formatting problems (in particular, related with the usage of <code>n</code> and <code>x</code> directives), please <a href="https://logging.apache.org/support.html#issues">submit an issue ticket</a> – as a temporary workaround, you can set <a href="manual/systemproperties.html#log4j2.instant.formatter" class="xref page">the <code>log4j2.instant.formatter</code> property</a> to <code>legacy</code> to switch to the old behaviour.</p>
</div>
</div>
<div class="sect2">
<h3 id="_ansi_support_on_windows"><a class="anchor" href="#_ansi_support_on_windows"></a>ANSI support on Windows</h3>
<div class="paragraph">
<p>Since 2017, Windows 10 and newer have offered native support for ANSI escapes.
The support for the outdated Jansi 1.x library has therefore been removed.
See <a href="manual/pattern-layout.html#jansi" class="xref page">ANSI styling on Windows</a> for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-x-x-added"><a class="anchor" href="#release-notes-2-x-x-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Add Google OSS-Fuzz integration (<a href="https://github.com/apache/logging-log4j2/pull/2949">2949</a>)</p>
</li>
<li>
<p>Add a <code>GraalVmProcessor</code> annotation processor to generate GraalVM reachability metadata. (<a href="https://github.com/apache/logging-log4j2/pull/3053">3053</a>)</p>
</li>
<li>
<p>Add <code>collectionName</code> and <code>databaseName</code> arguments to the MongoDB appender (<a href="https://github.com/apache/logging-log4j2/pull/3467">3467</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-x-x-changed"><a class="anchor" href="#release-notes-2-x-x-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Remove JAnsi library support. Windows 10 console has supported ANSI escapes since 2017. (<a href="https://github.com/apache/logging-log4j2/issues/1736">1736</a>)</p>
</li>
<li>
<p>Consolidate exception rendering logic and improve circular reference support in Pattern Layout (<a href="https://github.com/apache/logging-log4j2/pull/2691">2691</a>, <a href="https://github.com/apache/logging-log4j2/pull/3123">3123</a>)</p>
</li>
<li>
<p>Rewrite <code>JAnsiTextRenderer</code> to work without JAnsi library. (<a href="https://github.com/apache/logging-log4j2/pull/2916">2916</a>)</p>
</li>
<li>
<p>Switch prefixing stack traces in Pattern Layout from whitespace to newline (<a href="https://github.com/apache/logging-log4j2/pull/3045">3045</a>)</p>
</li>
<li>
<p>Changes the layout used by the <a href="https://logging.apache.org/log4j/2.x/manual/configuration.html#automatic-configuration">default configuration</a>. (<a href="https://github.com/apache/logging-log4j2/pull/3118">3118</a>)</p>
</li>
<li>
<p>Switch to using Java&#8217;s <code>DateTimeFormatter</code> for date &amp; time formatting of log event instants (<a href="https://github.com/apache/logging-log4j2/pull/3121">3121</a>, <a href="https://github.com/apache/logging-log4j2/issues/2943">2943</a>)</p>
</li>
<li>
<p>Switch the default exception converter from <a href="manual/pattern-layout.html#converter-exception-extended" class="xref page">the extended exception converter</a> to <a href="manual/pattern-layout.html#converter-exception" class="xref page">the plain exception converter</a> (<a href="https://github.com/apache/logging-log4j2/pull/3123">3123</a>)</p>
</li>
<li>
<p>Don&#8217;t close StringReaders because of batching. (<a href="https://github.com/apache/logging-log4j2/issues/3127">3127</a>)</p>
</li>
<li>
<p>Switch prefixing stack traces in Status Logger from whitespace to newline (<a href="https://github.com/apache/logging-log4j2/pull/3149">3149</a>)</p>
</li>
<li>
<p>The MongoDb Appender shouldn&#8217;t log a deprecation warning, GitHub issue #3151. (<a href="https://github.com/apache/logging-log4j2/issues/3151">3149</a>)</p>
</li>
<li>
<p>Add improved validation to StringMatchFilter for null/empty text. GitHub issue #3153. (<a href="https://github.com/apache/logging-log4j2/issues/3153">3153</a>)</p>
</li>
<li>
<p>Currently Java 8 users do not have access to timestamps with sub-millisecond precision. This change moves the SystemClock implementation from log4j-core-java9 to log4j-core, overriding the current one, so that java 8 users can benefit from it. (<a href="https://github.com/apache/logging-log4j2/pull/3217">3217</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-x-x-deprecated"><a class="anchor" href="#release-notes-2-x-x-deprecated"></a>Deprecated</h3>
<div class="ulist">
<ul>
<li>
<p>Deprecate <code>ThrowableProxy</code> and all its usages (<a href="https://github.com/apache/logging-log4j2/pull/2691">2691</a>, <a href="https://github.com/apache/logging-log4j2/pull/3123">3123</a>)</p>
</li>
<li>
<p>Deprecate <code>AbstractLogger.checkMessageFactory()</code>, since all created <code>Logger</code>s are already <code>MessageFactory</code>-namespaced (<a href="https://github.com/apache/logging-log4j2/pull/2936">2936</a>)</p>
</li>
<li>
<p>Deprecated <code>FixedDateTime</code>, <code>FastDateTime</code>, and supporting classes (<a href="https://github.com/apache/logging-log4j2/pull/3121">3121</a>)</p>
</li>
<li>
<p>Use hard references to <code>Logger`s in `LoggerRegistry</code>. (<a href="https://github.com/apache/logging-log4j2/issues/3143">3143</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-x-x-fixed"><a class="anchor" href="#release-notes-2-x-x-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Switch MongoDB tests to use Docker. (<a href="https://github.com/apache/logging-log4j2/issues/2229">2229</a>)</p>
</li>
<li>
<p>Add a Jakarta-based JMS Appender module log4j-jakarta-jms and deprecate the Javax version. (<a href="https://github.com/apache/logging-log4j2/issues/2995">2995</a>)</p>
</li>
<li>
<p>Fix <code>RollingFileManager</code> to reopen the log file when the rollover was unsuccessful (<a href="https://github.com/apache/logging-log4j2/issues/2592">2592</a>)</p>
</li>
<li>
<p>Fix certain exception rendering issues in Pattern Layout (<a href="https://issues.apache.org/jira/browse/LOG4J2-2170">LOG4J2-2170</a>, <a href="https://issues.apache.org/jira/browse/LOG4J2-3627">LOG4J2-3627</a>, <a href="https://github.com/apache/logging-log4j2/issues/1729">1729</a>, <a href="https://github.com/apache/logging-log4j2/pull/2691">2691</a>)</p>
</li>
<li>
<p>Reload key &amp; trust stores while reconfiguring network appenders containing a TLS (formerly known as SSL) configuration (<a href="https://issues.apache.org/jira/browse/LOG4J2-2988">LOG4J2-2988</a>, <a href="https://github.com/apache/logging-log4j2/pull/2767">2767</a>)</p>
</li>
<li>
<p>Simplify the <code>SSLContext</code> instantiation for the TLS (formerly known as SSL) configuration (<a href="https://issues.apache.org/jira/browse/LOG4J2-2988">LOG4J2-2988</a>, <a href="https://github.com/apache/logging-log4j2/pull/2767">2767</a>)</p>
</li>
<li>
<p>Adding a compilation warning for Plugin Builder Attributes that do not have a public setter. (<a href="https://github.com/apache/logging-log4j2/issues/2769">2769</a>)</p>
</li>
<li>
<p>Fix reloading of the configuration from an HTTP(S) source (<a href="https://github.com/apache/logging-log4j2/issues/2937">2937</a>)</p>
</li>
<li>
<p>Fix <code>putAll()</code> in the default thread context map implementation (<a href="https://github.com/apache/logging-log4j2/pull/2942">2942</a>)</p>
</li>
<li>
<p>Improves validation of HTTP Appender. (<a href="https://github.com/apache/logging-log4j2/issues/3011">3011</a>)</p>
</li>
<li>
<p>Fix <code>getLogger()</code> source incompatibility in Log4j 1 to Log4j 2 API Bridge (i.e., <code>log4j-1.2-api</code>) (<a href="https://github.com/apache/logging-log4j2/pull/3030">3030</a>)</p>
</li>
<li>
<p>Fix property extraction from the root exception in Pattern Layout (<a href="https://github.com/apache/logging-log4j2/pull/3045">3045</a>)</p>
</li>
<li>
<p>Fix key removal issues in Thread Context (<a href="https://github.com/apache/logging-log4j2/pull/3048">3048</a>)</p>
</li>
<li>
<p>Fix Android-related issues in Log4j Core. (<a href="https://github.com/apache/logging-log4j2/issues/3056">3056</a>)</p>
</li>
<li>
<p>Fix the leak of non-Log4j dependencies in <code>log4j-bom</code> (<a href="https://github.com/apache/logging-log4j2/issues/3066">3066</a>, <a href="https://github.com/apache/logging-parent/pull/265">logging-parent#265</a>)</p>
</li>
<li>
<p>Fix the conversion of <code>o.a.l.Priority</code> classes to Log4j 2 levels. (<a href="https://github.com/apache/logging-log4j2/pull/3085">3085</a>)</p>
</li>
<li>
<p>Ensures synchronization between <code>j.u.l.Logger.getLevel()</code> and <code>j.u.l.Logger.setLevel()</code> methods. (<a href="https://github.com/apache/logging-log4j2/issues/3119">3119</a>)</p>
</li>
<li>
<p>Fix <code>ArrayIndexOutOfBoundsException</code> in JSON Template Layout truncated exception resolver (<a href="https://github.com/apache/logging-log4j2/pull/3212">3212</a>)</p>
</li>
<li>
<p>Fix detection of location requirements in <code>AsyncAppender</code>. (<a href="https://github.com/apache/logging-log4j2/issues/3257">3257</a>)</p>
</li>
<li>
<p>Fix detection of location requirements in <code>FailoverAppender</code>. (<a href="https://github.com/apache/logging-log4j2/issues/3257">3257</a>)</p>
</li>
<li>
<p>Corrected @return javadoc for AbstractFilterable#isFiltered(). (<a href="https://github.com/apache/logging-log4j2/issues/3300">3300</a>)</p>
</li>
<li>
<p>TypeConverters convert for "Level" incorrectly documented behaviour for invalid value - updated javadoc. (<a href="https://github.com/apache/logging-log4j2/issues/3359">3359</a>)</p>
</li>
<li>
<p>Fix loading of the effective <code>RecyclerFactoryConverter</code> in JSON Template Layout (<a href="https://github.com/apache/logging-log4j2/pull/3398">3398</a>)</p>
</li>
<li>
<p>Minimize lock usage in <code>InternalLoggerRegistry</code>. (<a href="https://github.com/apache/logging-log4j2/issues/3399">3399</a>)</p>
</li>
<li>
<p>Make annotation libraries visible transitively at compile time for Gradle users through Gradle Module Metadata and for JPMS users through <code>requires static</code> directives in <code>module-info.java</code> files. (<a href="https://github.com/apache/logging-log4j2/issues/3437">3437</a>)</p>
</li>
<li>
<p>Fix shutdownDisable configuration does not take effect (<a href="https://github.com/apache/logging-log4j2/issues/2614">2614</a>)</p>
</li>
<li>
<p>Fix <code>ArrayIndexOutOfBoundsException</code> on <code>StatusData#getFormattedStatus</code>. (<a href="https://github.com/apache/logging-log4j2/issues/3562">3562</a>)</p>
</li>
<li>
<p>Deprecate or remove static hiding methods. (<a href="https://github.com/apache/logging-log4j2/issues/3601">3601</a>)</p>
</li>
<li>
<p>Avoid surrogate character handling in <code>JsonWriter</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-x-x-removed"><a class="anchor" href="#release-notes-2-x-x-removed"></a>Removed</h3>
<div class="ulist">
<ul>
<li>
<p>Remove support for the <code>{ansi}</code> option in Pattern Layout exception converters (<a href="https://github.com/apache/logging-log4j2/pull/3045">3045</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-x-x-updated"><a class="anchor" href="#release-notes-2-x-x-updated"></a>Updated</h3>
<div class="ulist">
<ul>
<li>
<p>Update <code>actions/stale</code> to version <code>9.1.0</code> (<a href="https://github.com/apache/logging-log4j2/pull/3625">3625</a>)</p>
</li>
<li>
<p>Update <code>ch.qos.logback:logback-core</code> to version <code>1.3.15</code> (<a href="https://github.com/apache/logging-log4j2/pull/3354">3354</a>)</p>
</li>
<li>
<p>Update <code>co.elastic.clients:elasticsearch-java</code> to version <code>8.17.3</code> (<a href="https://github.com/apache/logging-log4j2/pull/3521">3521</a>)</p>
</li>
<li>
<p>Update <code>co.elastic.logging:log4j2-ecs-layout</code> to version <code>1.7.0</code> (<a href="https://github.com/apache/logging-log4j2/pull/3615">3615</a>)</p>
</li>
<li>
<p>Update <code>com.code-intelligence:jazzer</code> to version <code>0.24.0</code> (<a href="https://github.com/apache/logging-log4j2/pull/3424">3424</a>)</p>
</li>
<li>
<p>Update <code>com.fasterxml.jackson:jackson-bom</code> to version <code>2.18.3</code> (<a href="https://github.com/apache/logging-log4j2/pull/3515">3515</a>)</p>
</li>
<li>
<p>Update <code>com.github.jnr:jnr-ffi</code> to version <code>2.2.17</code> (<a href="https://github.com/apache/logging-log4j2/pull/3082">3082</a>)</p>
</li>
<li>
<p>Update <code>com.github.luben:zstd-jni</code> to version <code>1.5.7-1</code> (<a href="https://github.com/apache/logging-log4j2/pull/3479">3479</a>)</p>
</li>
<li>
<p>Update <code>com.github.spotbugs:spotbugs-annotations</code> to version <code>4.9.3</code> (<a href="https://github.com/apache/logging-log4j2/pull/3545">3545</a>)</p>
</li>
<li>
<p>Update <code>com.google.guava:guava</code> to version <code>33.4.8-jre</code> (<a href="https://github.com/apache/logging-log4j2/pull/3614">3614</a>)</p>
</li>
<li>
<p>Update <code>commons-codec:commons-codec</code> to version <code>1.18.0</code> (<a href="https://github.com/apache/logging-log4j2/pull/3421">3421</a>)</p>
</li>
<li>
<p>Update <code>commons-io:commons-io</code> to version <code>2.18.0</code> (<a href="https://github.com/apache/logging-log4j2/pull/3223">3223</a>)</p>
</li>
<li>
<p>Update <code>fast-xml-parser</code> to version <code>5.0.6</code> (<a href="https://github.com/apache/logging-log4j2/pull/3487">3487</a>)</p>
</li>
<li>
<p>Update <code>gradle/develocity-actions</code> to version <code>1.3</code> (<a href="https://github.com/apache/logging-log4j2/pull/3309">3309</a>)</p>
</li>
<li>
<p>Update <code>io.fabric8:docker-maven-plugin</code> to version <code>0.46.0</code> (<a href="https://github.com/apache/logging-log4j2/pull/3592">3592</a>)</p>
</li>
<li>
<p>Update <code>net.java.dev.jna:jna</code> to version <code>5.17.0</code> (<a href="https://github.com/apache/logging-log4j2/pull/3542">3542</a>)</p>
</li>
<li>
<p>Update <code>org.apache.activemq:activemq-broker</code> to version <code>6.1.6</code> (<a href="https://github.com/apache/logging-log4j2/pull/3531">3531</a>)</p>
</li>
<li>
<p>Update <code>org.apache.cassandra:cassandra-all</code> to version <code>3.11.19</code> (<a href="https://github.com/apache/logging-log4j2/pull/3440">3440</a>)</p>
</li>
<li>
<p>Update <code>org.apache.commons:commons-csv</code> to version <code>1.14.0</code> (<a href="https://github.com/apache/logging-log4j2/pull/3559">3559</a>)</p>
</li>
<li>
<p>Update <code>org.apache.commons:commons-dbcp2</code> to version <code>2.13.0</code> (<a href="https://github.com/apache/logging-log4j2/pull/3271">3271</a>)</p>
</li>
<li>
<p>Update <code>org.apache.commons:commons-pool2</code> to version <code>2.12.1</code> (<a href="https://github.com/apache/logging-log4j2/pull/3422">3422</a>)</p>
</li>
<li>
<p>Update <code>org.apache.groovy:groovy-bom</code> to version <code>4.0.26</code> (<a href="https://github.com/apache/logging-log4j2/pull/3506">3506</a>)</p>
</li>
<li>
<p>Update <code>org.apache.kafka:kafka-clients</code> to version <code>3.9.0</code> (<a href="https://github.com/apache/logging-log4j2/pull/3184">3184</a>)</p>
</li>
<li>
<p>Update <code>org.apache.logging.log4j:log4j-transform-maven-shade-plugin-extensions</code> to version <code>0.2.0</code> (<a href="https://github.com/apache/logging-log4j2/pull/3147">3147</a>)</p>
</li>
<li>
<p>Update <code>org.apache.logging:logging-parent</code> to version <code>12.0.0</code></p>
</li>
<li>
<p>Update <code>org.apache.maven.surefire:surefire-junit47</code> to version <code>3.5.2</code> (<a href="https://github.com/apache/logging-log4j2/pull/3162">3162</a>)</p>
</li>
<li>
<p>Update <code>org.apache.tomcat:tomcat-juli</code> to version <code>10.1.30</code> (<a href="https://github.com/apache/logging-log4j2/pull/2999">2999</a>)</p>
</li>
<li>
<p>Update <code>org.assertj:assertj-core</code> to version <code>3.27.3</code> (<a href="https://github.com/apache/logging-log4j2/pull/3404">3404</a>)</p>
</li>
<li>
<p>Update <code>org.awaitility:awaitility</code> to version <code>4.3.0</code> (<a href="https://github.com/apache/logging-log4j2/pull/3489">3489</a>)</p>
</li>
<li>
<p>Update <code>org.codehaus.plexus:plexus-utils</code> to version <code>3.6.0</code> (<a href="https://github.com/apache/logging-log4j2/pull/3297">3297</a>)</p>
</li>
<li>
<p>Update <code>org.eclipse.jetty:jetty-util</code> to version <code>9.4.57.v20241219</code> (<a href="https://github.com/apache/logging-log4j2/pull/3377">3377</a>)</p>
</li>
<li>
<p>Update <code>org.eclipse.platform:org.eclipse.osgi</code> to version <code>3.23.0</code> (<a href="https://github.com/apache/logging-log4j2/pull/3530">3530</a>)</p>
</li>
<li>
<p>Update <code>org.hsqldb:hsqldb</code> to version <code>2.7.4</code> (<a href="https://github.com/apache/logging-log4j2/pull/3163">3163</a>)</p>
</li>
<li>
<p>Update <code>org.jmdns:jmdns</code> to version <code>3.6.1</code> (<a href="https://github.com/apache/logging-log4j2/pull/3544">3544</a>)</p>
</li>
<li>
<p>Update <code>org.json:json</code> to version <code>20250107</code> (<a href="https://github.com/apache/logging-log4j2/pull/3373">3373</a>)</p>
</li>
<li>
<p>Update <code>org.junit:junit-bom</code> to version <code>5.12.1</code> (<a href="https://github.com/apache/logging-log4j2/pull/3543">3543</a>)</p>
</li>
<li>
<p>Update <code>org.mongodb:bson</code> to version <code>5.3.1</code> (<a href="https://github.com/apache/logging-log4j2/pull/3409">3409</a>)</p>
</li>
<li>
<p>Update <code>org.openjdk.nashorn:nashorn-core</code> to version <code>15.6</code> (<a href="https://github.com/apache/logging-log4j2/pull/3331">3331</a>)</p>
</li>
<li>
<p>Update <code>org.openrewrite.maven:rewrite-maven-plugin</code> to version <code>6.0.1</code> (<a href="https://github.com/apache/logging-log4j2/pull/3397">3397</a>)</p>
</li>
<li>
<p>Update <code>org.openrewrite.recipe:rewrite-logging-frameworks</code> to version <code>3.2.0</code> (<a href="https://github.com/apache/logging-log4j2/pull/3446">3446</a>)</p>
</li>
<li>
<p>Update <code>org.openrewrite.recipe:rewrite-migrate-java</code> to version <code>3.0.0</code> (<a href="https://github.com/apache/logging-log4j2/pull/3390">3390</a>)</p>
</li>
<li>
<p>Update <code>org.ops4j.pax.exam:exam-maven-plugin</code> to version <code>4.14.0</code> (<a href="https://github.com/apache/logging-log4j2/pull/3280">3280</a>)</p>
</li>
<li>
<p>Update <code>org.ops4j.pax.exam:pax-exam</code> to version <code>4.14.0</code> (<a href="https://github.com/apache/logging-log4j2/pull/3277">3277</a>)</p>
</li>
<li>
<p>Update <code>org.slf4j:slf4j-api</code> to version <code>2.0.17</code> (<a href="https://github.com/apache/logging-log4j2/pull/3499">3499</a>)</p>
</li>
<li>
<p>Update <code>org.slf4j:slf4j-nop</code> to version <code>2.0.17</code> (<a href="https://github.com/apache/logging-log4j2/pull/3490">3490</a>)</p>
</li>
<li>
<p>Update <code>org.springframework.cloud:spring-cloud-context</code> to version <code>4.2.1</code> (<a href="https://github.com/apache/logging-log4j2/pull/3560">3560</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-24-3"><a class="anchor" href="#release-notes-2-24-3"></a>2.24.3</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2024-12-10</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This release fixes two minor bugs.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-24-3-fixed"><a class="anchor" href="#release-notes-2-24-3-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Fix <code>ConcurrentModificationException</code>, if multiple threads modify loggers concurrently. This bug affects users that modify logger levels programmatically. (<a href="https://github.com/apache/logging-log4j2/issues/3234">3234</a>)</p>
</li>
<li>
<p>Fix for RegexCreator NPE, the constructor expects a boolean primitive, but the createFilter static method was boxed. Fixed that to remove the NPE issues. (<a href="https://github.com/apache/logging-log4j2/issues/3239">3239</a>)</p>
</li>
<li>
<p>Protects <code>PropertiesUtil</code> against property sources that call <code>PropertiesUtil</code> recursively. In some cases such a property source can even cause deadlocks. (<a href="https://github.com/apache/logging-log4j2/issues/3252">3252</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-24-2"><a class="anchor" href="#release-notes-2-24-2"></a>2.24.2</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2024-11-18</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This release fixes a critical bug in Log4j API initialization code, which can cause <code>LogManager.getLogger()</code> to return <code>null</code> under certain conditions.
See
<a href="https://github.com/apache/logging-log4j2/issues/3143">#3143</a>
for details.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-24-2-fixed"><a class="anchor" href="#release-notes-2-24-2-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Fix key removal issues in Thread Context (<a href="https://github.com/apache/logging-log4j2/pull/3048">3048</a>)</p>
</li>
<li>
<p>Use hard references to <code>Logger</code>s in <code>LoggerRegistry</code>. (<a href="https://github.com/apache/logging-log4j2/issues/3143">3143</a>)</p>
</li>
<li>
<p>Fix <code>ArrayIndexOutOfBoundsException</code> in JSON Template Layout truncated exception resolver (<a href="https://github.com/apache/logging-log4j2/pull/3216">3216</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-24-1"><a class="anchor" href="#release-notes-2-24-1"></a>2.24.1</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2024-09-24</p>
</dd>
</dl>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Due to a critical bug affecting this release (see
<a href="https://github.com/apache/logging-log4j2/issues/3143">#3143</a>)
users are encouraged to upgrade to
<a href="#release-notes-2-24-2">version <code>2.24.2</code></a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This release contains mainly bug fixes of problems encountered with the thread context map, logger registry and configuration reloading.</p>
</div>
<div class="paragraph">
<p>It also enhances integration tests to use Docker images of the most recent releases of MongoDB and Elastic Search.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-24-1-changed"><a class="anchor" href="#release-notes-2-24-1-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Rework <code>LoggerRegistry</code> to make it <code>MessageFactory</code>-namespaced. This effectively allows loggers of same name, but different message factory. (<a href="https://github.com/apache/logging-log4j2/pull/2936">2936</a>)</p>
</li>
<li>
<p>Enable Docker-based tests in CI for JSON Template Layout (<a href="https://github.com/apache/logging-log4j2/pull/2953">2953</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-24-1-fixed"><a class="anchor" href="#release-notes-2-24-1-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Switch MongoDB tests to use Docker. (<a href="https://github.com/apache/logging-log4j2/issues/2229">2229</a>)</p>
</li>
<li>
<p>Fix reloading of the configuration from an HTTP(S) source (<a href="https://github.com/apache/logging-log4j2/issues/2937">2937</a>)</p>
</li>
<li>
<p>Fix <code>putAll()</code> in the default thread context map implementation (<a href="https://github.com/apache/logging-log4j2/pull/2942">2942</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-24-1-updated"><a class="anchor" href="#release-notes-2-24-1-updated"></a>Updated</h3>
<div class="ulist">
<ul>
<li>
<p>Update <code>org.apache.logging:logging-parent</code> to version <code>11.3.0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-24-0"><a class="anchor" href="#release-notes-2-24-0"></a>2.24.0</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2024-09-03</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This release contains improvements and changes in several areas of Log4j:</p>
</div>
<div class="sect2">
<h3 id="_log4j_api"><a class="anchor" href="#_log4j_api"></a>Log4j API</h3>
<div class="paragraph">
<p>The <code>2.24.0</code> version of Log4j API has been enhanced with changes from the 3.x branch and will be used by both Log4j 2 Core and Log4j 3 Core releases.
The changes include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A faster default <code>ThreadContextMap</code>.</p>
</li>
<li>
<p>Enhanced GraalVM support: native binaries that use Log4j API will no longer require additional GraalVM configuration.</p>
</li>
<li>
<p>The configuration properties subsystem now only accepts the official pre-2.10 property names and the normalized post-2.10 names.
Check your configuration for typos.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_documentation"><a class="anchor" href="#_documentation"></a>Documentation</h3>
<div class="paragraph">
<p>The project website has been almost entirely rewritten to provide improved documentation and faster access to the information you need.</p>
</div>
</div>
<div class="sect2">
<h3 id="_bridges"><a class="anchor" href="#_bridges"></a>Bridges</h3>
<div class="paragraph">
<p>The JUL-to-Log4j API and Log4j 1-to-Log4j API will no longer be able to modify the configuration of Log4j Core by default.
If such a functionality is required, it must be explicitly enabled.
See the documentation of the
<a href="migrate-from-log4j1.html#log4j1.compatibility" class="xref page"><code>log4j1.compatibility</code></a>
and
<a href="log4j-jul.html#log4j2.julLoggerAdapter" class="xref page"><code>log4j2.julLoggerAdapter</code></a>
configuration properties for more details.</p>
</div>
</div>
<div class="sect2">
<h3 id="_modules"><a class="anchor" href="#_modules"></a>Modules</h3>
<div class="paragraph">
<p>The following Log4j Core additional modules have been removed:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>log4j-flume-ng</code></dt>
<dd>
<p>The module is no longer part of the release process and will follow its own release lifecycle.
Please manage your dependencies using <a href="components.html#log4j-bom" class="xref page"><code>log4j-bom</code></a> to always use its latest version.</p>
</dd>
<dt class="hdlist1"><code>log4j-kubernetes</code></dt>
<dd>
<p>The module has been moved to the <a href="https://github.com/fabric8io/kubernetes-client/blob/main/doc/KubernetesLog4j.md">Fabric8.io Kubernetes project</a> and follows the Fabric8.io release lifecycle.</p>
</dd>
<dt class="hdlist1"><code>log4j-mongodb3</code></dt>
<dd>
<p>The module based on MongoDB Java client version 3.x has been removed.
Please migrate to <a href="components.html#log4j-mongodb" class="xref page"><code>log4j-mongodb</code></a> (client version 5.x) or <a href="components.html#log4j-mongodb4" class="xref page"><code>log4j-mongodb4</code></a> (client version 4.x).</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_jmx_changes"><a class="anchor" href="#_jmx_changes"></a>JMX changes</h3>
<div class="paragraph">
<p>Starting in version 2.24.0, JMX support is disabled by default and can be re-enabled via the
<a href="manual/systemproperties.html#log4j2.disableJmx" class="xref page"><code>log4j2.disableJmx</code></a>
system property.</p>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-24-0-added"><a class="anchor" href="#release-notes-2-24-0-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Add a faster <code>DefaultThreadContextMap</code> implementation. (<a href="https://github.com/apache/logging-log4j2/pull/2330">2330</a>)</p>
</li>
<li>
<p>Add Logback throwable-consuming semantics as an option in <code>log4j-slf4j-impl</code> and <code>log4j-slf4j2-impl</code>. Users can enable it by setting the property <a href="manual/systemproperties.html#log4j2.messageFactory" class="xref page"><code>log4j2.messageFactory</code></a> to <code>org.apache.logging.slf4j.message.ThrowableConsumingMessageFactory</code>. (<a href="https://github.com/apache/logging-log4j2/issues/2363">2363</a>)</p>
</li>
<li>
<p>Add trace context fields to <code>GcpLayout.json</code> (<a href="https://github.com/apache/logging-log4j2/pull/2498">2498</a>)</p>
</li>
<li>
<p>Add <em>"Plugin Reference"</em> to the website. It is a Javadoc-on-steroids focusing on Log4j plugins. (<a href="https://github.com/apache/logging-log4j2/issues/1954">1954</a>)</p>
</li>
<li>
<p>Automate website deployment using the new CI infrastructure shipped with <code>org.apache.logging:logging-parent:11.0.0</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-24-0-changed"><a class="anchor" href="#release-notes-2-24-0-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Fix usage of <code>log4j-api</code> in GraalVM without additional reachability data. (<a href="https://github.com/apache/logging-log4j2/issues/1539">1539</a>)</p>
</li>
<li>
<p>Ignore exceptions thrown by PropertySources. (<a href="https://github.com/spring-projects/spring-boot/issues/33450">Spring-33450</a>)</p>
</li>
<li>
<p>Add logging to <code>PropertiesUtil</code> and fix <code>Duration</code> parser. (<a href="https://github.com/apache/logging-log4j2/issues/1963">1936</a>)</p>
</li>
<li>
<p>Disable level modification via JUL by default. (<a href="https://github.com/apache/logging-log4j2/issues/2353">2353</a>)</p>
</li>
<li>
<p>Centralize initialization in the <code>Provider</code> class and deprecate the <a href="manual/systemproperties.html#log4j2.loggerContextFactory" class="xref page"><code>log4j2.loggerContextFactory</code></a> property. (<a href="https://github.com/apache/logging-log4j2/pull/2374">2374</a>)</p>
</li>
<li>
<p>Remove <code>log4j-kubernetes</code> lookup. User should migrate to <a href="https://github.com/fabric8io/kubernetes-client/blob/main/doc/KubernetesLog4j.md"><code>io.fabric8:kubernetes-log4j</code></a>. (<a href="https://github.com/apache/logging-log4j2/pull/2412">2412</a>)</p>
</li>
<li>
<p>Disable JMX support by default. Requires <a href="manual/systemproperties.html#log4j2.disableJmx" class="xref page"><code>log4j2.disableJmx</code></a> to be set to <code>false</code> to enable JMX support. (<a href="https://github.com/apache/logging-log4j2/issues/2462">2462</a>)</p>
</li>
<li>
<p>Replace some usages of <code>DateTimeFormatter#toString()</code> with <code>DateTimeFormatter#formatTo(StringBuilder)</code> to cut down on allocations (<a href="https://github.com/apache/logging-log4j2/pull/2515">2515</a>)</p>
</li>
<li>
<p>Disable programmatic configuration in Log4j 1 Bridge if <code>log4j1.compatibility</code> is <code>false</code>. (<a href="https://github.com/apache/logging-log4j2/issues/2778">2778</a>)</p>
</li>
<li>
<p>Improve missing plugin descriptor warnings. (<a href="https://github.com/apache/logging-log4j2/issues/2835">2835</a>)</p>
</li>
<li>
<p>Remove configuration properties caching and (undocumented) fuzzy property name matching. (<a href="https://github.com/apache/logging-log4j2/pull/2849">2849</a>)</p>
</li>
<li>
<p>Fixes property source ordering to account for different sources with the same priority. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3618">LOG4J2-3618</a>)</p>
</li>
<li>
<p>Prioritize user-defined values of <a href="manual/systemproperties.html#log4j2.enableThreadlocals" class="xref page"><code>log4j2.enableThreadlocals</code></a>, <a href="manual/systemproperties.html#log4j2.garbagefreeThreadContextMap" class="xref page"><code>log4j2.garbagefreeThreadContextMap</code></a> and <a href="manual/systemproperties.html#log4j2.shutdownHookEnabled" class="xref page"><code>log4j2.shutdownHookEnabled</code></a> over the value of <a href="manual/systemproperties.html#log4j2.isWebapp" class="xref page"><code>log4j2.isWebapp</code></a>. (<a href="https://github.com/apache/logging-log4j2/pull/2517">2517</a>)</p>
</li>
<li>
<p>Disallow duplicate keys in JSON Template Layout templates</p>
</li>
<li>
<p>Deprecate <code>log4j2.defaultStatusLevel</code> property in Log4j Core in favor of <a href="manual/status-logger.html#log4j2.statusLoggerLevel" class="xref page"><code>log4j2.statusLoggerLevel</code></a>. (<a href="https://github.com/apache/logging-log4j2/pull/2481">2481</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-24-0-deprecated"><a class="anchor" href="#release-notes-2-24-0-deprecated"></a>Deprecated</h3>
<div class="ulist">
<ul>
<li>
<p>Deprecate <code>Message#getFormat()</code> due to unclear semantics and inconsistent implementations (<a href="https://github.com/apache/logging-log4j2/pull/2773">2773</a>)</p>
</li>
<li>
<p>Deprecate <code>org.apache.logging.log4j.EventLogger</code> for removal (<a href="https://github.com/apache/logging-log4j2/pull/2665">2665</a>)</p>
</li>
<li>
<p>Deprecate <code>org.apache.logging.log4j.core.appender.rolling.action.Duration</code> class for removal (<a href="https://github.com/apache/logging-log4j2/pull/2425">2425</a>)</p>
</li>
<li>
<p>Deprecate the <code>log4j-mongodb4</code> module in favor of <code>log4j-mongodb</code> (<a href="https://github.com/apache/logging-log4j2/pull/2486">2486</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-24-0-fixed"><a class="anchor" href="#release-notes-2-24-0-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Use FQDN in RFC5424 Layout. (<a href="https://github.com/apache/logging-log4j2/issues/1740">1740</a>)</p>
</li>
<li>
<p>Fix custom thread-context data provider handling in lookups and filters. (<a href="https://github.com/apache/logging-log4j2/issues/2331">2331</a>)</p>
</li>
<li>
<p>Fix handling of <a href="manual/systemproperties.html#log4j2.messageFactory" class="xref page"><code>log4j2.messageFactory</code></a> and <a href="manual/systemproperties.html#log4j2.flowMessageFactory" class="xref page"><code>log4j2.flowMessageFactory</code></a> properties. (<a href="https://github.com/apache/logging-log4j2/issues/2379">2379</a>)</p>
</li>
<li>
<p>Discard blank keys in <code>PropertiesUtil</code> (<a href="https://github.com/apache/logging-log4j2/issues/2414">2414</a>)</p>
</li>
<li>
<p>Fix handling of <a href="manual/status-logger.html#log4j2.debug" class="xref page"><code>log4j2.debug</code></a>. (<a href="https://github.com/apache/logging-log4j2/issues/2703">2703</a>)</p>
</li>
<li>
<p>Fix location requirement for the <code>%F</code> and <code>%file</code> keys in Pattern Layout (<a href="https://github.com/apache/logging-log4j2/issues/2781">2781</a>)</p>
</li>
<li>
<p>Fix <code>JsonLayout</code> failure under JPMS. (<a href="https://github.com/apache/logging-log4j2/issues/2814">2814</a>)</p>
</li>
<li>
<p>Fix empty string handling for <code>TruncatingBufferedWriter</code> (<a href="https://github.com/apache/logging-log4j2/pull/2609">2609</a>)</p>
</li>
<li>
<p>Fix that parameterized message formatting throws an exception when there are insufficient number of parameters. It previously simply didn&#8217;t replace the '{}' sequence. The behavior changed in 2.21.0 and should be restored for backward compatibility. (<a href="https://github.com/apache/logging-log4j2/issues/2380">2380</a>)</p>
</li>
<li>
<p>Fix <code>ClassCastException</code> in LMAX Disruptor 3 initialization (<a href="https://github.com/apache/logging-log4j2/pull/2768">2768</a>)</p>
</li>
<li>
<p>Fix requirement on the <code>java.management</code> module when JMX is disabled, which is the default (<a href="https://github.com/apache/logging-log4j2/pull/2775">2775</a>)</p>
</li>
<li>
<p>Website is migrated to Antora with several formatting and link fixes (<a href="https://github.com/apache/logging-log4j2/pull/2427">2427</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-24-0-removed"><a class="anchor" href="#release-notes-2-24-0-removed"></a>Removed</h3>
<div class="ulist">
<ul>
<li>
<p>Move Flume Appender to its own release lifecycle. (<a href="https://github.com/apache/logging-log4j2/issues/2902">2902</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-24-0-updated"><a class="anchor" href="#release-notes-2-24-0-updated"></a>Updated</h3>
<div class="ulist">
<ul>
<li>
<p>Add module log4j-mongodb to track the current MongoDB driver (currently version 5). (<a href="https://github.com/apache/logging-log4j2/pull/2486">2486</a>)</p>
</li>
<li>
<p>Remove module log4j-mongodb3, use log4j-mongodb instead, log4j-mongodb4 is deprecated for removal. (<a href="https://github.com/apache/logging-log4j2/pull/2486">2486</a>)</p>
</li>
<li>
<p>Update <code>com.fasterxml.jackson:jackson-bom</code> to version <code>2.17.2</code> (<a href="https://github.com/apache/logging-log4j2/pull/2719">2719</a>)</p>
</li>
<li>
<p>Update <code>com.github.luben:zstd-jni</code> to version <code>1.5.6-5</code> (<a href="https://github.com/apache/logging-log4j2/pull/2901">2901</a>)</p>
</li>
<li>
<p>Update <code>commons-codec:commons-codec</code> to version <code>1.17.1</code> (<a href="https://github.com/apache/logging-log4j2/pull/2741">2741</a>)</p>
</li>
<li>
<p>Update <code>commons-logging:commons-logging</code> to version <code>1.3.4</code> (<a href="https://github.com/apache/logging-log4j2/pull/2864">2864</a>)</p>
</li>
<li>
<p>Update <code>github/codeql-action</code> to version <code>3.25.1</code> (<a href="https://github.com/apache/logging-log4j2/pull/2483">2483</a>)</p>
</li>
<li>
<p>Update <code>io.fabric8:docker-maven-plugin</code> to version <code>0.45.0</code> (<a href="https://github.com/apache/logging-log4j2/pull/2776">2776</a>)</p>
</li>
<li>
<p>Update <code>org.apache.cassandra:cassandra-all</code> to version <code>3.11.17</code> (<a href="https://github.com/apache/logging-log4j2/pull/2479">2479</a>)</p>
</li>
<li>
<p>Update <code>org.apache.commons:commons-compress</code> to version <code>1.27.1</code> (<a href="https://github.com/apache/logging-log4j2/pull/2869">2869</a>)</p>
</li>
<li>
<p>Update <code>org.apache.commons:commons-csv</code> to version <code>1.11.0</code> (<a href="https://github.com/apache/logging-log4j2/pull/2565">2565</a>)</p>
</li>
<li>
<p>Update <code>org.apache.commons:commons-lang3</code> to version <code>3.17.0</code> (<a href="https://github.com/apache/logging-log4j2/pull/2907">2907</a>)</p>
</li>
<li>
<p>Update <code>org.apache.kafka:kafka-clients</code> to version <code>3.8.0</code> (<a href="https://github.com/apache/logging-log4j2/pull/2777">2777</a>)</p>
</li>
<li>
<p>Update <code>org.apache.logging:logging-parent</code> to version <code>11.2.0</code></p>
</li>
<li>
<p>Update <code>org.eclipse.jetty:jetty-bom</code> to version <code>9.4.56.v20240826</code> (<a href="https://github.com/apache/logging-log4j2/pull/2917">2917</a>)</p>
</li>
<li>
<p>Update <code>org.jctools:jctools-core</code> to version <code>4.0.5</code> (<a href="https://github.com/apache/logging-log4j2/pull/2637">2637</a>)</p>
</li>
<li>
<p>Update log4j-mongodb4 <code>org.mongodb:*</code> from <code>4.11.1</code> to <code>4.11.2</code> (<a href="https://github.com/apache/logging-log4j2/pull/2409">2409</a>)</p>
</li>
<li>
<p>Update <code>org.mongodb:bson</code> to version <code>4.11.4</code> (<a href="https://github.com/apache/logging-log4j2/pull/2926">2926</a>)</p>
</li>
<li>
<p>Update <code>org.slf4j:slf4j-api</code> to version <code>2.0.16</code> (<a href="https://github.com/apache/logging-log4j2/pull/2829">2829</a>)</p>
</li>
<li>
<p>Update <code>org.springframework:spring-framework-bom</code> to version <code>5.3.39</code> (<a href="https://github.com/apache/logging-log4j2/pull/2840">2840</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-23-1"><a class="anchor" href="#release-notes-2-23-1"></a>2.23.1</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2024-03-06</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This release contains several small fixes and some dependency updates.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-23-1-changed"><a class="anchor" href="#release-notes-2-23-1-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Fix handling of <code>LoggerContextAware</code> lookups (<a href="https://github.com/apache/logging-log4j2/issues/2309">2309</a>)</p>
</li>
<li>
<p>Fix NPE in <code>PatternProcessor</code> for a <code>UNIX_MILLIS</code> pattern (<a href="https://github.com/apache/logging-log4j2/issues/2346">2346</a>)</p>
</li>
<li>
<p>Improve performance of <code>CloseableThreadContext#closeMap()</code> (<a href="https://github.com/apache/logging-log4j2/pull/2296">2296</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-23-1-fixed"><a class="anchor" href="#release-notes-2-23-1-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Fix that parameterized message formatting doesn&#8217;t throw an exception when there are insufficient number of parameters (<a href="https://github.com/apache/logging-log4j2/pull/2343">2343</a>)</p>
</li>
<li>
<p>Fix <code>StatusLogger</code> log level filtering when debug mode is enabled (<a href="https://github.com/apache/logging-log4j2/issues/2337">2337</a>)</p>
</li>
<li>
<p>Add <a href="manual/status-logger.html#log4j2.statusLoggerDateFormatZone" class="xref page"><code>log4j2.statusLoggerDateFormatZone</code></a> system property to set the time-zone <code>StatusLogger</code> uses to format <code>java.time.Instant</code>. Without this, formatting patterns accessing to time-zone-specific fields (e.g., year-of-era) cause failures. (<a href="https://github.com/apache/logging-log4j2/pull/2322">2322</a>)</p>
</li>
<li>
<p>Fix <code>StatusLogger</code> to correctly read <code>log4j2.StatusLogger.properties</code> resource (<a href="https://github.com/apache/logging-log4j2/pull/2354">2354</a>)</p>
</li>
<li>
<p>Fix stack overflow in <code>StatusLogger</code> (<a href="https://github.com/apache/logging-log4j2/pull/2322">2322</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-23-1-updated"><a class="anchor" href="#release-notes-2-23-1-updated"></a>Updated</h3>
<div class="ulist">
<ul>
<li>
<p>Update <code>jakarta.activation:jakarta.activation-api</code> to version <code>2.1.3</code> (<a href="https://github.com/apache/logging-log4j2/pull/2335">2335</a>)</p>
</li>
<li>
<p>Update <code>jakarta.mail:jakarta.mail-api</code> to version <code>2.1.3</code> (<a href="https://github.com/apache/logging-log4j2/pull/2348">2348</a>)</p>
</li>
<li>
<p>Update <code>org.apache.commons:commons-compress</code> to version <code>1.26.0</code> (<a href="https://github.com/apache/logging-log4j2/pull/2304">2304</a>)</p>
</li>
<li>
<p>Update <code>org.apache.commons:commons-dbcp2</code> to version <code>2.12.0</code> (<a href="https://github.com/apache/logging-log4j2/pull/2344">2344</a>)</p>
</li>
<li>
<p>Update <code>org.apache.kafka:kafka-clients</code> to version <code>3.7.0</code> (<a href="https://github.com/apache/logging-log4j2/pull/2326">2326</a>)</p>
</li>
<li>
<p>Update <code>org.eclipse.angus:angus-activation</code> to version <code>2.0.2</code> (<a href="https://github.com/apache/logging-log4j2/pull/2336">2336</a>)</p>
</li>
<li>
<p>Update <code>org.eclipse.angus:jakarta.mail</code> to version <code>2.0.3</code> (<a href="https://github.com/apache/logging-log4j2/pull/2349">2349</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-23-0"><a class="anchor" href="#release-notes-2-23-0"></a>2.23.0</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2024-02-17</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This release adds support for LMAX Disruptor 4.x and several performance and bug fixes.</p>
</div>
<div class="paragraph">
<p>In order to maintain compatibility with JRE 8, support for LMAX Disruptor 3.x is maintained.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-23-0-added"><a class="anchor" href="#release-notes-2-23-0-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Added support for LMAX Disruptor 4.x (<a href="https://github.com/apache/logging-log4j2/pull/1821">1821</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-23-0-changed"><a class="anchor" href="#release-notes-2-23-0-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Simplify BND configuration after upgrade from version <code>6.4.1</code> to <code>7.0.0</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-23-0-deprecated"><a class="anchor" href="#release-notes-2-23-0-deprecated"></a>Deprecated</h3>
<div class="ulist">
<ul>
<li>
<p>Deprecate the configuration attribute <code>verbose</code> (i.e., <code>&lt;Configuration verbose="&#8230;&#8203;"</code>) and <code>StatusConsoleListener</code> filters (<a href="https://github.com/apache/logging-log4j2/pull/2226">2226</a>)</p>
</li>
<li>
<p>Deprecated the <code>RingBufferLogEventHandler</code> class for removal from the public API in 3.x</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-23-0-fixed"><a class="anchor" href="#release-notes-2-23-0-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Fix regression in <code>JdkMapAdapterStringMap</code> performance. (<a href="https://github.com/apache/logging-log4j2/issues/2238">2238</a>)</p>
</li>
<li>
<p>Fix the behavior of <code>Logger#setLevel</code> and <code>Logger#getLevel</code> in the Log4j 1.2 bridge. (<a href="https://github.com/apache/logging-log4j2/pull/2282">2282</a>)</p>
</li>
<li>
<p>Fix the behavior of <code>CoreLogger#getLevel</code> and <code>CoreLogger#setLevel</code> in the <code>log4j-jul</code> module. (<a href="https://github.com/apache/logging-log4j2/pull/2282">2282</a>)</p>
</li>
<li>
<p>Allow deserialization of all arrays of allowed classes. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3680">LOG4J2-3680</a>)</p>
</li>
<li>
<p>Allow the &lt;Properties&gt; node to appear in any position in the configuration element.</p>
</li>
<li>
<p>Fix forgotten <code>threadName</code> field in <code>RingBufferLogEvent#clear()</code> (<a href="https://github.com/apache/logging-log4j2/issues/2234">2234</a>)</p>
</li>
<li>
<p>Fix <code>StringBuilder</code> cache corruption on recursive access</p>
</li>
<li>
<p>Fixed use of <code>SecurityManager</code> in <code>LoaderUtil</code> where <code>AccessController::doPrivileged</code> should only be invoked when a <code>SecurityManager</code> is installed. Some runtimes do not seem to have this method available. (<a href="https://github.com/apache/logging-log4j2/issues/2129">2129</a>)</p>
</li>
<li>
<p>Fix <code>log4j-spring-cloud-config-client</code> dependencies to include only those required. (<a href="https://github.com/apache/logging-log4j2/issues/2157">2157</a>)</p>
</li>
<li>
<p>Fix typo in Kubernetes <code>clientKeyData</code> configuration property.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-23-0-updated"><a class="anchor" href="#release-notes-2-23-0-updated"></a>Updated</h3>
<div class="ulist">
<ul>
<li>
<p>Update <code>com.fasterxml.jackson:jackson-bom</code> to version <code>2.16.1</code> (<a href="https://github.com/apache/logging-log4j2/pull/2126">2126</a>)</p>
</li>
<li>
<p>Update <code>commons-codec:commons-codec</code> to version <code>1.16.1</code> (<a href="https://github.com/apache/logging-log4j2/pull/2277">2277</a>)</p>
</li>
<li>
<p>Update <code>io.netty:netty-bom</code> to version <code>4.1.107.Final</code> (<a href="https://github.com/apache/logging-log4j2/pull/2284">2284</a>)</p>
</li>
<li>
<p>Update <code>org.apache.logging:logging-parent</code> to version <code>10.6.0</code> (<a href="https://github.com/apache/logging-log4j2/pull/2197">2197</a>)</p>
</li>
<li>
<p>Update <code>org.eclipse.jetty:jetty-bom</code> to version <code>9.4.54.v20240208</code> (<a href="https://github.com/apache/logging-log4j2/pull/2287">2287</a>)</p>
</li>
<li>
<p>Update <code>org.jctools:jctools-core</code> to version <code>4.0.3</code> (<a href="https://github.com/apache/logging-log4j2/pull/2270">2270</a>)</p>
</li>
<li>
<p>Update <code>org.springframework:spring-framework-bom</code> to version <code>5.3.32</code> (<a href="https://github.com/apache/logging-log4j2/pull/2293">2293</a>)</p>
</li>
<li>
<p>Update <code>org.zeromq:jeromq</code> to version <code>0.6.0</code> (<a href="https://github.com/apache/logging-log4j2/pull/2271">2271</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-22-1"><a class="anchor" href="#release-notes-2-22-1"></a>2.22.1</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2023-12-22</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This release contains only dependency upgrades and bug fixes, which do not change the behavior of the artifacts.</p>
</div>
<div class="paragraph">
<p>While maintaining compatibility with Java 8, the artifacts in this release where generated using JDK 17, unlike version <code>2.22.0</code> that used JDK 11.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-22-1-fixed"><a class="anchor" href="#release-notes-2-22-1-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Mark <code>JdkMapAdapterStringMap</code> as frozen if map is immutable. (<a href="https://github.com/apache/logging-log4j2/issues/2098">2098</a>)</p>
</li>
<li>
<p>Fix NPE in <code>CloseableThreadContext</code>. (<a href="https://github.com/apache/logging-log4j2/issues/1426">1426</a>)</p>
</li>
<li>
<p>Use the module name of Conversant Media Disruptor from version <code>1.2.16+</code> of the library.</p>
</li>
<li>
<p>Fix NPE in <code>RollingFileManager</code>. (<a href="https://github.com/apache/logging-log4j2/issues/1645">1645</a>)</p>
</li>
<li>
<p>Fix <code>log4j-to-slf4j</code> JPMS and OSGi descriptors. (<a href="https://github.com/apache/logging-log4j2/issues/1983">1983</a>)</p>
</li>
<li>
<p>Workaround a Coursier/Ivy dependency resolution bug affecting <code>log4j-slf4j-impl</code> and <code>log4j-mongodb3</code>. (<a href="https://github.com/apache/logging-log4j2/issues/2065">2065</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-22-1-updated"><a class="anchor" href="#release-notes-2-22-1-updated"></a>Updated</h3>
<div class="ulist">
<ul>
<li>
<p>Bumped the minimum Java version required for the build to Java 17. Runtime requirements remain unchanged. (<a href="https://github.com/apache/logging-log4j2/pull/2021">2021</a>)</p>
</li>
<li>
<p>Update <code>com.github.luben:zstd-jni</code> to version <code>1.5.5-11</code> (<a href="https://github.com/apache/logging-log4j2/pull/2030">2030</a>)</p>
</li>
<li>
<p>Update <code>com.google.guava:guava</code> to version <code>33.0.0-jre</code> (<a href="https://github.com/apache/logging-log4j2/pull/2110">2110</a>)</p>
</li>
<li>
<p>Update <code>commons-codec:commons-codec</code> to version <code>1.16.0</code> (<a href="https://github.com/apache/logging-log4j2/pull/2042">2042</a>)</p>
</li>
<li>
<p>Update <code>commons-io:commons-io</code> to version <code>2.15.1</code> (<a href="https://github.com/apache/logging-log4j2/pull/2034">2034</a>)</p>
</li>
<li>
<p>Update <code>commons-logging:commons-logging</code> to version <code>1.3.0</code> (<a href="https://github.com/apache/logging-log4j2/pull/2050">2050</a>)</p>
</li>
<li>
<p>Update <code>io.netty:netty-bom</code> to version <code>4.1.104.Final</code> (<a href="https://github.com/apache/logging-log4j2/pull/2095">2095</a>)</p>
</li>
<li>
<p>Update <code>org.apache.commons:commons-compress</code> to version <code>1.25.0</code> (<a href="https://github.com/apache/logging-log4j2/pull/2045">2045</a>)</p>
</li>
<li>
<p>Update <code>org.apache.commons:commons-dbcp2</code> to version <code>2.11.0</code> (<a href="https://github.com/apache/logging-log4j2/pull/2048">2048</a>)</p>
</li>
<li>
<p>Update <code>org.apache.commons:commons-lang3</code> to version <code>3.14.0</code> (<a href="https://github.com/apache/logging-log4j2/pull/2047">2047</a>)</p>
</li>
<li>
<p>Update <code>org.apache.commons:commons-pool2</code> to version <code>2.12.0</code> (<a href="https://github.com/apache/logging-log4j2/pull/2057">2057</a>)</p>
</li>
<li>
<p>Update <code>org.apache.kafka:kafka-clients</code> to version <code>3.6.1</code> (<a href="https://github.com/apache/logging-log4j2/pull/2068">2068</a>)</p>
</li>
<li>
<p>Update <code>org.apache.logging:logging-parent</code> to version <code>10.5.0</code> (<a href="https://github.com/apache/logging-log4j2/pull/2119">2119</a>)</p>
</li>
<li>
<p>Update <code>org.jctools:jctools-core</code> to version <code>4.0.2</code> (<a href="https://github.com/apache/logging-log4j2/pull/1984">1984</a>)</p>
</li>
<li>
<p>Update <code>org.springframework.boot:spring-boot</code> to version <code>2.7.18</code> (<a href="https://github.com/apache/logging-log4j2/pull/1998">1998</a>)</p>
</li>
<li>
<p>Update <code>org.springframework.cloud:spring-cloud-dependencies</code> to version <code>2021.0.9</code> (<a href="https://github.com/apache/logging-log4j2/pull/2109">2109</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-22-0"><a class="anchor" href="#release-notes-2-22-0"></a>2.22.0</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2023-11-17</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This releases provides a <a href="https://cyclonedx.org/capabilities/sbom/">CycloneDX Software Bill of Materials (SBOM)</a> along with each artifact and contains bug fixes addressing issues in the JPMS &amp; OSGi infrastructure overhauled in <code>2.21.0</code>, dependency updates, and some other minor fixes and improvements.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-22-0-sbom"><a class="anchor" href="#release-notes-2-22-0-sbom"></a>CycloneDX Software Bill of Materials (SBOM)</h3>
<div class="paragraph">
<p>This is <em>the first Log4j release</em> that provides a <a href="https://cyclonedx.org/capabilities/sbom/">CycloneDX Software Bill of Materials (SBOM)</a> along with each artifact.
Generated SBOMs are attached as artifacts with <code>cyclonedx</code> classifier and XML extensions, that is, <code>&lt;artifactId&gt;-&lt;version&gt;-cyclonedx.xml</code>.
They contain <code>vulnerability-assertion</code> references to a <a href="https://cyclonedx.org/capabilities/vdr/">CycloneDX Vulnerability Disclosure Report (VDR)</a> that Apache Logging Services uses for all projects it maintains.
This VDR is accessible through the following URL: <a href="https://logging.apache.org/cyclonedx/vdr.xml" class="bare">https://logging.apache.org/cyclonedx/vdr.xml</a></p>
</div>
<div class="paragraph">
<p>SBOM generation is streamlined by <code>logging-parent</code>, see
<a href="https://logging.apache.org/logging-parent/features.html#cyclonedx-sbom">its website</a>
for details.</p>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-22-0-changed"><a class="anchor" href="#release-notes-2-22-0-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Change the order of evaluation of <code>FormattedMessage</code> formatters. Messages are evaluated using <code>java.util.Format</code> only if they don&#8217;t comply to the <code>java.text.MessageFormat</code> or <code>ParameterizedMessage</code> format. (<a href="https://github.com/apache/logging-log4j2/issues/1223">1223</a>)</p>
</li>
<li>
<p>Change default encoding of HTTP Basic Authentication to UTF-8 and add <a href="manual/systemproperties.html#log4j2.configurationAuthorizationEncoding" class="xref page"><code>log4j2.configurationAuthorizationEncoding</code></a> property to overwrite it. (<a href="https://github.com/apache/logging-log4j2/pull/1970">1970</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-22-0-fixed"><a class="anchor" href="#release-notes-2-22-0-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Harden deserialization process by requiring the usage of <code>FilteredObjectInputStream</code> on Java 8 and <code>ObjectInputFilter</code> on Java 9+ to deserialize custom classes. (<a href="https://github.com/apache/logging-log4j2/issues/1884">1906</a>)</p>
</li>
<li>
<p>Fix MDC pattern converter causing issues for <code>%notEmpty</code> (<a href="https://github.com/apache/logging-log4j2/issues/1922">1922</a>)</p>
</li>
<li>
<p>Export missing OSGi &amp; JPMS modules in <code>log4j-layout-template-json</code> and <code>log4j-1.2-api</code> (<a href="https://github.com/apache/logging-log4j2/issues/1895">1895</a>)</p>
</li>
<li>
<p>Fix <code>spring-test</code> dependency scope change (<a href="https://issues.apache.org/jira/browse/LOG4J2-3675">LOG4J2-3675</a>)</p>
</li>
<li>
<p>Fix JPMS descriptors causing <code>jlink</code> issues (<a href="https://github.com/apache/logging-log4j2/issues/1896">1896</a>)</p>
</li>
<li>
<p>Add missing <code>Implementation-</code> and <code>Specification-</code> entries to <code>MANIFEST.MF</code> (implemented by <code>logging-parent</code> version <code>10.3.0</code> update) (<a href="https://github.com/apache/logging-log4j2/issues/1923">1923</a>)</p>
</li>
<li>
<p>Fix <code>NotSerializableException</code> thrown when <code>Logger</code> is serialized with a <code>ReusableMessageFactory</code> (<a href="https://github.com/apache/logging-log4j2/issues/1884">1884</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-22-0-removed"><a class="anchor" href="#release-notes-2-22-0-removed"></a>Removed</h3>
<div class="ulist">
<ul>
<li>
<p>Removed unused <code>FastDateParser</code> which was causing unnecessary heap overhead (<a href="https://issues.apache.org/jira/browse/LOG4J2-3672">LOG4J2-3672</a>, <a href="https://github.com/apache/logging-log4j2/pull/1848">1848</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-22-0-updated"><a class="anchor" href="#release-notes-2-22-0-updated"></a>Updated</h3>
<div class="ulist">
<ul>
<li>
<p>Update <code>com.fasterxml.jackson:jackson-bom</code> to version <code>2.16.0</code> (<a href="https://github.com/apache/logging-log4j2/pull/1974">1974</a>)</p>
</li>
<li>
<p>Update <code>com.github.luben:zstd-jni</code> to version <code>1.5.5-10</code> (<a href="https://github.com/apache/logging-log4j2/pull/1940">1940</a>)</p>
</li>
<li>
<p>Update <code>com.google.guava:guava</code> to version <code>32.1.3-jre</code> (<a href="https://github.com/apache/logging-log4j2/pull/1875">1875</a>)</p>
</li>
<li>
<p>Update <code>io.netty:netty-bom</code> to version <code>4.1.101.Final</code> (<a href="https://github.com/apache/logging-log4j2/pull/1960">1960</a>)</p>
</li>
<li>
<p>Update <code>org.eclipse.persistence:org.eclipse.persistence.jpa</code> to version <code>2.7.13</code> (<a href="https://github.com/apache/logging-log4j2/pull/1900">1900</a>)</p>
</li>
<li>
<p>Update <code>org.fusesource.jansi:jansi</code> to version <code>2.4.1</code> (<a href="https://github.com/apache/logging-log4j2/pull/1907">1907</a>)</p>
</li>
<li>
<p>Update <code>org.mongodb:bson</code> to version <code>4.11.1</code> (<a href="https://github.com/apache/logging-log4j2/pull/1957">1957</a>)</p>
</li>
<li>
<p>Update <code>org.springframework:spring-framework-bom</code> to version <code>5.3.30</code></p>
</li>
<li>
<p>Update <code>org.springframework.boot:spring-boot</code> to version <code>2.7.17</code> (<a href="https://github.com/apache/logging-log4j2/pull/1874">1874</a>)</p>
</li>
<li>
<p>Update <code>org.springframework:spring-framework-bom</code> to version <code>5.3.31</code> (<a href="https://github.com/apache/logging-log4j2/pull/1973">1973</a>)</p>
</li>
<li>
<p>Update <code>org.zeromq:jeromq</code> to version <code>0.5.4</code> (<a href="https://github.com/apache/logging-log4j2/pull/1878">1878</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-21-1"><a class="anchor" href="#release-notes-2-21-1"></a>2.21.1</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2023-10-20</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This patch release contains only the fix of a <code>log4j-jcl</code> bug that prevents it from connecting with <code>commons-logging</code>.</p>
</div>
<div class="paragraph">
<p>The Log4j 2.21.1 API, as well as the other artifacts, maintains binary compatibility with the previous release.</p>
</div>
<div class="paragraph">
<p>Log4j 2.21.1 requires Java 8 to run.
The build requires JDK 11 and generates reproducible binaries.</p>
</div>
<div class="paragraph">
<p>For complete information on Log4j 2, including instructions on how to submit bug reports, patches, get support, or suggestions for improvement, see
<a href="https://logging.apache.org/log4j/2.x/index.html">the Log4j 2 website</a>.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-21-1-fixed"><a class="anchor" href="#release-notes-2-21-1-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Fixes the Apache Commons Logging (JCL) bridge: <code>log4j-jcl</code>. (<a href="https://github.com/apache/logging-log4j2/issues/1865">1865</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-21-0"><a class="anchor" href="#release-notes-2-21-0"></a>2.21.0</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2023-10-12</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This release primarily focuses on enhancements to our OSGi and JPMS support and contains several bug fixes.
It will be the first release built and signed by the CI using the
<a href="https://keyserver.ubuntu.com/pks/lookup?search=077E8893A6DCC33DD4A4D5B256E73BA9A0B592D0&amp;op=index">ASF Logging Services Release Manager GPG key</a>,
which is shared in
<a href="https://downloads.apache.org/logging/KEYS">KEYS</a>.</p>
</div>
<div class="paragraph">
<p>The Log4j 2.21.0 API, as well as the other artifacts, maintains binary compatibility with the previous release.</p>
</div>
<div class="paragraph">
<p>Log4j 2.21.0 requires Java 8 to run.
The build requires JDK 11 and generates reproducible binaries.</p>
</div>
<div class="paragraph">
<p>For complete information on Log4j 2, including instructions on how to submit bug reports, patches, get support, or suggestions for improvement, see
<a href="https://logging.apache.org/log4j/2.x/index.html">the Log4j 2 website</a>.</p>
</div>
<div class="sect2">
<h3 id="_osgi_changes"><a class="anchor" href="#_osgi_changes"></a>OSGi changes</h3>
<div class="paragraph">
<p>All the published artifacts are OSGi bundles or fragments.</p>
</div>
<div class="paragraph">
<p>This release introduces a change in the bundle symbolic names to allow them to function as JPMS module name: all hyphens <code>-</code> present in the bundle names of previous releases were replaced by dots <code>.</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_jpms_changes"><a class="anchor" href="#_jpms_changes"></a>JPMS changes</h3>
<div class="paragraph">
<p>All the published artifacts have been migrated from automatic modules to named JPMS modules.
All packages marked as private in the Javadoc are not exported.</p>
</div>
<div class="paragraph">
<p>The module name of four bridges (<code>log4j-slf4j-impl</code>, <code>log4j-slf4j2-impl</code>, <code>log4j-to-jul</code> and <code>log4j-to-slf4j</code>) have been changed to adhere to the same convention as the OSGi bundle names.</p>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-21-0-added"><a class="anchor" href="#release-notes-2-21-0-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Added marker parent support to <code>JsonTemplateLayout</code> (<a href="https://github.com/apache/logging-log4j2/pull/1381">1381</a>)</p>
</li>
<li>
<p>Added <a href="https://facebook.github.io/zstd/">ZStandard compression</a> support (<a href="https://github.com/apache/logging-log4j2/issues/1508">1508</a>, <a href="https://github.com/apache/logging-log4j2/pull/1514">1514</a>)</p>
</li>
<li>
<p>Added a warning for incorrect syntax of highlighting styles (<a href="https://github.com/apache/logging-log4j2/issues/1545">1545</a>, <a href="https://github.com/apache/logging-log4j2/pull/1637">1637</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-21-0-changed"><a class="anchor" href="#release-notes-2-21-0-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Open <code>FileExtension</code> methods to allow their usage in custom <code>RolloverStrategy</code>s (<a href="https://github.com/apache/logging-log4j2/issues/1365">1365</a>, <a href="https://github.com/apache/logging-log4j2/pull/1683">1683</a>)</p>
</li>
<li>
<p>Bumped the minimum Java version required for the build to JDK 11. Runtime requirements remain unchanged. (<a href="https://github.com/apache/logging-log4j2/pull/1369">1369</a>)</p>
</li>
<li>
<p>Set the default <code>minLevel</code> and <code>maxLevel</code> of <code>LevelRangeFilter</code> to <code>OFF</code> and <code>ALL</code>, respectively (<a href="https://github.com/apache/logging-log4j2/pull/1503">1503</a>)</p>
</li>
<li>
<p>Removed additional <code>isFiltered</code> checks in <code>AsyncLoggerConfig</code> (<a href="https://github.com/apache/logging-log4j2/issues/1550">1550</a>)</p>
</li>
<li>
<p>Use Java version-specific warnings in <code>StackLocator</code> (<a href="https://github.com/apache/logging-log4j2/pull/1760">1760</a>)</p>
</li>
<li>
<p>Started logging a status error event instead of an NPE in <code>OsgiServiceLocator.loadServices(Class, Lookup, boolean)</code> when a bundle has no valid <code>BundleContext</code> for a service type</p>
</li>
<li>
<p>Implemented a CI-based release process</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-21-0-fixed"><a class="anchor" href="#release-notes-2-21-0-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Added validation to rolling file manager path conditions (<a href="https://github.com/apache/logging-log4j2/issues/1231">1231</a>)</p>
</li>
<li>
<p>Adapted the OSGi metadata of <code>log4j-to-slf4j</code> to work with SLF4J 1 and 2. To achieve that used a version range of <code>[1.7,3)</code> for the imported SLF4J packages. (<a href="https://github.com/apache/logging-log4j2/issues/1232">1232</a>)</p>
</li>
<li>
<p>Fixed Javadoc failures (<a href="https://github.com/apache/logging-log4j2/issues/1275">1275</a>, <a href="https://github.com/apache/logging-log4j2/pull/1753">1753</a>)</p>
</li>
<li>
<p>Removed locale-dependent <code>toLowerCase/toUpperCase</code> calls (<a href="https://github.com/apache/logging-log4j2/issues/1281">1281</a>)</p>
</li>
<li>
<p>Redirected old <code>/&lt;module&gt;/apidocs</code> URLs (broken in 2.20.0) to <code>/javadoc/&lt;module&gt;</code> (<a href="https://github.com/apache/logging-log4j2/issues/1284">1284</a>)</p>
</li>
<li>
<p>Added environment variable arbiter (<a href="https://github.com/apache/logging-log4j2/pull/1312">1312</a>)</p>
</li>
<li>
<p>Fixed logging of <code>java.sql.Date</code> objects by appending it before Log4J tries to call <code>java.util.Date.toInstant()</code> on it (<a href="https://github.com/apache/logging-log4j2/issues/1366">1366</a>)</p>
</li>
<li>
<p>Adapted the OSGi metadata of <code>log4j-api</code>, <code>log4j-core</code>, <code>log4j-slf4j-impl</code> and <code>log4j-slf4j2-impl</code> to activate the bundle when it is accessed. To achieve that set the <code>Bundle-ActivationPolicy</code> to <code>lazy</code> for the log4j bundles. (<a href="https://github.com/apache/logging-log4j2/issues/1367">1367</a>)</p>
</li>
<li>
<p>Avoided using released objects in <code>StackTraceStringResolver</code> of <code>JsonTemplateLayout</code> (<a href="https://github.com/apache/logging-log4j2/issues/1380">1380</a>)</p>
</li>
<li>
<p>Added missing setter for <code>connectionStringSource</code> in <code>MongoDb4Provider</code> builder (<a href="https://github.com/apache/logging-log4j2/issues/1389">1389</a>)</p>
</li>
<li>
<p>Fixed NPE in <code>PluginElementVisitor</code> (<a href="https://github.com/apache/logging-log4j2/issues/1391">1391</a>)</p>
</li>
<li>
<p>Added <code>columnType</code> as alias for the column mapping <code>type</code> attribute (<a href="https://github.com/apache/logging-log4j2/issues/1405">1405</a>)</p>
</li>
<li>
<p>Restored <code>Log4jMarker</code> visibility in SLF4J adapters (<a href="https://github.com/apache/logging-log4j2/issues/1414">1414</a>)</p>
</li>
<li>
<p>Fixed buffer size in <code>Log4jFixedFormatter</code> date time formatter (<a href="https://github.com/apache/logging-log4j2/issues/1418">1418</a>)</p>
</li>
<li>
<p>Fixed the propagation of synchronous action failures in <code>RollingFileManager</code> and <code>FileRenameAction</code> (<a href="https://github.com/apache/logging-log4j2/issues/1445">1445</a>, <a href="https://github.com/apache/logging-log4j2/pull/1549">1549</a>)</p>
</li>
<li>
<p>Fixed <code>RollingFileManager</code> to propagate failed synchronous actions correctly (<a href="https://github.com/apache/logging-log4j2/issues/1445">1445</a>)</p>
</li>
<li>
<p>Replaced the usage of <code>System.out</code> in <code>StackLocator</code> for warnings with <code>System.err</code> (<a href="https://github.com/apache/logging-log4j2/issues/1484">1484</a>)</p>
</li>
<li>
<p>Fixed concurrent date-time formatting issue in <code>PatternLayout</code> (<a href="https://github.com/apache/logging-log4j2/pull/1485">1485</a>)</p>
</li>
<li>
<p>Fixed runtime dependencies documentation (<a href="https://github.com/apache/logging-log4j2/pull/1530">1530</a>)</p>
</li>
<li>
<p>Allowed to override FQCN in <code>Log4jEventBuilder</code> by implementing <code>CallerBoundaryAware</code> (<a href="https://github.com/apache/logging-log4j2/issues/1533">1533</a>)</p>
</li>
<li>
<p>Migrated MongoDB tests to JUnit 5 and Flapdoodle Embedded MongoDB 4 (<a href="https://github.com/apache/logging-log4j2/issues/1589">1589</a>)</p>
</li>
<li>
<p>Rewrote message parameter formatter with improved escape handling (<a href="https://github.com/apache/logging-log4j2/issues/1626">1626</a>)</p>
</li>
<li>
<p>Improved formatting and serialization of <code>StackTraceElement</code> on JDK 9+ (<a href="https://github.com/apache/logging-log4j2/issues/1640">1640</a>)</p>
</li>
<li>
<p>Fixed <code>MemoryMappedFileAppender</code> buffer unmapping on JRE 9+ (<a href="https://github.com/apache/logging-log4j2/issues/1646">1646</a>)</p>
</li>
<li>
<p>Fixed rollover strategy in the Log4j 1.x compatibility layer (<a href="https://github.com/apache/logging-log4j2/issues/1650">1650</a>)</p>
</li>
<li>
<p>Removed incorrect mention of <code>base64</code> lookup and improve the rest of the lookup manual (<a href="https://github.com/apache/logging-log4j2/pull/1681">1681</a>, <a href="https://issues.apache.org/jira/browse/LOG4J2-3504">LOG4J2-3504</a>)</p>
</li>
<li>
<p>Implemented <code>LocationAware</code> for <code>JsonTemplateLayout</code>, since this was causing location not being passed to underlying appenders (<a href="https://github.com/apache/logging-log4j2/issues/1692">1692</a>)</p>
</li>
<li>
<p>Added support for <code>long</code> values in MongoDb 4 appender to configure <code>collectionSize</code> (<a href="https://github.com/apache/logging-log4j2/issues/1747">1747</a>)</p>
</li>
<li>
<p>Only shutdown Log4j after last <code>Log4jServletContextListener</code> is executed (<a href="https://github.com/apache/logging-log4j2/issues/1782">1782</a>)</p>
</li>
<li>
<p>Allowed using Spring Arbiter without a Spring environment (<a href="https://github.com/apache/logging-log4j2/issues/1783">1783</a>)</p>
</li>
<li>
<p>Fixed context data loss if <code>&lt;AsyncLogger&gt;</code> components are used with an all async logger context (<a href="https://github.com/apache/logging-log4j2/issues/1786">1786</a>)</p>
</li>
<li>
<p>Fixed <code>JsonTemplateLayout</code> NPE thrown on custom log levels (<a href="https://github.com/apache/logging-log4j2/issues/1805">1805</a>)</p>
</li>
<li>
<p>Improved <code>Log4j-config.xsd</code> schema (<a href="https://issues.apache.org/jira/browse/LOG4J2-170">LOG4J2-170</a>)</p>
</li>
<li>
<p>Fixed NPE in <code>ContextSelector</code> (<a href="https://issues.apache.org/jira/browse/LOG4J2-3217">LOG4J2-3217</a>, <a href="https://github.com/apache/logging-log4j2/pull/1538">1538</a>)</p>
</li>
<li>
<p>Avoided allocating <code>ThreadLocal</code>s in <code>AbstractLogger</code> when they are disabled, since this was causing memory leaks due to retained reference to class loaders in web applications (<a href="https://issues.apache.org/jira/browse/LOG4J2-3657">LOG4J2-3657</a>)</p>
</li>
<li>
<p>Fixed <code>%notEmpty</code> directive of <code>PatternLayout</code> for empty MDC/NDC inputs (<a href="https://issues.apache.org/jira/browse/LOG4J2-3660">LOG4J2-3660</a>)</p>
</li>
<li>
<p>Fixed file descriptor leak on Tomcat (<a href="https://issues.apache.org/jira/browse/LOG4J2-3663">LOG4J2-3663</a>)</p>
</li>
<li>
<p>Ensured <code>FileOutputStream</code> is closed in <code>CommonsCompressAction.execute()</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-21-0-removed"><a class="anchor" href="#release-notes-2-21-0-removed"></a>Removed</h3>
<div class="ulist">
<ul>
<li>
<p>Moved <code>log4j-jmx-gui</code> to <a href="https://github.com/apache/logging-log4j-jmx-gui/actions">its own repository</a> along with its own release cycle</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-21-0-updated"><a class="anchor" href="#release-notes-2-21-0-updated"></a>Updated</h3>
<div class="ulist">
<ul>
<li>
<p>Update Eclipse Angus Activation to version <a href="https://github.com/eclipse-ee4j/angus-activation/releases/tag/2.0.1">2.0.1</a> (<a href="https://github.com/apache/logging-log4j2/pull/1591">1591</a>)</p>
</li>
<li>
<p>Update Eclipse Angus Mail to version <a href="https://github.com/eclipse-ee4j/angus-mail/releases/tag/2.0.2">2.0.2</a> (<a href="https://github.com/apache/logging-log4j2/pull/1591">1591</a>)</p>
</li>
<li>
<p>Update <code>com.datastax.cassandra:cassandra-driver-core</code> to version <code>3.11.5</code> (<a href="https://github.com/apache/logging-log4j2/pull/1591">1591</a>)</p>
</li>
<li>
<p>Update Apache Cassandra to version <a href="https://github.com/apache/cassandra/blob/cassandra-3.11/CHANGES.txt">3.11.16</a> (<a href="https://github.com/apache/logging-log4j2/pull/1591">1591</a>)</p>
</li>
<li>
<p>Update Apache Commons Compress to version <a href="https://commons.apache.org/proper/commons-compress/changes-report.html#a1.24.0">1.24.0</a> (<a href="https://github.com/apache/logging-log4j2/pull/1591">1591</a>)</p>
</li>
<li>
<p>Update Apache Commons CSV to version <a href="https://commons.apache.org/proper/commons-csv/changes-report.html#a1.10.0">1.10.0</a> (<a href="https://github.com/apache/logging-log4j2/pull/1591">1591</a>)</p>
</li>
<li>
<p>Update Jackson to version <a href="https://github.com/FasterXML/jackson/wiki/Jackson-Release-2.15.2">2.15.2</a> (<a href="https://github.com/apache/logging-log4j2/pull/1591">1591</a>)</p>
</li>
<li>
<p>Update Jakarta Activation API to version <a href="https://jakarta.ee/specifications/activation/2.1/changelog/">2.1.2</a> (<a href="https://github.com/apache/logging-log4j2/pull/1591">1591</a>)</p>
</li>
<li>
<p>Update Jakarta Mail API to version <a href="https://jakarta.ee/specifications/mail/2.1/changelog/">2.1.2</a> (<a href="https://github.com/apache/logging-log4j2/pull/1591">1591</a>)</p>
</li>
<li>
<p>Update JCTools to version <a href="https://github.com/JCTools/JCTools/blob/master/RELEASE-NOTES.md">4.0.1</a> (<a href="https://github.com/apache/logging-log4j2/pull/1591">1591</a>)</p>
</li>
<li>
<p>Update Apache Kafka to version <a href="https://archive.apache.org/dist/kafka/3.4.0/RELEASE_NOTES.html">3.4.0</a> (<a href="https://github.com/apache/logging-log4j2/pull/1591">1591</a>)</p>
</li>
<li>
<p>Update Kubernetes client to version <a href="https://github.com/fabric8io/kubernetes-client/releases?q=5.12.4">5.12.4</a> (<a href="https://github.com/apache/logging-log4j2/pull/1591">1591</a>)</p>
</li>
<li>
<p>Update <code>org.mongodb:mongodb-driver-core</code> to version <code>4.10.2</code> (<a href="https://github.com/apache/logging-log4j2/pull/1591">1591</a>)</p>
</li>
<li>
<p>Update <code>io.netty:netty-bom</code> to version <code>4.1.97</code> (<a href="https://github.com/apache/logging-log4j2/pull/1591">1591</a>)</p>
</li>
<li>
<p>Update Spring Boot to version <a href="https://github.com/spring-projects/spring-boot/releases/tag/v2.7.15">2.7.15</a> (<a href="https://github.com/apache/logging-log4j2/pull/1591">1591</a>)</p>
</li>
<li>
<p>Update Spring Framework to version <a href="https://github.com/spring-projects/spring-framework/releases/tag/v5.3.29">5.3.29</a> (<a href="https://github.com/apache/logging-log4j2/pull/1591">1591</a>)</p>
</li>
<li>
<p>Update Tomcat JULI to version <code>10.0.27</code> (<a href="https://github.com/apache/logging-log4j2/pull/1591">1591</a>)</p>
</li>
<li>
<p>Update Woodstox to version <a href="https://github.com/FasterXML/woodstox/blob/master/release-notes/VERSION">6.5.1</a> (<a href="https://github.com/apache/logging-log4j2/pull/1591">1591</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-20-0"><a class="anchor" href="#release-notes-2-20-0"></a>2.20.0</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2023-02-17</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This release primarily contains bug fixes and minor enhancements.</p>
</div>
<div class="paragraph">
<p>Due to a break in compatibility in the SLF4J binding, Log4j now ships with two versions of the SLF4J to Log4j adapters.
<code>log4j-slf4j-impl</code> should be used with SLF4J 1.7.x and earlier and <code>log4j-slf4j18-impl</code> should be used with SLF4J 1.8.x and later.
SLF4J-2.0.0 alpha releases are not fully supported.
See <a href="https://issues.apache.org/jira/browse/LOG4J2-2975">LOG4J2-2975</a> and <a href="https://jira.qos.ch/browse/SLF4J-511">SLF4J-511</a>.</p>
</div>
<div class="paragraph">
<p>The Log4j 2.20.0 API, as well as many core components, maintains binary compatibility with previous releases.</p>
</div>
<div class="paragraph">
<p>Log4j 2.20.0 requires a minimum of Java 8 to build and run.
Log4j 2.12.4 is the last release to support Java 7.
Log4j 2.3.2 is the last release to support Java 6.
Java 6 and Java 7 are no longer supported by the Log4j team.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-20-0-added"><a class="anchor" href="#release-notes-2-20-0-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Add support for timezones in <code>RollingFileAppender</code> date pattern (<a href="https://issues.apache.org/jira/browse/LOG4J2-1631">LOG4J2-1631</a>)</p>
</li>
<li>
<p>Add <code>LogEvent</code> timestamp to <code>ProducerRecord</code> in <code>KafkaAppender</code> (<a href="https://issues.apache.org/jira/browse/LOG4J2-2678">LOG4J2-2678</a>)</p>
</li>
<li>
<p>Add <code>PatternLayout</code> support for abbreviating the name of all logger components except the 2 rightmost (<a href="https://issues.apache.org/jira/browse/LOG4J2-2785">LOG4J2-2785</a>)</p>
</li>
<li>
<p>Removes internal field that leaked into public API. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3615">LOG4J2-3615</a>)</p>
</li>
<li>
<p>Add a <code>LogBuilder#logAndGet()</code> method to emulate the <code>Logger#traceEntry</code> method. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3645">LOG4J2-3645</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-20-0-changed"><a class="anchor" href="#release-notes-2-20-0-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Simplify site generation (<a href="https://github.com/apache/logging-log4j2/pull/1166">1166</a>)</p>
</li>
<li>
<p>Switch the issue tracker from <a href="https://issues.apache.org/jira/browse/LOG4J2">JIRA</a> to <a href="https://github.com/apache/logging-log4j2/issues">GitHub Issues</a> (<a href="https://github.com/apache/logging-log4j2/pull/1172">1172</a>)</p>
</li>
<li>
<p>Remove liquibase-log4j2 maven module (<a href="https://github.com/apache/logging-log4j2/pull/1193">1193</a>)</p>
</li>
<li>
<p>Fix order of stacktrace elements, that causes cache misses in <code>ThrowableProxyHelper</code>. (<a href="https://github.com/apache/logging-log4j2/pull/1214">1214</a>)</p>
</li>
<li>
<p>Switch from <code>com.sun.mail</code> to Eclipse Angus. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3554">LOG4J2-3554</a>)</p>
</li>
<li>
<p>Add Log4j2 Core as default runtime dependency of the SLF4J2-to-Log4j2 API bridge. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3601">LOG4J2-3601</a>)</p>
</li>
<li>
<p>Replace <code>maven-changes-plugin</code> with a custom changelog implementation (<a href="https://issues.apache.org/jira/browse/LOG4J2-3628">LOG4J2-3628</a>)</p>
</li>
<li>
<p>Moved <code>log4j-api</code> and <code>log4j-core</code> artifacts with classifier <code>tests</code> to <code>log4j-api-test</code> and <code>log4j-core-test</code> respectively. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3650">LOG4J2-3650</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-20-0-deprecated"><a class="anchor" href="#release-notes-2-20-0-deprecated"></a>Deprecated</h3>
<div class="ulist">
<ul>
<li>
<p>Deprecate support for package scanning for plugins (<a href="https://issues.apache.org/jira/browse/LOG4J2-3644">LOG4J2-3644</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-20-0-fixed"><a class="anchor" href="#release-notes-2-20-0-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Copy programmatically supplied location even if <code>includeLocation="false"</code>. (<a href="https://github.com/apache/logging-log4j2/pull/1197">1197</a>)</p>
</li>
<li>
<p>Eliminate status logger warning, when <code>disableAnsi</code> or <code>noConsoleNoAnsi</code> is used the style and highlight patterns. (<a href="https://github.com/apache/logging-log4j2/issues/1202">1202</a>)</p>
</li>
<li>
<p>Fix detection of location requirements in <code>RewriteAppender</code>. (<a href="https://github.com/apache/logging-log4j2/issues/1274">1274</a>)</p>
</li>
<li>
<p>Replace regex with manual code to escape characters in Rfc5424Layout. (<a href="https://github.com/apache/logging-log4j2/pull/1277">1277</a>)</p>
</li>
<li>
<p>Fix <code>java.sql.Time</code> object formatting in <code>MapMessage</code> (<a href="https://issues.apache.org/jira/browse/LOG4J2-2297">LOG4J2-2297</a>)</p>
</li>
<li>
<p>Fix previous fire time computation in <code>CronTriggeringPolicy</code> (<a href="https://issues.apache.org/jira/browse/LOG4J2-3357">LOG4J2-3357</a>)</p>
</li>
<li>
<p>Correct default to not include location for <code>AsyncRootLogger</code>s (<a href="https://issues.apache.org/jira/browse/LOG4J2-3487">LOG4J2-3487</a>)</p>
</li>
<li>
<p>Make StatusConsoleListener use SimpleLogger internally. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3584">LOG4J2-3584</a>)</p>
</li>
<li>
<p>Lazily evaluate the level of a SLF4J <code>LogEventBuilder</code> (<a href="https://issues.apache.org/jira/browse/LOG4J2-3598">LOG4J2-3598</a>)</p>
</li>
<li>
<p>Fixes priority of Legacy system properties, which are now back to having higher priority than Environment variables. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3621">LOG4J2-3615</a>)</p>
</li>
<li>
<p>Protects <code>ServiceLoaderUtil</code> from unchecked <code>ServiceLoader</code> exceptions. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3624">LOG4J2-3624</a>)</p>
</li>
<li>
<p>Fix <code>Configurator#setLevel</code> for internal classes (<a href="https://issues.apache.org/jira/browse/LOG4J2-3631">LOG4J2-3631</a>)</p>
</li>
<li>
<p>Fix level propagation in <code>Log4jBridgeHandler</code> (<a href="https://issues.apache.org/jira/browse/LOG4J2-3634">LOG4J2-3634</a>)</p>
</li>
<li>
<p>Disable <code>OsgiServiceLocator</code> if not running in OSGI container. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3642">LOG4J2-3642</a>)</p>
</li>
<li>
<p>When using a Date Lookup in the file pattern the current time should be used. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3643">LOG4J2-3643</a>)</p>
</li>
<li>
<p>Fixed <code>LogBuilder</code> filtering in the presence of global filters. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3647">LOG4J2-3647</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-19-0"><a class="anchor" href="#release-notes-2-19-0"></a>2.19.0</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2022-09-09</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This release primarily contains bug fixes and minor enhancements.</p>
</div>
<div class="paragraph">
<p>Due to a break in compatibility in the SLF4J binding, Log4j now ships with two versions of the SLF4J to Log4j adapters.
<code>log4j-slf4j-impl</code> should be used with SLF4J 1.7.x and earlier and <code>log4j-slf4j18-impl</code> should be used with SLF4J 1.8.x and later.
SLF4J-2.0.0 alpha releases are not fully supported.
See <a href="https://issues.apache.org/jira/browse/LOG4J2-2975">LOG4J2-2975</a> and <a href="https://jira.qos.ch/browse/SLF4J-511">SLF4J-511</a>.</p>
</div>
<div class="paragraph">
<p>The Log4j 2.19.0 API, as well as many core components, maintains binary compatibility with previous releases.</p>
</div>
<div class="paragraph">
<p>Log4j 2.19.0 requires a minimum of Java 8 to build and run.
Log4j 2.12.4 is the last release to support Java 7.
Log4j 2.3.2 is the last release to support Java 6.
Java 6 and Java 7 are no longer supported by the Log4j team.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-19-0-added"><a class="anchor" href="#release-notes-2-19-0-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Add implementation of SLF4J2 fluent API. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2975">LOG4J2-2975</a>)</p>
</li>
<li>
<p>Add support for SLF4J2 stack-valued MDC. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3583">LOG4J2-3583</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-19-0-changed"><a class="anchor" href="#release-notes-2-19-0-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Add getExplicitLevel method to LoggerConfig. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3572">LOG4J2-3572</a>)</p>
</li>
<li>
<p>Allow PropertySources to be added. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3588">LOG4J2-3588</a>)</p>
</li>
<li>
<p>Allow Plugins to be injected with the LoggerContext reference. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3589">LOG4J2-3589</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-19-0-fixed"><a class="anchor" href="#release-notes-2-19-0-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Add correct manifest entries for OSGi to log4j-jcl (<a href="https://issues.apache.org/jira/browse/LOG4J2-3545">LOG4J2-3545</a>)</p>
</li>
<li>
<p>Improve support for passwordless keystores. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3548">LOG4J2-3548</a>)</p>
</li>
<li>
<p>SystemPropertyArbiter was assigning the value as the name. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3550">LOG4J2-3550</a>)</p>
</li>
<li>
<p>Make JsonTemplateLayout stack trace truncation operate for each label block. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3556">LOG4J2-3556</a>)</p>
</li>
<li>
<p>Fix recursion between Log4j 1.2 LogManager and Category. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3557">LOG4J2-3557</a>)</p>
</li>
<li>
<p>Fix resolution of properties not starting with <code>log4j2.</code>. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3559">LOG4J2-3559</a>)</p>
</li>
<li>
<p>Logger$PrivateConfig.filter(Level, Marker, String) was allocating empty varargs array. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3560">LOG4J2-3560</a>)</p>
</li>
<li>
<p>Allows a space separated list of style specifiers in the %style pattern for consistency with %highlight. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3561">LOG4J2-3561</a>)</p>
</li>
<li>
<p>Fix NPE in <code>log4j-to-jul</code> in the case the root logger level is null. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3564">LOG4J2-3564</a>)</p>
</li>
<li>
<p>Fix RollingRandomAccessFileAppender with DirectWriteRolloverStrategy can&#8217;t create the first log file of different directory. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3565">LOG4J2-3565</a>)</p>
</li>
<li>
<p>Generate new SSL certs for testing. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3578">LOG4J2-3578</a>)</p>
</li>
<li>
<p>Fix ServiceLoaderUtil behavior in the presence of a SecurityManager. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3579">LOG4J2-3579</a>)</p>
</li>
<li>
<p>Fix regression in Rfc5424Layout default values. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3587">LOG4J2-3587</a>)</p>
</li>
<li>
<p>Harden InstantFormatter against delegate failures. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3614">LOG4J2-3614</a>)</p>
</li>
<li>
<p>Add async support to <code>Log4jServletFilter</code>. (<a href="https://issues.apache.org/jira/browse/LOG4J2-708">LOG4J2-708</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-19-0-removed"><a class="anchor" href="#release-notes-2-19-0-removed"></a>Removed</h3>
<div class="ulist">
<ul>
<li>
<p>Removed build page in favor of a single build instructions file. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3573">LOG4J2-3573</a>)</p>
</li>
<li>
<p>Remove SLF4J 1.8.x binding. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3590">LOG4J2-3590</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-18-0"><a class="anchor" href="#release-notes-2-18-0"></a>2.18.0</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2022-06-28</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This release primarily contains bug fixes and minor enhancements.</p>
</div>
<div class="paragraph">
<p>Due to a break in compatibility in the SLF4J binding, Log4j now ships with two versions of the SLF4J to Log4j adapters.
<code>log4j-slf4j-impl</code> should be used with SLF4J 1.7.x and earlier and <code>log4j-slf4j18-impl</code> should be used with SLF4J 1.8.x and later.
SLF4J-2.0.0 alpha releases are not fully supported.
See <a href="https://issues.apache.org/jira/browse/LOG4J2-2975">LOG4J2-2975</a> and <a href="https://jira.qos.ch/browse/SLF4J-511">SLF4J-511</a>.</p>
</div>
<div class="paragraph">
<p>The Log4j 2.18.0 API, as well as many core components, maintains binary compatibility with previous releases.</p>
</div>
<div class="paragraph">
<p>Log4j 2.18.0 requires a minimum of Java 8 to build and run.
Log4j 2.12.4 is the last release to support Java 7.
Log4j 2.3.2 is the last release to support Java 6.
Java 6 and Java 7 are no longer supported by the Log4j team.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-18-0-added"><a class="anchor" href="#release-notes-2-18-0-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Add support for Jakarta Mail API in the SMTP appender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3362">LOG4J2-3362</a>)</p>
</li>
<li>
<p>Add support for custom Log4j 1.x levels. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3419">LOG4J2-3419</a>)</p>
</li>
<li>
<p>Add support for adding and retrieving appenders in Log4j 1.x bridge. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3440">LOG4J2-3440</a>)</p>
</li>
<li>
<p>Add support for custom LMAX disruptor WaitStrategy configuration. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3472">LOG4J2-3472</a>)</p>
</li>
<li>
<p>Add support for Apache Extras' RollingFileAppender in Log4j 1.x bridge. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3483">LOG4J2-3483</a>)</p>
</li>
<li>
<p>Add MutableThreadContextMapFilter. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3495">LOG4J2-3495</a>)</p>
</li>
<li>
<p>Add support for 24 colors in highlighting (<a href="https://issues.apache.org/jira/browse/LOG4J2-3538">LOG4J2-3538</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-18-0-changed"><a class="anchor" href="#release-notes-2-18-0-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Improves ServiceLoader support on servlet containers. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3427">LOG4J2-3427</a>)</p>
</li>
<li>
<p>Make the default disruptor WaitStrategy used by Async Loggers garbage-free. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3473">LOG4J2-3473</a>)</p>
</li>
<li>
<p>Do not throw UnsupportedOperationException when JUL ApiLogger::setLevel is called. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3476">LOG4J2-3476</a>)</p>
</li>
<li>
<p>Support Spring 2.6.x. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3506">LOG4J2-3506</a>)</p>
</li>
<li>
<p>Move perf tests to log4j-core-its (<a href="https://issues.apache.org/jira/browse/LOG4J2-3516">LOG4J2-3516</a>)</p>
</li>
<li>
<p>Upgrade the Flume Appender to Flume 1.10.0 (<a href="https://issues.apache.org/jira/browse/LOG4J2-3536">LOG4J2-3536</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-18-0-fixed"><a class="anchor" href="#release-notes-2-18-0-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Fix minor typo #792.</p>
</li>
<li>
<p>Improve validation and reporting of configuration errors.</p>
</li>
<li>
<p>Allow enterprise id to be an OID fragment. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1376">LOG4J2-1376</a>)</p>
</li>
<li>
<p>Fix problem with non-uppercase custom levels. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2872">LOG4J2-2872</a>)</p>
</li>
<li>
<p>Avoid ClassCastException in JeroMqManager with custom LoggerContextFactory #791. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3040">LOG4J2-3040</a>)</p>
</li>
<li>
<p>DirectWriteRolloverStrategy should use the current time when creating files. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3339">LOG4J2-3339</a>)</p>
</li>
<li>
<p>Fixes the syslog appender in Log4j 1.x bridge, when used with a custom layout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3359">LOG4J2-3359</a>)</p>
</li>
<li>
<p>log4j-1.2-api 2.17.2 throws NullPointerException while removing appender with name as null. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3359">LOG4J2-3359</a>)</p>
</li>
<li>
<p>Improve JsonTemplateLayout performance. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3393">LOG4J2-3393</a>)</p>
</li>
<li>
<p>Fix resolution of non-Log4j properties. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3413">LOG4J2-3413</a>)</p>
</li>
<li>
<p>Fixes Spring Boot logging system registration in a multi-application environment. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3418">LOG4J2-3418</a>)</p>
</li>
<li>
<p>JAR file containing Log4j configuration isn&#8217;t closed. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3423">LOG4J2-3423</a>)</p>
</li>
<li>
<p>Properties defined in configuration using a value attribute (as opposed to element) are read correctly. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3424">LOG4J2-3424</a>)</p>
</li>
<li>
<p>Syslog appender lacks the SocketOptions setting. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3425">LOG4J2-3425</a>)</p>
</li>
<li>
<p>Log4j 1.2 bridge should not wrap components unnecessarily. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3426">LOG4J2-3426</a>)</p>
</li>
<li>
<p>Update 3rd party dependencies for 2.18.0. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3428">LOG4J2-3428</a>)</p>
</li>
<li>
<p>SizeBasedTriggeringPolicy would fail to rename files properly when integer pattern contained a leading zero. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3432">LOG4J2-3432</a>)</p>
</li>
<li>
<p>Fixes default SslConfiguration, when a custom keystore is used. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3439">LOG4J2-3439</a>)</p>
</li>
<li>
<p>Fixes appender concurrency problems in Log4j 1.x bridge. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3447">LOG4J2-3447</a>)</p>
</li>
<li>
<p>Fix and test for race condition in FileUtils.mkdir(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-3452">LOG4J2-3452</a>)</p>
</li>
<li>
<p>LocalizedMessage logs misleading errors on the console. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3458">LOG4J2-3458</a>)</p>
</li>
<li>
<p>Add missing message parameterization in RegexFilter. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3475">LOG4J2-3475</a>)</p>
</li>
<li>
<p>Add the missing context stack to JsonLayout template. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3477">LOG4J2-3477</a>)</p>
</li>
<li>
<p>HttpWatcher did not pass credentials when polling. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3481">LOG4J2-3481</a>)</p>
</li>
<li>
<p>UrlConnectionFactory.createConnection now accepts an AuthorizationProvider as a parameter. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3482">LOG4J2-3482</a>)</p>
</li>
<li>
<p>The DirectWriteRolloverStrategy was not detecting the correct index to use during startup. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3490">LOG4J2-3490</a>)</p>
</li>
<li>
<p>Async Loggers were including the location information by default. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3491">LOG4J2-3491</a>)</p>
</li>
<li>
<p>ClassArbiter&#8217;s newBuilder method referenced the wrong class. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3493">LOG4J2-3493</a>)</p>
</li>
<li>
<p>Don&#8217;t use Paths.get() to avoid circular file systems. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3527">LOG4J2-3527</a>)</p>
</li>
<li>
<p>Fix parsing error, when XInclude is disabled. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3531">LOG4J2-3531</a>)</p>
</li>
<li>
<p>Fix LevelRangeFilterBuilder to align with log4j1&#8217;s behavior. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3534">LOG4J2-3534</a>)</p>
</li>
<li>
<p>Fixes problem with wrong ANSI escape code for bright colors (<a href="https://issues.apache.org/jira/browse/LOG4J2-3537">LOG4J2-3537</a>)</p>
</li>
<li>
<p>Log4j 1.2 bridge should generate Log4j 2.x messages based on the parameter runtime type.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-17-2"><a class="anchor" href="#release-notes-2-17-2"></a>2.17.2</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2022-02-23</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This release contains the changes noted below:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Over 50 improvements and fixes to the Log4j 1.x support.
Continued testing has shown it is a suitable replacement for Log4j 1.x in most cases.</p>
</li>
<li>
<p>Scripting now requires a system property be specified naming the languages the user wishes to allow.
The scripting engine will not load if the property isn&#8217;t set.</p>
</li>
<li>
<p>By default, the only remote protocol allowed for loading configuration files is HTTPS.
Users can specify a system property to allow others or prevent remote loading entirely.</p>
</li>
<li>
<p>Variable resolution has been modified so that only properties defined as properties in the configuration file can be recursive.
All other Lookups are now non-recursive.
This addresses issues users were having resolving lookups specified in property definitions for use in the <code>RoutingAppender</code> and <code>RollingFileAppender</code> due to restrictions put in place in 2.17.1.</p>
</li>
<li>
<p>Many other fixes and improvements.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Due to a break in compatibility in the SLF4J binding, Log4j now ships with two versions of the SLF4J to Log4j adapters.
<code>log4j-slf4j-impl</code> should be used with SLF4J 1.7.x and earlier and <code>log4j-slf4j18-impl</code> should be used with SLF4J 1.8.x and later.
SLF4J-2.0.0 alpha releases are not fully supported.
See <a href="https://issues.apache.org/jira/browse/LOG4J2-2975">LOG4J2-2975</a> and <a href="https://jira.qos.ch/browse/SLF4J-511">SLF4J-511</a>.</p>
</div>
<div class="paragraph">
<p>The Log4j 2.17.2 API, as well as many core components, maintains binary compatibility with previous releases.</p>
</div>
<div class="paragraph">
<p>Log4j 2.17.2 requires a minimum of Java 8 to build and run.
Log4j 2.12.4 is the last release to support Java 7.
Log4j 2.3.2 is the last release to support Java 6.
Java 6 and Java 7 are no longer supported by the Log4j team.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-17-2-added"><a class="anchor" href="#release-notes-2-17-2-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Add Configurator.setLevel(Logger, Level), setLevel(String, String), and setLevel(Class, Level).</p>
</li>
<li>
<p>Add org.apache.logging.log4j.core.appender.AsyncAppender.getAppenders() to more easily port from org.apache.log4j.AsyncAppender.getAllAppenders().</p>
</li>
<li>
<p>Require <a href="manual/systemproperties.html#log4j2.scriptEnableLanguages" class="xref page"><code>log4j2.scriptEnableLanguages</code></a> to be specified to enable scripting for specific languages. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2486">LOG4J2-2486</a>)</p>
</li>
<li>
<p>Add the log4j-to-jul JDK Logging Bridge (<a href="https://issues.apache.org/jira/browse/LOG4J2-3282">LOG4J2-3282</a>)</p>
</li>
<li>
<p>Limit loading of configuration via a url to https by default. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3297">LOG4J2-3297</a>)</p>
</li>
<li>
<p>Add TB support to FileSize. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3303">LOG4J2-3303</a>)</p>
</li>
<li>
<p>Add shorthand syntax for properties configuration format for specifying a logger level and appender refs. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3341">LOG4J2-3341</a>)</p>
</li>
<li>
<p>Add optional additional fields to NoSQLAppender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3391">LOG4J2-3391</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-17-2-changed"><a class="anchor" href="#release-notes-2-17-2-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Bump Jackson from 2.12.4 to 2.13.1.</p>
</li>
<li>
<p>Bump Mockito from 3.11.2 to 4.2.0.</p>
</li>
<li>
<p>Bump Woodstox 6.2.6 to 6.2.8.</p>
</li>
<li>
<p>Bump awaitility from 4.0.3 to 4.1.1 #663.</p>
</li>
<li>
<p>Bump de.flapdoodle.embed:de.flapdoodle.embed.mongo from 3.0.0 to 3.4.1. Update tests for binary incompatibilities in APIs.</p>
</li>
<li>
<p>Bump maven-compiler-plugin from 3.8.1 to 3.9.0.</p>
</li>
<li>
<p>Bump mongodb3.version from 3.12.4 to 3.12.10 #605.</p>
</li>
<li>
<p>Bump net.javacrumbs.json-unit:json-unit from 2.27.0 to 2.28.0.</p>
</li>
<li>
<p>Bump org.apache.activemq:activemq-broker from 5.16.3 to 5.16.4.</p>
</li>
<li>
<p>Bump org.apache.maven.plugins:maven-javadoc-plugin from 3.3.1 to 3.3.2.</p>
</li>
<li>
<p>Bump org.assertj:assertj-core from 3.20.2 to 3.22.0.</p>
</li>
<li>
<p>Bump org.codehaus.groovy:groovy-* from 3.0.8 to 3.0.9.</p>
</li>
<li>
<p>Bump org.eclipse.persistence:org.eclipse.persistence.jpa from 2.7.9 to 2.7.10.</p>
</li>
<li>
<p>Bump org.fusesource.jansi:jansi from 2.3.4 to 2.4.0.</p>
</li>
<li>
<p>Bump org.jacoco:jacoco-maven-plugin from 0.8.6 to 0.8.7.</p>
</li>
<li>
<p>Bump org.junit.jupiter:junit-* from 5.7.2 to 5.8.2.</p>
</li>
<li>
<p>Bump org.junit-pioneer:junit-pioneer from 1.5.0 to 1.6.1.</p>
</li>
<li>
<p>Bump org.mongodb:bson from 4.2.2 to 4.5.0.</p>
</li>
<li>
<p>Bump org.mongodb:mongodb-driver-sync from 4.2.2 to 4.5.0.</p>
</li>
<li>
<p>Bump org.springframework:spring-* from 5.3.13 to 5.3.15.</p>
</li>
<li>
<p>Bump org.xmlunit:xmlunit-* from 2.8.3 to 2.8.4.</p>
</li>
<li>
<p>Replace usages of "compile" with "implementation" in the Gradle docs. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3215">LOG4J2-3215</a>)</p>
</li>
<li>
<p>Change modifier of method org.apache.logging.log4j.core.tools.Generate#generate to public (was package private) to facilitate automated code generation. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3267">LOG4J2-3267</a>)</p>
</li>
<li>
<p>log4j-jpl formats message parameters correctly using MessageFormat. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3345">LOG4J2-3345</a>)</p>
</li>
<li>
<p>Bump Tomcat from 8.5.20 to 10.0.14 in log4j-appserver along with some dependency clean-up. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3368">LOG4J2-3368</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-17-2-fixed"><a class="anchor" href="#release-notes-2-17-2-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Fix DTD error: Add missing ELEMENT for Marker.</p>
</li>
<li>
<p>Fix log4j-jakarta-web service file #723.</p>
</li>
<li>
<p>JndiManager reverts to 2.17.0 behavior: Read the system property for each call.</p>
</li>
<li>
<p>Log4j 1.2 bridge PropertiesConfiguration.buildAppender not adding filters to custom appender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3281">LOG4J2-3281</a>)</p>
</li>
<li>
<p>Flag LogManager as initialized if the LoggerFactory is provided as a property. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3304">LOG4J2-3304</a>)</p>
</li>
<li>
<p>OptionConverter could cause a StackOverflowError. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3306">LOG4J2-3306</a>)</p>
</li>
<li>
<p>Log4j 1.2 bridge should ignore case in properties file keys. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3316">LOG4J2-3316</a>)</p>
</li>
<li>
<p>Fix RoutingAppender backward compatibility and disallow recursive evaluation of lookup results outside of configuration properties. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3317">LOG4J2-3317</a>)</p>
</li>
<li>
<p>Log4j 1.2 bridge class org.apache.log4j.spi.LoggingEvent missing constructors and public instance variable. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3326">LOG4J2-3326</a>)</p>
</li>
<li>
<p>Log4j 1.2 bridge fixes parsing filters in properties configuration file #680. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3326">LOG4J2-3326</a>)</p>
</li>
<li>
<p>Log4j 1.2 bridge missing OptionConverter.instantiateByKey(Properties, String, Class, Object). (<a href="https://issues.apache.org/jira/browse/LOG4J2-3326">LOG4J2-3326</a>)</p>
</li>
<li>
<p>Log4j 1.2 bridge does not support system properties in log4j.xml. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3328">LOG4J2-3328</a>)</p>
</li>
<li>
<p>Configurator.setLevel not fetching the correct LoggerContext. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3330">LOG4J2-3330</a>)</p>
</li>
<li>
<p>Fix ThreadContextDataInjector initialization deadlock (<a href="https://issues.apache.org/jira/browse/LOG4J2-3333">LOG4J2-3333</a>)</p>
</li>
<li>
<p>Fix substitutions when programmatic configuration is used (<a href="https://issues.apache.org/jira/browse/LOG4J2-3358">LOG4J2-3358</a>)</p>
</li>
<li>
<p>AppenderLoggingException logging any exception to a MongoDB Appender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3392">LOG4J2-3392</a>)</p>
</li>
<li>
<p>Possible NullPointerException in MongoDb4DocumentObject, MongoDbDocumentObject, DefaultNoSqlObject. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3392">LOG4J2-3392</a>)</p>
</li>
<li>
<p>Fix DefaultConfiguration leak in PatternLayout (<a href="https://issues.apache.org/jira/browse/LOG4J2-3404">LOG4J2-3404</a>)</p>
</li>
<li>
<p>Document that the Spring Boot Lookup requires the log4j-spring-boot dependency. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3405">LOG4J2-3405</a>)</p>
</li>
<li>
<p>Log4j 1.2 bridge Check for non-existent appender when parsing properties #761. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3407">LOG4J2-3407</a>)</p>
</li>
<li>
<p>Log4j 1.2 bridge supports global threshold #764. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3407">LOG4J2-3407</a>)</p>
</li>
<li>
<p>Log4j 1.2 bridge throws a ClassCastException when logging a Map with non-String keys. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3410">LOG4J2-3410</a>)</p>
</li>
<li>
<p>Log4j 1.2 bridge adds org.apache.log4j.Hierarchy.</p>
</li>
<li>
<p>Log4j 1.2 bridge adds org.apache.log4j.component.helpers.Constants.</p>
</li>
<li>
<p>Log4j 1.2 bridge adds org.apache.log4j.helpers.Loader.</p>
</li>
<li>
<p>Log4j 1.2 bridge adds org.apache.log4j.helpers.LogLog.</p>
</li>
<li>
<p>Log4j 1.2 bridge adds org.apache.log4j.spi.DefaultRepositorySelector.</p>
</li>
<li>
<p>Log4j 1.2 bridge adds org.apache.log4j.spi.NOPLoggerRepository and NOPLogger.</p>
</li>
<li>
<p>Log4j 1.2 bridge adds org.apache.log4j.spi.RootLogger.</p>
</li>
<li>
<p>Log4j 1.2 bridge class Category is missing some protected instance variables.</p>
</li>
<li>
<p>Log4j 1.2 bridge class Category should implement AppenderAttachable.</p>
</li>
<li>
<p>Log4j 1.2 bridge class ConsoleAppender should extend WriterAppender and provide better compatibility with custom appenders.</p>
</li>
<li>
<p>Log4j 1.2 bridge class LogManager default constructor should be public.</p>
</li>
<li>
<p>Log4j 1.2 bridge class OptionConverter is missing selectAndConfigure() methods.</p>
</li>
<li>
<p>Log4j 1.2 bridge class PatternLayout is missing constants DEFAULT_CONVERSION_PATTERN and TTCC_CONVERSION_PATTERN.</p>
</li>
<li>
<p>Log4j 1.2 bridge class PropertyConfigurator should implement Configurator.</p>
</li>
<li>
<p>Log4j 1.2 bridge creates a SocketAppender instead of a SyslogAppender.</p>
</li>
<li>
<p>Log4j 1.2 bridge implements LogManager.getCurrentLoggers() fully.</p>
</li>
<li>
<p>Log4j 1.2 bridge implements most of DOMConfigurator.</p>
</li>
<li>
<p>Log4j 1.2 bridge interface Configurator doConfigure() methods should use LoggerRepository, not LoggerContext.</p>
</li>
<li>
<p>Log4j 1.2 bridge interface org.apache.log4j.spi.RendererSupport was in the wrong package and incomplete.</p>
</li>
<li>
<p>Log4j 1.2 bridge interfaces missing from package org.apache.log4j.spi: ThrowableRenderer, ThrowableRendererSupport, TriggeringEventEvaluator.</p>
</li>
<li>
<p>Log4j 1.2 bridge issues with filters #753.</p>
</li>
<li>
<p>Log4j 1.2 bridge method Category.exists(String) should be static.</p>
</li>
<li>
<p>Log4j 1.2 bridge method NDC.inherit(Stack) should not use generics to provide source compatibility.</p>
</li>
<li>
<p>Log4j 1.2 bridge methods Category.getChainedPriority() and getEffectiveLevel() should not be final.</p>
</li>
<li>
<p>Log4j 1.2 bridge methods missing in org.apache.log4j.Category: getDefaultHierarchy(), getHierarchy(), getLoggerRepository().</p>
</li>
<li>
<p>Log4j 1.2 bridge missed</p>
</li>
<li>
<p>Log4j 1.2 bridge missed org.apache.log4j.pattern.FormattingInfo.</p>
</li>
<li>
<p>Log4j 1.2 bridge missed org.apache.log4j.pattern.NameAbbreviator.</p>
</li>
<li>
<p>Log4j 1.2 bridge missing DefaultThrowableRenderer.</p>
</li>
<li>
<p>Log4j 1.2 bridge missing FormattingInfo.</p>
</li>
<li>
<p>Log4j 1.2 bridge missing PatternConverter.</p>
</li>
<li>
<p>Log4j 1.2 bridge missing PatternParser.</p>
</li>
<li>
<p>Log4j 1.2 bridge missing UtilLoggingLevel.</p>
</li>
<li>
<p>Log4j 1.2 bridge missing class org.apache.log4j.or.RendererMap.</p>
</li>
<li>
<p>Log4j 1.2 bridge missing some LocationInfo constructors.</p>
</li>
<li>
<p>Log4j 1.2 bridge missing some ThrowableInformation constructors.</p>
</li>
<li>
<p>Log4j 1.2 bridge now logs a warning instead of throwing an NullPointerException when building a Syslog appender with a missing "SyslogHost" param.</p>
</li>
<li>
<p>Log4j 1.2 bridge should allow property and XML attributes to start with either an upper-case or lower-case letter.</p>
</li>
<li>
<p>Log4j 1.2 bridge supports the SocketAppender.</p>
</li>
<li>
<p>Log4j 1.2 bridge throws ClassCastException when using SimpleLayout and others #708.</p>
</li>
<li>
<p>Log4j 1.2 bridge uses some incorrect default property values in some appenders.</p>
</li>
<li>
<p>Log4j 1.2 bridge uses the wrong default values for a TTCCLayout #709.</p>
</li>
<li>
<p>Log4j 1.2 bridge uses the wrong file pattern for rolling file appenders #710.</p>
</li>
<li>
<p>Trim whitespace before parsing a String into an Integer.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-17-1"><a class="anchor" href="#release-notes-2-17-1"></a>2.17.1</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2021-12-27</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This release addresses CVE-2021-44832 and contains other minor fixes.</p>
</div>
<div class="paragraph">
<p>Due to a break in compatibility in the SLF4J binding, Log4j now ships with two versions of the SLF4J to Log4j adapters.
<code>log4j-slf4j-impl</code> should be used with SLF4J 1.7.x and earlier and <code>log4j-slf4j18-impl</code> should be used with SLF4J 1.8.x and later.
SLF4J-2.0.0 alpha releases are not fully supported.
See <a href="https://issues.apache.org/jira/browse/LOG4J2-2975">LOG4J2-2975</a> and <a href="https://jira.qos.ch/browse/SLF4J-511">SLF4J-511</a>.</p>
</div>
<div class="paragraph">
<p>The Log4j 2.17.1 API, as well as many core components, maintains binary compatibility with previous releases.</p>
</div>
<div class="paragraph">
<p>Log4j 2.17.1 requires a minimum of Java 8 to build and run.
Log4j 2.12.2 is the last release to support Java 7.
Java 7 is no longer supported by the Log4j team.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-17-1-fixed"><a class="anchor" href="#release-notes-2-17-1-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Fix NPE when input is null in StrSubstitutor.replace(String, Properties).</p>
</li>
<li>
<p>Correct SpringLookup package name in Interpolator. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3204">LOG4J2-3204</a>)</p>
</li>
<li>
<p>Reduce ignored package scope of KafkaAppender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3256">LOG4J2-3256</a>)</p>
</li>
<li>
<p>Fix MapLookup to lookup MapMessage before DefaultMap (<a href="https://issues.apache.org/jira/browse/LOG4J2-3264">LOG4J2-3264</a>)</p>
</li>
<li>
<p>Lookups with no prefix only read values from the configuration properties as expected. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3270">LOG4J2-3270</a>)</p>
</li>
<li>
<p>Buffered I/O checked had inverted logic in RollingFileAppenderBuilder. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3274">LOG4J2-3274</a>)</p>
</li>
<li>
<p>log4j-to-slf4j takes the provided MessageFactory into account (<a href="https://issues.apache.org/jira/browse/LOG4J2-3284">LOG4J2-3284</a>)</p>
</li>
<li>
<p>log4j-to-slf4j no longer re-interpolates formatted message contents. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3289">LOG4J2-3289</a>)</p>
</li>
<li>
<p>Remove unused method. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3290">LOG4J2-3290</a>)</p>
</li>
<li>
<p>ExtendedLoggerWrapper.logMessage no longer double-logs when location is requested. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3292">LOG4J2-3292</a>)</p>
</li>
<li>
<p><a href="manual/appenders/database.html#JdbcAppender" class="xref page">JDBC Appender</a> now uses <code>JndiManager</code> to access JNDI resources. JNDI is only enabled when the system property <a href="manual/systemproperties.html#log4j2.enableJndiJdbc" class="xref page"><code>log4j2.enableJndiJdbc</code></a> is set to <code>true</code>. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3293">LOG4J2-3293</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-17-0"><a class="anchor" href="#release-notes-2-17-0"></a>2.17.0</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2021-12-17</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The major changes contained in this release include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Address CVE-2021-45105 by disabling recursive evaluation of Lookups during log event processing.
Recursive evaluation is still allowed while generating the configuration.</p>
</li>
<li>
<p>The <code>JndiLookup</code>, <code>JndiContextSelector</code>, and <code>JMSAppender</code> now require individual system properties to be enabled.</p>
</li>
<li>
<p>Remove LDAP and LDAPS as supported protocols from JNDI.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The single <code>log4j2.enableJndi</code> property introduced in Log4j 2.16.0 has been replaced with three individual properties:
<a href="manual/systemproperties.html#log4j2.enableJndiContextSelector" class="xref page"><code>log4j2.enableJndiContextSelector</code></a>,
<a href="manual/systemproperties.html#log4j2.enableJndiJms" class="xref page"><code>log4j2.enableJndiJms</code></a>,
and
 <a href="manual/systemproperties.html#log4j2.enableJndiLookup" class="xref page"><code>log4j2.enableJndiLookup</code></a>.</p>
</div>
<div class="paragraph">
<p>The Log4j 2.17.0 API, as well as many core components, maintains binary compatibility with previous releases.</p>
</div>
<div class="paragraph">
<p>Log4j 2.17.0 requires a minimum of Java 8 to build and run.
Log4j 2.12.2 is the last release to support Java 7.
Java 7 is no longer supported by the Log4j team.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-17-0-fixed"><a class="anchor" href="#release-notes-2-17-0-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Fix string substitution recursion. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3230">LOG4J2-3230</a>)</p>
</li>
<li>
<p>Log4j 1.2 bridge API hard codes the Syslog protocol to TCP. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3237">LOG4J2-3237</a>)</p>
</li>
<li>
<p>Do not declare log4j-api-java9 and log4j-core-java9 as dependencies as it causes problems with the Maven enforcer plugin. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3241">LOG4J2-3241</a>)</p>
</li>
<li>
<p>Limit JNDI to the java protocol only. JNDI will remain disabled by default. Rename JNDI enablement property from <a href="manual/systemproperties.html#properties-jndi" class="xref page"><code>log4j2.enableJndi</code></a> to <a href="manual/systemproperties.html#log4j2.enableJndiLookup" class="xref page"><code>log4j2.enableJndiLookup</code></a>, <a href="manual/systemproperties.html#log4j2.enableJndiJms" class="xref page"><code>log4j2.enableJndiJms</code></a>, and <a href="manual/systemproperties.html#log4j2.enableJndiContextSelector" class="xref page"><code>log4j2.enableJndiContextSelector</code></a>. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3242">LOG4J2-3242</a>)</p>
</li>
<li>
<p>PropertiesConfiguration.parseAppenderFilters NPE when parsing properties file filters. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3247">LOG4J2-3247</a>)</p>
</li>
<li>
<p>Log4j 1.2 bridge for Syslog Appender defaults to port 512 instead of 514. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3249">LOG4J2-3249</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-16-0"><a class="anchor" href="#release-notes-2-16-0"></a>2.16.0</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2021-12-13</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This release contains one change which is noted below.</p>
</div>
<div class="paragraph">
<p>Due to a break in compatibility in the SLF4J binding, Log4j now ships with two versions of the SLF4J to Log4j adapters.
<code>log4j-slf4j-impl</code> should be used with SLF4J 1.7.x and earlier and <code>log4j-slf4j18-impl</code> should be used with SLF4J 1.8.x and later.
SLF4J-2.0.0 alpha releases are not fully supported.
See <a href="https://issues.apache.org/jira/browse/LOG4J2-2975">LOG4J2-2975</a> and <a href="https://jira.qos.ch/browse/SLF4J-511">SLF4J-511</a>.</p>
</div>
<div class="paragraph">
<p>Some of the changes in Log4j 2.16.0 include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Removed Message Lookups.
This is a hardening related to changes made to prevent CVE-2021-44228.
While this change is recommended, it is NOT required to fix CVE-2021-44228.</p>
</li>
<li>
<p>While release 2.15.0 removed the ability to resolve Lookups and log messages and addressed issues with how JNDI is accessed, the Log4j team feels that having JNDI enabled by default introduces an undue risk for our users.
Starting in version 2.16.0, JNDI functionality is disabled by default and can be re-enabled via the <code>log4j2.enableJndi</code> system property.
Use of JNDI in an unprotected context is a large security risk and should be treated as such in both this library and all other Java libraries using JNDI.</p>
</li>
<li>
<p>Prior to version 2.15.0, Log4j would automatically resolve Lookups contained in the message or its parameters in the Pattern Layout.
This behavior is no longer the default and must be enabled by specifying <code>%msg{lookup}</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Log4j 2.16.0 API, as well as many core components, maintains binary compatibility with previous releases.</p>
</div>
<div class="paragraph">
<p>Log4j 2.16.0 requires a minimum of Java 8 to build and run.
Log4j 2.12.1 is the last release to support Java 7.
Java 7 is no longer supported by the Log4j team.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-16-0-fixed"><a class="anchor" href="#release-notes-2-16-0-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Disable JNDI by default. Require <a href="manual/systemproperties.html#properties-jndi" class="xref page"><code>log4j2.enableJndi</code></a> to be set to true to allow JNDI. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3208">LOG4J2-3208</a>)</p>
</li>
<li>
<p>Completely remove support for Message Lookups. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3211">LOG4J2-3211</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-15-0"><a class="anchor" href="#release-notes-2-15-0"></a>2.15.0</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2021-12-06</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This release contains a number of bug fixes and minor enhancements which are listed below.</p>
</div>
<div class="paragraph">
<p>The Log4j team has been made aware of a security vulnerability, CVE-2021-44228, that has been addressed in Log4j 2.15.0.</p>
</div>
<div class="paragraph">
<p>Log4j&#8217;s JNDI support has not restricted what names could be resolved.
Some protocols are unsafe or can allow remote code execution.
Log4j now limits the protocols by default to only java, ldap, and ldaps and limits the ldap protocols to only accessing Java primitive objects by default served on the local host.</p>
</div>
<div class="paragraph">
<p>One vector that allowed exposure to this vulnerability was Log4j&#8217;s allowance of Lookups to appear in log messages.
As of Log4j 2.15.0 this feature is now disabled by default.
While an option has been provided to enable Lookups in this fashion, users are strongly discouraged from enabling it.</p>
</div>
<div class="paragraph">
<p>Users who cannot upgrade to 2.15.0 can mitigate the exposure by:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Users of Log4j 2.10 or greater may add <code>-Dlog4j.formatMsgNoLookups=true</code> as a command line option or add <code>log4j.formatMsgNoLookups=true</code> to a <code>log4j2.component.properties</code> file on the classpath to prevent lookups in log event messages.</p>
</li>
<li>
<p>Users since Log4j 2.7 may specify <code>%{nolookups}</code> in the <code>PatternLayout</code> configuration to prevent lookups in log event messages.</p>
</li>
<li>
<p>Remove the <code>JndiLookup</code> and <code>JndiManager</code> classes from the <code>log4j-core</code> JAR.
Removal of the <code>JndiManager</code> will cause the <code>JndiContextSelector</code> and <code>JMSAppender</code> to no longer function.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Due to a break in compatibility in the SLF4J binding, Log4j now ships with two versions of the SLF4J to Log4j adapters.
<code>log4j-slf4j-impl</code> should be used with SLF4J 1.7.x and earlier and <code>log4j-slf4j18-impl</code> should be used with SLF4J 1.8.x and later.
SLF4J-2.0.0 alpha releases are not fully supported.
See <a href="https://issues.apache.org/jira/browse/LOG4J2-2975">LOG4J2-2975</a> and <a href="https://jira.qos.ch/browse/SLF4J-511">SLF4J-511</a>.</p>
</div>
<div class="paragraph">
<p>Some of the new features in Log4j 2.15.0 include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Support for Arbiters, which are conditionals that can enable sections of the logging configuration for inclusion or exclusion.
In particular, <code>SpringProfile</code>, <code>SystemProperty</code>, Script, and Class Arbiters have been provided that use the Spring profile, System property, the result of a script, or the presence of a class respectively to determine whether a section of configuration should be included.</p>
</li>
<li>
<p>Support for Jakarta EE 9.
This is functionally equivalent to Log4j&#8217;s <code>log4j-web</code> module but uses the Jakarta project.</p>
</li>
<li>
<p>Various performance improvements.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Key changes to note:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Prior to this release Log4j would automatically resolve Lookups contained in the message or its parameters in the Pattern Layout.
This behavior is no longer the default and must be enabled by specifying <code>%msg{lookup}</code>.</p>
</li>
<li>
<p>The JNDI Lookup has been restricted to only support the java, ldap, and ldaps protocols by default.
LDAP also no longer supports classes that implement the <code>Referenceable</code> interface and restricts the Serializable classes to the Java primitive classes by default and requires an allow list to be specified to access remote LDAP servers.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Log4j 2.15.0 API, as well as many core components, maintains binary compatibility with previous releases.</p>
</div>
<div class="paragraph">
<p>Log4j 2.15.0 requires a minimum of Java 8 to build and run.
Log4j 2.12.1 is the last release to support Java 7.
Java 7 is no longer supported by the Log4j team.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-15-0-added"><a class="anchor" href="#release-notes-2-15-0-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Add support for US-style date patterns and micro/nano seconds to FixedDateTime. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2885">LOG4J2-2885</a>)</p>
</li>
<li>
<p>Add BasicAsyncLoggerContextSelector equivalent to AsyncLoggerContextSelector for applications with a single LoggerContext. This selector avoids classloader lookup overhead incurred by the existing AsyncLoggerContextSelector. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2940">LOG4J2-2940</a>)</p>
</li>
<li>
<p>Context selectors are aware of their dependence upon the callers ClassLoader, allowing basic context selectors to avoid the unnecessary overhead of walking the stack to determine the caller&#8217;s ClassLoader. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2940">LOG4J2-2940</a>)</p>
</li>
<li>
<p>Add support for Jakarta EE 9 (Tomcat 10 / Jetty 11) (<a href="https://issues.apache.org/jira/browse/LOG4J2-2978">LOG4J2-2978</a>)</p>
</li>
<li>
<p>Add plugin support to JsonTemplateLayout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3004">LOG4J2-3004</a>)</p>
</li>
<li>
<p>Allow a PatternSelector to be specified on GelfLayout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3041">LOG4J2-3041</a>)</p>
</li>
<li>
<p>Add RepeatPatternConverter. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3044">LOG4J2-3044</a>)</p>
</li>
<li>
<p>Add improved MapMessage support to GelfLayout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3048">LOG4J2-3048</a>)</p>
</li>
<li>
<p>Allow MapMessage and ThreadContext attributes to be prefixed. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3049">LOG4J2-3049</a>)</p>
</li>
<li>
<p>Allow AdditionalFields to be ignored if their value is null or a zero-length String. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3050">LOG4J2-3050</a>)</p>
</li>
<li>
<p>Add CaseConverterResolver to JsonTemplateLayout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3051">LOG4J2-3051</a>)</p>
</li>
<li>
<p>Refactor MD5 usage for sharing sensitive information. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3056">LOG4J2-3056</a>)</p>
</li>
<li>
<p>Add Arbiters and SpringProfile plugin. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3064">LOG4J2-3064</a>)</p>
</li>
<li>
<p>Add CounterResolver to JsonTemplateLayout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3067">LOG4J2-3067</a>)</p>
</li>
<li>
<p>Add replacement parameter to ReadOnlyStringMapResolver. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3074">LOG4J2-3074</a>)</p>
</li>
<li>
<p>Add JsonTemplateLayout for Google Cloud Platform structured logging layout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3116">LOG4J2-3116</a>)</p>
</li>
<li>
<p>Add missing slf4j-api singleton accessors to log4j-slf4j-impl (1.7) StaticMarkerBinder and StaticMDCBinder. This doesn&#8217;t impact behavior or correctness, but avoids throwing and catching NoSuchMethodErrors when slf4j is initialized and avoids linkage linting warnings. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3133">LOG4J2-3133</a>)</p>
</li>
<li>
<p>Avoid ThreadLocal overhead in RandomAccessFileAppender, RollingRandomAccessFileManager, and MemoryMappedFileManager due to the unused setEndOfBatch and isEndOfBatch methods. The methods on LogEvent are preferred. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3141">LOG4J2-3141</a>)</p>
</li>
<li>
<p>Prefer string.getBytes(Charset) over string.getBytes(String) based on performance improvements in modern Java releases. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3144">LOG4J2-3144</a>)</p>
</li>
<li>
<p>Make CRLF/HTML encoding run in O(n) worst-case time, rather than O(n^2). (<a href="https://issues.apache.org/jira/browse/LOG4J2-3170">LOG4J2-3170</a>)</p>
</li>
<li>
<p>Improve PatternLayout performance by reducing unnecessary indirection and branching. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3171">LOG4J2-3171</a>)</p>
</li>
<li>
<p>Improve NameAbbreviator worst-case performance. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3189">LOG4J2-3189</a>)</p>
</li>
<li>
<p>Allow fractional attributes for size attribute of SizeBasedTriggeringPolicy. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3194">LOG4J2-3194</a>)</p>
</li>
<li>
<p>Pattern layout no longer enables lookups within message text by default for cleaner API boundaries and reduced formatting overhead. The old <code>log4j2.formatMsgNoLookups</code> which enabled this behavior has been removed as well as the <code>nolookups</code> message pattern converter option. The old behavior can be enabled on a per-pattern basis using <code>%m{lookups}</code>. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3198">LOG4J2-3198</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-15-0-changed"><a class="anchor" href="#release-notes-2-15-0-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Handle interrupted exceptions that occur during rollover. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1798">LOG4J2-1798</a>)</p>
</li>
<li>
<p>Provide support for overriding the Tomcat Log class in Tomcat 8.5+. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2025">LOG4J2-2025</a>)</p>
</li>
<li>
<p>Minor documentation corrections regarding log levels. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2540">LOG4J2-2540</a>)</p>
</li>
<li>
<p>Minor documentation corrections in the configuration section. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2541">LOG4J2-2541</a>)</p>
</li>
<li>
<p>Correct documentation for SyslogAppender when using TLS. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2553">LOG4J2-2553</a>)</p>
</li>
<li>
<p>Log4j 1.x properties were not being substituted. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2951">LOG4J2-2951</a>)</p>
</li>
<li>
<p>Fix Log Event Level vs Logger Config Level table. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3166">LOG4J2-3166</a>)</p>
</li>
<li>
<p>Update Spring framework to 5.3.13, Spring Boot to 2.5.7, and Spring Cloud to 2020.0.4.</p>
</li>
<li>
<p>Updated dependencies. - com.fasterxml.jackson.core:jackson-annotations &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;.. 2.12.2 &#8594; 2.12.4 - com.fasterxml.jackson.core:jackson-core &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203; 2.12.2 &#8594; 2.12.4 - com.fasterxml.jackson.core:jackson-databind &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;.. 2.12.2 &#8594; 2.12.4 - com.fasterxml.jackson.dataformat:jackson-dataformat-xml &#8230;&#8203;&#8230;&#8203;.. 2.12.2 &#8594; 2.12.4 - com.fasterxml.jackson.dataformat:jackson-dataformat-yaml &#8230;&#8203;&#8230;&#8203;. 2.12.2 &#8594; 2.12.4 - com.fasterxml.jackson.module:jackson-module-jaxb-annotations &#8230;&#8203; 2.12.2 &#8594; 2.12.4 - com.fasterxml.woodstox:woodstox-core &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203; 6.2.4 &#8594; 6.2.6 - commons-io:commons-io &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203; 2.8.0 &#8594; 2.11.0 - net.javacrumbs.json-unit:json-unit &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;.. 2.24.0 &#8594; 2.25.0 - net.javacrumbs.json-unit:json-unit &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;.. 2.25.0 &#8594; 2.27.0 - org.apache.activemq:activemq-broker &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;. 5.16.1 &#8594; 5.16.2 - org.apache.activemq:activemq-broker &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;. 5.16.2 &#8594; 5.16.3 - org.apache.commons:commons-compress &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;. 1.20 &#8594; 1.21 - org.apache.commons:commons-csv &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203; 1.8 &#8594; 1.9.0 - org.apache.commons:commons-dbcp2 &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;. 2.8.0 &#8594; 2.9.0 - org.apache.commons:commons-pool2 &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;. 2.9.0 &#8594; 2.11.1 - org.apache.maven.plugins:maven-failsafe-plugin &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;.. 2.22.2 &#8594; 3.0.0-M5 - org.apache.maven.plugins:maven-surefire-plugin &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;.. 2.22.2 &#8594; 3.0.0-M5 - org.apache.rat:apache-rat-plugin &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;. 0.12 &#8594; 0.13 - org.assertj:assertj-core &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203; 3.19.0 &#8594; 3.20.2 - org.codehaus.groovy:groovy-dateutil &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;. 3.0.7 &#8594; 3.0.8 - org.codehaus.groovy:groovy-jsr223 &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203; 3.0.7 &#8594; 3.0.8 - org.codehaus.plexus:plexus-utils &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;. 3.3.0 &#8594; 3.4.0 - org.eclipse.persistence:javax.persistence &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;. 2.1.1 &#8594; 2.2.1 - org.eclipse.persistence:org.eclipse.persistence.jpa &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203; 2.6.5 &#8594; 2.6.9 - org.eclipse.persistence:org.eclipse.persistence.jpa &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203; 2.7.8 &#8594; 2.7.9 - org.fusesource.jansi &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;. 2.3.2 &#8594; 2.3.4 - org.fusesource.jansi:jansi &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;. 2.3.1 &#8594; 2.3.2 - org.hsqldb:hsqldb &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;. 2.5.1 &#8594; 2.5.2 - org.junit.jupiter:junit-jupiter-engine &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;. 5.7.1 &#8594; 5.7.2 - org.junit.jupiter:junit-jupiter-migrationsupport &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203; 5.7.1 &#8594; 5.7.2 - org.junit.jupiter:junit-jupiter-params &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;. 5.7.1 &#8594; 5.7.2 - org.junit.vintage:junit-vintage-engine &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;. 5.7.1 &#8594; 5.7.2 - org.liquibase:liquibase-core &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;.. 3.5.3 &#8594; 3.5.5 - org.mockito:mockito-core &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203; 3.8.0 &#8594; 3.11.2 - org.mockito:mockito-junit-jupiter &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203; 3.8.0 &#8594; 3.11.2 - org.springframework:spring-aop &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203; 5.3.3 &#8594; 5.3.9 - org.springframework:spring-beans &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;. 5.3.3 &#8594; 5.3.9 - org.springframework:spring-context &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;.. 5.3.3 &#8594; 5.3.9 - org.springframework:spring-context-support &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203; 5.3.3 &#8594; 5.3.9 - org.springframework:spring-core &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;.. 5.3.3 &#8594; 5.3.9 - org.springframework:spring-expression &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;.. 5.3.3 &#8594; 5.3.9 - org.springframework:spring-oxm &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203; 5.3.3 &#8594; 5.3.9 - org.springframework:spring-test &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;.. 5.3.3 &#8594; 5.3.9 - org.springframework:spring-web &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203; 5.3.3 &#8594; 5.3.9 - org.springframework:spring-webmvc &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203; 5.3.3 &#8594; 5.3.9 - org.tukaani:xz &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;. 1.8 &#8594; 1.9</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-15-0-fixed"><a class="anchor" href="#release-notes-2-15-0-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>LoggerContext skips resolving localhost when hostName is configured. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2808">LOG4J2-2808</a>)</p>
</li>
<li>
<p>Handle Disruptor event translation exceptions. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2816">LOG4J2-2816</a>)</p>
</li>
<li>
<p>SocketAppender should propagate failures when reconnection fails. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2829">LOG4J2-2829</a>)</p>
</li>
<li>
<p>Slf4j implementations walk the stack at most once rather than twice to determine the caller&#8217;s class loader. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2940">LOG4J2-2940</a>)</p>
</li>
<li>
<p>Fixed a deadlock between the AsyncLoggerContextSelector and java.util.logging.LogManager by updating Disruptor to 3.4.4. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2965">LOG4J2-2965</a>)</p>
</li>
<li>
<p>BasicContextSelector hasContext and shutdown take the default context into account (<a href="https://issues.apache.org/jira/browse/LOG4J2-3054">LOG4J2-3054</a>)</p>
</li>
<li>
<p>Fix thread-safety issues in DefaultErrorHandler. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3060">LOG4J2-3060</a>)</p>
</li>
<li>
<p>Ensure EncodingPatternConverter#handlesThrowable is implemented. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3070">LOG4J2-3070</a>)</p>
</li>
<li>
<p>Fix formatting of nanoseconds in JsonTemplateLayout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3075">LOG4J2-3075</a>)</p>
</li>
<li>
<p>Use SimpleMessage in Log4j 1 Category whenever possible. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3080">LOG4J2-3080</a>)</p>
</li>
<li>
<p>log4j-slf4j-impl and log4j-slf4j18-impl correctly detect the calling class using both LoggerFactory.getLogger methods as well as LoggerFactory.getILoggerFactory().getLogger. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3083">LOG4J2-3083</a>)</p>
</li>
<li>
<p>Fix race in JsonTemplateLayout where a timestamp could end up unquoted. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3087">LOG4J2-3087</a>)</p>
</li>
<li>
<p>Fix sporadic JsonTemplateLayoutNullEventDelimiterTest failures on Windows. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3089">LOG4J2-3089</a>)</p>
</li>
<li>
<p>Fix JsonWriter memory leaks due to retained excessive buffer growth. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3092">LOG4J2-3092</a>)</p>
</li>
<li>
<p>Category.setLevel should accept null value. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3095">LOG4J2-3095</a>)</p>
</li>
<li>
<p>Fix a regression in 2.14.1 which allowed the AsyncAppender background thread to keep the JVM alive because the daemon flag was not set. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3102">LOG4J2-3102</a>)</p>
</li>
<li>
<p>Fix race condition which can result in ConcurrentModificationException on context.stop. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3103">LOG4J2-3103</a>)</p>
</li>
<li>
<p>SmtpManager.createManagerName ignores port. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3107">LOG4J2-3107</a>)</p>
</li>
<li>
<p>Fix the number of {}-placeholders in the string literal argument does not match the number of other arguments to the logging call. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3110">LOG4J2-3110</a>)</p>
</li>
<li>
<p>Enable immediate flush on RollingFileAppender when buffered i/o is not enabled. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3114">LOG4J2-3114</a>)</p>
</li>
<li>
<p>log4j2 config modified at run-time may trigger incomplete MBean re-initialization due to InstanceAlreadyExistsException. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3121">LOG4J2-3121</a>)</p>
</li>
<li>
<p>log4j-1.2-api implements LogEventAdapter.getTimestamp() based on the original event timestamp instead of returning zero. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3142">LOG4J2-3142</a>)</p>
</li>
<li>
<p>RandomAccessFile appender uses the correct default buffer size of 256 kB rather than the default appender buffer size of 8 kB. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3150">LOG4J2-3150</a>)</p>
</li>
<li>
<p>DatePatternConverter performance is not impacted by microsecond-precision clocks when such precision isn&#8217;t required. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3153">LOG4J2-3153</a>)</p>
</li>
<li>
<p>Fixed an unlikely race condition in Log4jMarker.getParents() volatile access. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3159">LOG4J2-3159</a>)</p>
</li>
<li>
<p>Fix documentation on how to toggle <a href="manual/status-logger.html#log4j2.debug" class="xref page"><code>log4j2.debug</code></a> system property. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3160">LOG4J2-3160</a>)</p>
</li>
<li>
<p>Fix bug when file names contain regex characters. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3168">LOG4J2-3168</a>)</p>
</li>
<li>
<p>Buffer immutable log events in the SmtpManager. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3172">LOG4J2-3172</a>)</p>
</li>
<li>
<p>Wrong subject on mail when it depends on the LogEvent (<a href="https://issues.apache.org/jira/browse/LOG4J2-3174">LOG4J2-3174</a>)</p>
</li>
<li>
<p>Avoid KafkaManager override when topics differ. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3175">LOG4J2-3175</a>)</p>
</li>
<li>
<p>Avoid using MutableInstant of the event as a cache key in JsonTemplateLayout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3183">LOG4J2-3183</a>)</p>
</li>
<li>
<p>Fix thread-safety issues in DefaultErrorHandler. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3185">LOG4J2-3185</a>)</p>
</li>
<li>
<p>Limit the protocols JNDI can use by default. Limit the servers and classes that can be accessed via LDAP. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3201">LOG4J2-3201</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-14-1"><a class="anchor" href="#release-notes-2-14-1"></a>2.14.1</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2021-03-06</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This release contains a number of bug fixes and minor enhancements which are
listed below.</p>
</div>
<div class="paragraph">
<p>Due to a break in compatibility in the SLF4J binding, Log4j now ships with two versions of the SLF4J to Log4j adapters.
<code>log4j-slf4j-impl</code> should be used with SLF4J 1.7.x and earlier and <code>log4j-slf4j18-impl</code> should be used with SLF4J 1.8.x and later.</p>
</div>
<div class="paragraph">
<p>The Log4j 2.14.1 API, as well as many core components, maintains binary compatibility with previous releases.</p>
</div>
<div class="paragraph">
<p>Log4j 2.14.1 requires a minimum of Java 8 to build and run.
Log4j 2.12.1 is the last release to support Java 7.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-14-1-added"><a class="anchor" href="#release-notes-2-14-1-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Enrich "map" resolver by unifying its backend with "mdc" resolver. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2962">LOG4J2-2962</a>)</p>
</li>
<li>
<p>Support stack trace truncation in JsonTemplateLayout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2993">LOG4J2-2993</a>)</p>
</li>
<li>
<p>Replace JsonTemplateLayout resolver configurations table in docs with sections. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2999">LOG4J2-2999</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-14-1-changed"><a class="anchor" href="#release-notes-2-14-1-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Allow reconfiguration when Log4j 1 configuration files are updated. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2893">LOG4J2-2893</a>)</p>
</li>
<li>
<p>Add Rollover Listener to aid in unit test validation. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2923">LOG4J2-2923</a>)</p>
</li>
<li>
<p>Replace outdated PatternLayout.createLayout() calls in docs with createDefaultLayout(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-2977">LOG4J2-2977</a>)</p>
</li>
<li>
<p>Update JSON Unit 2.21.0 &#8594; 2.22.0.</p>
</li>
<li>
<p>Update JaCoCo 0.8.3 &#8594; 0.8.6.</p>
</li>
<li>
<p>Update Mockito 3.6.0 &#8594; 3.7.0.</p>
</li>
<li>
<p>Update MongoDB 3 plugin: org.mongodb:mongodb-driver 3.12.6 &#8594; 3.12.7.</p>
</li>
<li>
<p>Update MongoDB 4 plugin: org.mongodb:* 4.1.0 &#8594; 4.1.1.</p>
</li>
<li>
<p>Update Spring dependencies to 5.3.2, Spring Boot to 2.3.6, and Spring Cloud to Hoxton.SR9</p>
</li>
<li>
<p>Update Woodstox 5.0.3 &#8594; 6.2.3 to match Jackson 2.12.1.</p>
</li>
<li>
<p>Update XML Unit 2.8.0 &#8594; 2.8.2.</p>
</li>
<li>
<p>Update com.fasterxml.jackson.<strong>:</strong> 2.11.2 - 2.11.3.</p>
</li>
<li>
<p>Update commons-codec:commons-codec 1.14 &#8594; 1.15.</p>
</li>
<li>
<p>Update commons-io:commons-io 2.7 &#8594; 2.8.0.</p>
</li>
<li>
<p>Update de.flapdoodle.embed:de.flapdoodle.embed.mongo 2.2.0 &#8594; 3.0.0.</p>
</li>
<li>
<p>Update junit:junit 4.13 &#8594; 4.13.1.</p>
</li>
<li>
<p>Update mongodb4.version 4.1.1 &#8594; 4.2.0.</p>
</li>
<li>
<p>Update net.javacrumbs.json-unit:json-unit 1.31.1 &#8594; 2.22.0.</p>
</li>
<li>
<p>Update net.javacrumbs.json-unit:json-unit 2.22.0 &#8594; 2.23.0.</p>
</li>
<li>
<p>Update org.apache.activemq:* 5.16.0 &#8594; 5.16.1.</p>
</li>
<li>
<p>Update org.apache.commons:commons-dbcp2 2.4.0 &#8594; 2.8.0.</p>
</li>
<li>
<p>Update org.apache.commons:commons-lang3 3.10 &#8594; 3.11.</p>
</li>
<li>
<p>Update org.apache.commons:commons-pool2 2.8.1 &#8594; 2.9.0.</p>
</li>
<li>
<p>Update org.assertj:assertj-core 3.14.0 &#8594; 3.18.1.</p>
</li>
<li>
<p>Update org.assertj:assertj-core 3.18.1 &#8594; 3.19.0.</p>
</li>
<li>
<p>Update org.awaitility:awaitility 4.0.2 &#8594; 4.0.3.</p>
</li>
<li>
<p>Update org.codehaus.groovy:* 3.0.5 &#8594; 3.0.6.</p>
</li>
<li>
<p>Update org.codehaus.plexus:plexus-utils 3.2.0 &#8594; 3.3.0.</p>
</li>
<li>
<p>Update org.eclipse.tycho:org.eclipse.osgi 3.12.1.v20170821-1548 &#8594; 3.13.0.v20180226-1711.</p>
</li>
<li>
<p>Update org.fusesource.jansi:jansi 1.17.1 &#8594; 2.0.1.</p>
</li>
<li>
<p>Update org.fusesource.jansi:jansi 1.18 &#8594; 2.2.0.</p>
</li>
<li>
<p>Update org.fusesource.jansi:jansi 1.18 &#8594; 2.3.1.</p>
</li>
<li>
<p>Update org.mockito:mockito-* 3.7.0 &#8594; 3.7.7.</p>
</li>
<li>
<p>Update org.springframework:* 5.2.8.RELEASE &#8594; 5.3.1.</p>
</li>
<li>
<p>Update org.springframework:* 5.3.2 &#8594; 5.3.3.</p>
</li>
<li>
<p>Update org.xmlunit:* 2.7.0 &#8594; 2.8.0.</p>
</li>
<li>
<p>- com.fasterxml.jackson.core:jackson-annotations &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;.. 2.12.1 &#8594; 2.12.2 - com.fasterxml.jackson.core:jackson-core &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203; 2.12.1 &#8594; 2.12.2 - com.fasterxml.jackson.core:jackson-databind &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;.. 2.12.1 &#8594; 2.12.2 - com.fasterxml.jackson.dataformat:jackson-dataformat-xml &#8230;&#8203;&#8230;&#8203;.. 2.12.1 &#8594; 2.12.2 - com.fasterxml.jackson.dataformat:jackson-dataformat-yaml &#8230;&#8203;&#8230;&#8203;. 2.12.1 &#8594; 2.12.2 - com.fasterxml.jackson.module:jackson-module-jaxb-annotations &#8230;&#8203; 2.12.1 &#8594; 2.12.2 - org.apache.commons:commons-lang3 &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;. 3.11 &#8594; 3.12.0 - org.junit.jupiter:junit-jupiter-engine &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;. 5.7.0 &#8594; 5.7.1 - org.junit.jupiter:junit-jupiter-migrationsupport &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203; 5.7.0 &#8594; 5.7.1 - org.junit.jupiter:junit-jupiter-params &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;. 5.7.0 &#8594; 5.7.1 - org.junit.vintage:junit-vintage-engine &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;. 5.7.0 &#8594; 5.7.1 - org.mockito:mockito-core &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203; 3.7.7 &#8594; 3.8.0 - org.mockito:mockito-junit-jupiter &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203; 3.7.7 &#8594; 3.8.0 - org.mongodb:bson &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;.. 4.2.0 &#8594; 4.2.2 - org.mongodb:mongodb-driver-sync &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;.. 4.2.0 &#8594; 4.2.2</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-14-1-fixed"><a class="anchor" href="#release-notes-2-14-1-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Allow auto-shutdown of log4j in log4j-web to be turned off and provide a ServletContextListener "Log4jShutdownOnContextDestroyedListener" to stop log4j. Register the listener at the top of web.xml to ensure the shutdown happens last. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1606">LOG4J2-1606</a>)</p>
</li>
<li>
<p>Allow auto-shutdown of log4j in log4j-web to be turned off and provide a ServletContextListener "Log4jShutdownOnContextDestroyedListener" to stop log4j. Register the listener at the top of web.xml to ensure the shutdown happens last. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2624">LOG4J2-2624</a>)</p>
</li>
<li>
<p>Avoid redundant Kafka producer instantiation causing thread leaks. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2916">LOG4J2-2916</a>)</p>
</li>
<li>
<p>Document that LogBuilder default methods do nothing. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2947">LOG4J2-2947</a>)</p>
</li>
<li>
<p>Replace HashSet with IdentityHashMap in ParameterFormatter to detect cycles. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2948">LOG4J2-2948</a>)</p>
</li>
<li>
<p>Fix reading of JsonTemplateLayout event additional fields from config. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2961">LOG4J2-2961</a>)</p>
</li>
<li>
<p>Merge packages from several Configurations in Composite Configuration. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2964">LOG4J2-2964</a>)</p>
</li>
<li>
<p>Fix JsonTemplateLayout index based parameter resolution when messages contain too few parameters. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2967">LOG4J2-2967</a>)</p>
</li>
<li>
<p>Refactor AsyncAppender and AppenderControl for handling of Throwables. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2972">LOG4J2-2972</a>)</p>
</li>
<li>
<p>Rename EventTemplateAdditionalField#type (conflicting with properties file parser) to "format". (<a href="https://issues.apache.org/jira/browse/LOG4J2-2973">LOG4J2-2973</a>)</p>
</li>
<li>
<p>Log4j would fail to initialize in Java 8 with log4j-spring-boot. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2974">LOG4J2-2974</a>)</p>
</li>
<li>
<p>JdbcAppender composes an incorrect INSERT statement without a ColumnMapping element. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2976">LOG4J2-2976</a>)</p>
</li>
<li>
<p>OnStartupTriggeringPolicy would fail to cause the file to roll over with DirectWriteTriggeringPolicy unless minSize was set to 0. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2981">LOG4J2-2981</a>)</p>
</li>
<li>
<p>Add eventTemplateRootObjectKey parameter to JsonTemplateLayout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2985">LOG4J2-2985</a>)</p>
</li>
<li>
<p>Reduce garbage by using putAll when copying the ThreadContext for SLF4J. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2990">LOG4J2-2990</a>)</p>
</li>
<li>
<p>Fix truncation of excessive strings ending with a high surrogate in JsonWriter. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2998">LOG4J2-2998</a>)</p>
</li>
<li>
<p>Directly create a thread instead of using the common ForkJoin pool when initializing ThreadContextDataInjector" (<a href="https://issues.apache.org/jira/browse/LOG4J2-3006">LOG4J2-3006</a>)</p>
</li>
<li>
<p>Log4j1ConfigurationConverter on Windows produces " " at end of every line. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3014">LOG4J2-3014</a>)</p>
</li>
<li>
<p>OutputStreamManager.flushBuffer always resets the buffer, previously the buffer was not reset after an exception. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3028">LOG4J2-3028</a>)</p>
</li>
<li>
<p>Add log method with no parameters - i.e. it has an empty message. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3033">LOG4J2-3033</a>)</p>
</li>
<li>
<p>Attempting to call getExtendedStackTraceAsString() after deserializing JSON LogEvent results in a NPE. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3131">LOG4J2-3131</a>)</p>
</li>
<li>
<p>NoGcLayout allocates empty bytes arrays for its header and footer. (<a href="https://issues.apache.org/jira/browse/LOG4J2-3131">LOG4J2-3131</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-14-0"><a class="anchor" href="#release-notes-2-14-0"></a>2.14.0</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2020-11-06</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This release contains a new Layout, <code>JsonTemplateLayout</code>, that is intended to ultimately replace <code>JsonLayout</code>.
As its name suggests it uses a template to define the elements to include in the JSON.
This Layout was contributed by the author of the <a href="https://github.com/vy/log4j2-logstash-layout">log4j2-logstash-layout</a>, and who is now a member of the Log4j community.</p>
</div>
<div class="paragraph">
<p>Log4j 2.14.0 adds support for MongoDB 4 and removes support for MongoDB 2.</p>
</div>
<div class="paragraph">
<p>This release also contains a number of bug fixes which are listed below.</p>
</div>
<div class="paragraph">
<p>Due to a break in compatibility in the SLF4J binding, Log4j now ships with two versions of the SLF4J to Log4j adapters.
<code>log4j-slf4j-impl</code> should be used with SLF4J 1.7.x and earlier and <code>log4j-slf4j18-impl</code> should be used with SLF4J 1.8.x and later.</p>
</div>
<div class="paragraph">
<p>The Log4j 2.14.0 API, as well as many core components, maintains binary compatibility with previous releases.</p>
</div>
<div class="paragraph">
<p>Log4j 2.14.0 requires a minimum of Java 8 to build and run.
Log4j 2.12.1 is the last release to support Java 7.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-14-0-added"><a class="anchor" href="#release-notes-2-14-0-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Create module log4j-mongodb4 to use new major version 4 MongoDB driver. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2848">LOG4J2-2848</a>)</p>
</li>
<li>
<p>More flexible configuration of the Disruptor WaitStrategy. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2858">LOG4J2-2858</a>)</p>
</li>
<li>
<p>Add JsonTemplateLayout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2957">LOG4J2-2957</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-14-0-changed"><a class="anchor" href="#release-notes-2-14-0-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Add date pattern support for HTML layout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2889">LOG4J2-2889</a>)</p>
</li>
<li>
<p>Allow GelfLayout to produce newline delimited events. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2892">LOG4J2-2892</a>)</p>
</li>
<li>
<p>Update MongoDB tests to require Java 8 unconditionally now that Log4j requires Java 8.</p>
</li>
<li>
<p>Update com.fasterxml.jackson.* 2.10.2 &#8594; 2.11.0.</p>
</li>
<li>
<p>Update jackson 2.11.0 &#8594; 2.11.2.</p>
</li>
<li>
<p>Update mongodb3.version from 3.12.1 to 3.12.6.</p>
</li>
<li>
<p>Update org.apache.activemq:activemq-broker 5.15.11 &#8594; 5.16.0.</p>
</li>
<li>
<p>Update org.apache.commons:commons-compress 1.19 &#8594; 1.20.</p>
</li>
<li>
<p>Update org.apache.commons:commons-csv 1.7 &#8594; 1.8.</p>
</li>
<li>
<p>Update org.apache.commons:commons-lang3 3.9 &#8594; 3.10.</p>
</li>
<li>
<p>Update org.codehaus.groovy:* 2.5.6 &#8594; 3.0.5.</p>
</li>
<li>
<p>Update tests commons-io:commons-io 2.6 &#8594; 2.7.</p>
</li>
<li>
<p>Update tests hsqldb 2.5.0 &#8594; 2.5.1.</p>
</li>
<li>
<p>Update tests junit:junit 4.12 &#8594; 4.13.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-14-0-fixed"><a class="anchor" href="#release-notes-2-14-0-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Javadoc link in ThreadContext description was incorrect. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2822">LOG4J2-2822</a>)</p>
</li>
<li>
<p>Correct class name printed in error message in RollingFileAppender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2832">LOG4J2-2832</a>)</p>
</li>
<li>
<p>Disruptor and JUL no longer recursively start the AsyncLoggerDisruptor resulting in an extra disruptor background thread constantly waiting. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2837">LOG4J2-2837</a>)</p>
</li>
<li>
<p>Null pointer exception when no network interfaces are available. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2844">LOG4J2-2844</a>)</p>
</li>
<li>
<p>Fixed typos where mergeFactory should be mergeStrategy. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2859">LOG4J2-2859</a>)</p>
</li>
<li>
<p>Obtain ContextDataProviders asynchronously. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2867">LOG4J2-2867</a>)</p>
</li>
<li>
<p>RingBufferLogEventTranslator uses a static ContextDataInjector instead of initializing a new object on each thread. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2867">LOG4J2-2867</a>)</p>
</li>
<li>
<p>Rollover was failing to create directories when using a DirectFileRolloverStrategy. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2875">LOG4J2-2875</a>)</p>
</li>
<li>
<p>Determine the container id to obtain container and image information. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2877">LOG4J2-2877</a>)</p>
</li>
<li>
<p>Create StackWalker benchmark. Revert back to StackWalker.walk based on benchmark results. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2880">LOG4J2-2880</a>)</p>
</li>
<li>
<p>Support java.util.logging filters when using that API. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2882">LOG4J2-2882</a>)</p>
</li>
<li>
<p>When using DirectFileRolloverStrategy the file pattern was not being recalculated on size based rollover after a time based rollover had occurred. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2883">LOG4J2-2883</a>)</p>
</li>
<li>
<p>Fix spelling error in log message. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2894">LOG4J2-2894</a>)</p>
</li>
<li>
<p>Fix potential deadlock in asynchronous logging by avoiding blocking for queue space on Log4jThreads (<a href="https://issues.apache.org/jira/browse/LOG4J2-2895">LOG4J2-2895</a>)</p>
</li>
<li>
<p>Avoid initializing volatile fields with default values. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2898">LOG4J2-2898</a>)</p>
</li>
<li>
<p>Fix log4j-1.2-api LogEventWrapper threadId and priority accessors when called multiple times. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2899">LOG4J2-2899</a>)</p>
</li>
<li>
<p>Missing configuration files should be ignored when creating a composite configuration. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2901">LOG4J2-2901</a>)</p>
</li>
<li>
<p>Fix UnsupportedOperationException when initializing the Log4j2CloudConfigLoggingSystem. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2906">LOG4J2-2906</a>)</p>
</li>
<li>
<p>Move Spring Lookup and Spring PropertySource to its own module. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2908">LOG4J2-2908</a>)</p>
</li>
<li>
<p>Log4j-web should now store the servlet context as a map entry instead of in the single external context field. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2910">LOG4J2-2910</a>)</p>
</li>
<li>
<p>Log4j2EventListener in spring.cloud.config.client listens for wrong event. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2911">LOG4J2-2911</a>)</p>
</li>
<li>
<p>Call ReliabilityStrategy&#8217;s beforeStopAppenders() method before stopping AsyncAppender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2919">LOG4J2-2919</a>)</p>
</li>
<li>
<p>Fix broken link in FAQ. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2925">LOG4J2-2925</a>)</p>
</li>
<li>
<p>Fix NPE in MDCContextMap on 'contains' and 'isEmpty' invocations. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2939">LOG4J2-2939</a>)</p>
</li>
<li>
<p>Prevent premature garbage collection of shutdown hooks in DefaultShutdownCallbackRegistry. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2954">LOG4J2-2954</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-14-0-removed"><a class="anchor" href="#release-notes-2-14-0-removed"></a>Removed</h3>
<div class="ulist">
<ul>
<li>
<p>Drop log4j-mongodb2 module. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2851">LOG4J2-2851</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-13-3"><a class="anchor" href="#release-notes-2-13-3"></a>2.13.3</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2020-05-10</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This release contains a fix for bug <a href="https://issues.apache.org/jira/browse/LOG4J2-2838">LOG4J2-2838</a>.</p>
</div>
<div class="paragraph">
<p>Due to a break in compatibility in the SLF4J binding, Log4j now ships with two versions of the SLF4J to Log4j adapters.
<code>log4j-slf4j-impl</code> should be used with SLF4J 1.7.x and earlier and <code>log4j-slf4j18-impl</code> should be used with SLF4J 1.8.x and later.</p>
</div>
<div class="paragraph">
<p>Note that the XML, JSON and YAML formats changed in the 2.11.0 release: they no longer have the <code>timeMillis</code> attribute and instead have an <code>Instant</code> element with <code>epochSecond</code> and <code>nanoOfSecond</code> attributes.</p>
</div>
<div class="paragraph">
<p>The Log4j 2.13.3 API, as well as many core components, maintains binary compatibility with previous releases.</p>
</div>
<div class="paragraph">
<p>Log4j 2.13.3 requires a minimum of Java 8 to build and run.
Log4j 2.3 was the last release that supported Java 6 and Log4j 2.11.2 is the last release to support Java 7.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-13-3-fixed"><a class="anchor" href="#release-notes-2-13-3-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Fix NullPointerException in ThreadContextDataInjector. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2838">LOG4J2-2838</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-13-2"><a class="anchor" href="#release-notes-2-13-2"></a>2.13.2</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2020-04-23</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This release contains bugfixes and minor enhancements.</p>
</div>
<div class="paragraph">
<p>Due to a break in compatibility in the SLF4J binding, Log4j now ships with two versions of the SLF4J to Log4j adapters.
<code>log4j-slf4j-impl</code> should be used with SLF4J 1.7.x and earlier and <code>log4j-slf4j18-impl</code> should be used with SLF4J 1.8.x and later.</p>
</div>
<div class="paragraph">
<p>Note that the XML, JSON and YAML formats changed in the 2.11.0 release: they no longer have the <code>timeMillis</code> attribute and instead have an <code>Instant</code> element with <code>epochSecond</code> and <code>nanoOfSecond</code> attributes.</p>
</div>
<div class="paragraph">
<p>The Log4j 2.13.2 API, as well as many core components, maintains binary compatibility with previous releases.</p>
</div>
<div class="paragraph">
<p>Log4j 2.13.2 requires a minimum of Java 8 to build and run.
Log4j 2.3 was the last release that supported Java 6 and Log4j 2.11.2 is the last release to support Java 7.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-13-2-added"><a class="anchor" href="#release-notes-2-13-2-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Provide a Log4j implementation of System.Logger. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1360">LOG4J2-1360</a>)</p>
</li>
<li>
<p>Added EventLookup to retrieve fields from the log event. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2807">LOG4J2-2807</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-13-2-changed"><a class="anchor" href="#release-notes-2-13-2-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Allow the file extension in the file pattern to be modified during reconfiguration. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2457">LOG4J2-2457</a>)</p>
</li>
<li>
<p>Allow servlet context path to be retrieved without "/". (<a href="https://issues.apache.org/jira/browse/LOG4J2-2520">LOG4J2-2520</a>)</p>
</li>
<li>
<p>Add ContextDataProviders as an alternative to having to implement a ContextDataInjector. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2779">LOG4J2-2779</a>)</p>
</li>
<li>
<p>[JDBC] Throw a AppenderLoggingException instead of an NPE in the JDBC database manager. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2812">LOG4J2-2812</a>)</p>
</li>
<li>
<p>Allow Spring Boot applications to use composite configurations. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2815">LOG4J2-2815</a>)</p>
</li>
<li>
<p>Allow Spring Lookup to return default and active profiles. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2818">LOG4J2-2818</a>)</p>
</li>
<li>
<p>Add support for specifying an SSL configuration for SmtpAppender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2819">LOG4J2-2819</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-13-2-fixed"><a class="anchor" href="#release-notes-2-13-2-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Add option to restore printing timeMillis in the JsonLayout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2588">LOG4J2-2588</a>)</p>
</li>
<li>
<p>Fix Exceptions when whitespace is in the file path and Java security manager is used. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2761">LOG4J2-2761</a>)</p>
</li>
<li>
<p>Initialize pattern processor before triggering policy during reconfiguration. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2766">LOG4J2-2766</a>)</p>
</li>
<li>
<p>Conditionally allocate PluginEntry during PluginCache loading. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2790">LOG4J2-2790</a>)</p>
</li>
<li>
<p>Correct JsonLayout timestamp sorting issue. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2791">LOG4J2-2791</a>)</p>
</li>
<li>
<p>Allow trailing and leading spaces in log level. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2793">LOG4J2-2793</a>)</p>
</li>
<li>
<p>Make YamlLayoutTest more resilient to environmental differences. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2794">LOG4J2-2794</a>)</p>
</li>
<li>
<p>TimeFilter did not handle daylight saving time transitions and did not support a range over 2 days. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2805">LOG4J2-2805</a>)</p>
</li>
<li>
<p>Avoid NullPointerException when StackWalker returns null. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2809">LOG4J2-2809</a>)</p>
</li>
<li>
<p>Add information about using a url in log4j.configurationFile. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2810">LOG4J2-2810</a>)</p>
</li>
<li>
<p>Add missing includeLocation parameter when creating AsyncLogger. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2811">LOG4J2-2811</a>)</p>
</li>
<li>
<p>serializeToBytes was checking wrong variable for null. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2813">LOG4J2-2813</a>)</p>
</li>
<li>
<p>Fix Javadoc for ScriptPatternSelector. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2814">LOG4J2-2814</a>)</p>
</li>
<li>
<p>Allow the file size action to parse the value without being sensitive to the current locale. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2817">LOG4J2-2817</a>)</p>
</li>
<li>
<p>Implement requiresLocation in GelfLayout to reflect whether location information is used in the message Pattern. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2824">LOG4J2-2824</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-13-1"><a class="anchor" href="#release-notes-2-13-1"></a>2.13.1</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2020-02-25</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This release contains bugfixes and minor enhancements.</p>
</div>
<div class="paragraph">
<p>Due to a break in compatibility in the SLF4J binding, Log4j now ships with two versions of the SLF4J to Log4j adapters.
<code>log4j-slf4j-impl</code> should be used with SLF4J 1.7.x and earlier and <code>log4j-slf4j18-impl</code> should be used with SLF4J 1.8.x and later.</p>
</div>
<div class="paragraph">
<p>Note that the XML, JSON and YAML formats changed in the 2.11.0 release: they no longer have the <code>timeMillis</code> attribute and instead have an <code>Instant</code> element with <code>epochSecond</code> and <code>nanoOfSecond</code> attributes.</p>
</div>
<div class="paragraph">
<p>The Log4j 2.13.1 API, as well as many core components, maintains binary compatibility with previous releases.</p>
</div>
<div class="paragraph">
<p>Log4j 2.13.1 requires a minimum of Java 8 to build and run.
Log4j 2.3 was the last release that supported Java 6 and Log4j 2.11.2 is the last release to support Java 7.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-13-1-added"><a class="anchor" href="#release-notes-2-13-1-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Implement ISO8601_PERIOD_MICROS fixed date format matching ISO8601_PERIOD with support for microsecond precision. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2748">LOG4J2-2748</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-13-1-changed"><a class="anchor" href="#release-notes-2-13-1-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Update log4j-slf4j18-impl slf4j version to 1.8.0-beta4 from 1.8.0-alpha2. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2745">LOG4J2-2745</a>)</p>
</li>
<li>
<p>Update dependencies. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2763">LOG4J2-2763</a>)</p>
</li>
<li>
<p>Add a retry count attribute to the KafkaAppender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2777">LOG4J2-2777</a>)</p>
</li>
<li>
<p>Use LinkedBlockingQueue instead of synchronized collection in StatusConfiguration. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2782">LOG4J2-2782</a>)</p>
</li>
<li>
<p>Conditionally perform status logging calculations in PluginRegistry. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2789">LOG4J2-2789</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-13-1-fixed"><a class="anchor" href="#release-notes-2-13-1-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Rollover fails when file matches pattern but index is too large. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2039">LOG4J2-2039</a>)</p>
</li>
<li>
<p>Allow Lookup keys with leading dashes by using a slash as an escape character. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2211">LOG4J2-2211</a>)</p>
</li>
<li>
<p>Fix lock contention in the classloader using new versions of slf4j without EventData on slf4j logger creation. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2415">LOG4J2-2415</a>)</p>
</li>
<li>
<p>CronExpression.getBeforeTime() would sometimes return incorrect result. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2575">LOG4J2-2575</a>)</p>
</li>
<li>
<p>GraalVM does not allow use of MethodHandles. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2649">LOG4J2-2649</a>)</p>
</li>
<li>
<p>JSON output wrong when using additional fields. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2652">LOG4J2-2652</a>)</p>
</li>
<li>
<p>PluginProcessor should use Messager instead of System.out. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2676">LOG4J2-2676</a>)</p>
</li>
<li>
<p>Rollover handles parallel file deletion gracefully. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2677">LOG4J2-2677</a>)</p>
</li>
<li>
<p>MapMessage.getFormattedMessage() would incorrectly format objects. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2703">LOG4J2-2703</a>)</p>
</li>
<li>
<p>Slow initialization on Windows due to accessing network interfaces. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2717">LOG4J2-2717</a>)</p>
</li>
<li>
<p>PluginCache output is reproducible allowing the annotation processor to produce deterministic results. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2735">LOG4J2-2735</a>)</p>
</li>
<li>
<p>Fix erroneous log4j-jul recursive logger detection resulting in some no-op JUL loggers and 'WARN Recursive call to getLogger' being reported by the status logger. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2739">LOG4J2-2739</a>)</p>
</li>
<li>
<p>Remove unnecessary EventLogger references from log4j-slf4j18-impl due to removal from slf4j. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2744">LOG4J2-2744</a>)</p>
</li>
<li>
<p>ClassLoaderContextSelector was not locating the LoggerContext during shutdown. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2746">LOG4J2-2746</a>)</p>
</li>
<li>
<p>Fix a memory leak using fully asynchronous logging when the queue is full using the 'discard' asynchronous queue full strategy. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2747">LOG4J2-2747</a>)</p>
</li>
<li>
<p>Fix StackLocator.getCallerClass performance in cases where Reflection.getCallerClass is not accessible. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2751">LOG4J2-2751</a>)</p>
</li>
<li>
<p>MutableLogEvent and RingBufferLogEvent avoid StringBuffer and parameter array allocation unless reusable messages are used. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2752">LOG4J2-2752</a>)</p>
</li>
<li>
<p>LoaderUtil.getClassLoaders may discover additional loaders and no longer erroneously returns a result with a null element in some environments. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2754">LOG4J2-2754</a>)</p>
</li>
<li>
<p>Prevent LoggerContext from being garbage collected while being created. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2756">LOG4J2-2756</a>)</p>
</li>
<li>
<p>NullPointerException when using a custom DirectFileRolloverStrategy without a file name. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2758">LOG4J2-2758</a>)</p>
</li>
<li>
<p>RollingFileAppender was not rolling on startup if createOnDemand was set to true. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2759">LOG4J2-2759</a>)</p>
</li>
<li>
<p>Always write header on a new OutputStream. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2760">LOG4J2-2760</a>)</p>
</li>
<li>
<p>[JDBC] MS-SQL Server JDBC driver throws SQLServerException when inserting a null value for a VARBINARY column. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2762">LOG4J2-2762</a>)</p>
</li>
<li>
<p>Warn if pattern is missing on Routes element. Use default route. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2767">LOG4J2-2767</a>)</p>
</li>
<li>
<p>Add multi-parameter overloads to LogBuilder. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2768">LOG4J2-2768</a>)</p>
</li>
<li>
<p>Do not log an error if Files.move does not work. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2769">LOG4J2-2769</a>)</p>
</li>
<li>
<p>Fixed NullPointerException after reconfiguring via JMX. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2770">LOG4J2-2770</a>)</p>
</li>
<li>
<p>NullPointerException after reconfiguring via JMX. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2770">LOG4J2-2770</a>)</p>
</li>
<li>
<p>An error message in RollingFileAppender uses a placeholder for the name but does not specify the name argument in the logging call (<a href="https://issues.apache.org/jira/browse/LOG4J2-2776">LOG4J2-2776</a>)</p>
</li>
<li>
<p>ServletContainerInitializer was obtaining the StatusLogger too soon. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2781">LOG4J2-2781</a>)</p>
</li>
<li>
<p>Counter stuck at 10 and overwriting files when leading zeros used in the file pattern count. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2784">LOG4J2-2784</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-13-0"><a class="anchor" href="#release-notes-2-13-0"></a>2.13.0</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2019-12-11</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This release contains bugfixes and minor enhancements.
Some of the new features in this release are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Log4j 2 now requires Java 8 or higher to build and run.</p>
</li>
<li>
<p>Experimental support for Log4j 1 configuration files.
See Log4j 2 Compatiblity with Log4j 1.</p>
</li>
<li>
<p>The Logger API has been enhanced to support a builder pattern.
This can dramatically improve the overhead of capturing location information.
See Log Builder.</p>
</li>
<li>
<p>Better integration with Spring Boot by providing access to Spring variables in Log4j 2 configuration files and allowing Log4j 2 system properties to be defined in the Spring configuration.
See Logging in the Cloud.</p>
</li>
<li>
<p>Support for accessing Kubernetes information via a Log4j 2 Lookup.</p>
</li>
<li>
<p>The Gelf Layout now allows the message to be formatted using a <code>PatternLayout</code> pattern.
Logging in the Cloud provides an example of this, as well as the use of the Spring and Kubernetes Lookups.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Due to a break in compatibility in the SLF4J binding, Log4j now ships with two versions of the SLF4J to Log4j adapters.
<code>log4j-slf4j-impl</code> should be used with SLF4J 1.7.x and earlier and <code>log4j-slf4j18-impl</code> should be used with SLF4J 1.8.x and later.</p>
</div>
<div class="paragraph">
<p>Note that the XML, JSON and YAML formats changed in the 2.11.0 release: they no longer have the <code>timeMillis</code> attribute and instead have an <code>Instant</code> element with <code>epochSecond</code> and <code>nanoOfSecond</code> attributes.</p>
</div>
<div class="paragraph">
<p>The Log4j 2.13.0 API, as well as many core components, maintains binary compatibility with previous releases.</p>
</div>
<div class="paragraph">
<p>Log4j 2.13.0 requires a minimum of Java 8 to build and run.
Log4j 2.3 was the last release that supported Java 6 and Log4j 2.11.2 is the last release to support Java 7.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-13-0-added"><a class="anchor" href="#release-notes-2-13-0-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Add builder pattern to Logger interface. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2639">LOG4J2-2639</a>)</p>
</li>
<li>
<p>Allow Spring Boot application properties to be accessed in the Log4j 2 configuration. Add lower and upper case Lookups. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2710">LOG4J2-2710</a>)</p>
</li>
<li>
<p>Add the ability to lookup Kubernetes attributes in the Log4j configuration. Allow Log4j properties to be retrieved from the Spring environment if it is available. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2716">LOG4J2-2716</a>)</p>
</li>
<li>
<p>Add a Level Pattern Selector. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2731">LOG4J2-2731</a>)</p>
</li>
<li>
<p>Add ThreadContext.putIfNotNull method. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2732">LOG4J2-2732</a>)</p>
</li>
<li>
<p>Add experimental support for Log4j 1 configuration files. (<a href="https://issues.apache.org/jira/browse/LOG4J2-63">LOG4J2-63</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-13-0-changed"><a class="anchor" href="#release-notes-2-13-0-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Update Jackson to 2.9.10. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2701">LOG4J2-2701</a>)</p>
</li>
<li>
<p>Allow message portion of GELF layout to be formatted using a PatternLayout. Allow ThreadContext attributes to be explicitly included or excluded in the GelfLayout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2709">LOG4J2-2709</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-13-0-fixed"><a class="anchor" href="#release-notes-2-13-0-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Prevent recursive calls to java.util.LogManager.getLogger(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-2058">LOG4J2-2058</a>)</p>
</li>
<li>
<p>Wrong java version check in ThreadNameCachingStrategy. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2635">LOG4J2-2635</a>)</p>
</li>
<li>
<p>Validation blocks definition of script in properties configuration. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2647">LOG4J2-2647</a>)</p>
</li>
<li>
<p>Add automatic module names where missing. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2672">LOG4J2-2672</a>)</p>
</li>
<li>
<p>OutputStreamAppender.Builder ignores setFilter(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-2673">LOG4J2-2673</a>)</p>
</li>
<li>
<p>Use a less confusing name for the CompositeConfiguration source. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2674">LOG4J2-2674</a>)</p>
</li>
<li>
<p>Set result of rename action to true if file was copied. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2680">LOG4J2-2680</a>)</p>
</li>
<li>
<p>@PluginValue does not support attribute names besides "value". (<a href="https://issues.apache.org/jira/browse/LOG4J2-2693">LOG4J2-2693</a>)</p>
</li>
<li>
<p>ArrayIndexOutOfBoundsException could occur with MAC address longer than 6 bytes. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2707">LOG4J2-2707</a>)</p>
</li>
<li>
<p>The rolling file appenders would fail to compress the file after rollover if the file name matched the file pattern. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2712">LOG4J2-2712</a>)</p>
</li>
<li>
<p>LOG4J2-2725 - Added try/finally around event.execute() for RingBufferLogEventHandler to clear memory correctly in case of exception/error (<a href="https://issues.apache.org/jira/browse/LOG4J2-2725">LOG4J2-2725</a>)</p>
</li>
<li>
<p>Prevent a memory leak when async loggers throw errors. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2725">LOG4J2-2725</a>)</p>
</li>
<li>
<p>Add setKey method to Kafka Appender Builder. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2727">LOG4J2-2727</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-12-1"><a class="anchor" href="#release-notes-2-12-1"></a>2.12.1</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2019-08-06</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This release contains bugfixes and minor enhancements.</p>
</div>
<div class="paragraph">
<p>This release improves the performance of capturing location information, makes <code>log4j-core</code> optional in the log4j 1.2 bridge, and explicitly removes <code>LoggerContext</code> references from components that keep track of them when the LoggerContext is shut down.
More details on the new features and fixes are itemized below.</p>
</div>
<div class="paragraph">
<p>Due to a break in compatibility in the SLF4J binding, Log4j now ships with two versions of the SLF4J to Log4j adapters.
<code>log4j-slf4j-impl</code> should be used with SLF4J 1.7.x and earlier and <code>log4j-slf4j18-impl</code> should be used with SLF4J 1.8.x and later.</p>
</div>
<div class="paragraph">
<p>Note that the XML, JSON and YAML formats changed in the 2.11.0 release: they no longer have the <code>timeMillis</code> attribute and instead have an <code>Instant</code> element with <code>epochSecond</code> and <code>nanoOfSecond</code> attributes.</p>
</div>
<div class="paragraph">
<p>The Log4j 2.12.1 API, as well as many core components, maintains binary compatibility with previous releases.</p>
</div>
<div class="paragraph">
<p>Log4j 2.12.1 requires a minimum of Java 8 to build and run.
Log4j 2.3 was the last release that supported Java 6 and Log4j 2.11.2 is the last release to support Java 7.</p>
</div>
<div class="paragraph">
<p>Basic compatibility with Log4j 1.x is provided through the <code>log4j-1.2-api</code> component, however it does
not implement some of the very implementation specific classes and methods.
The package names and Maven <code>groupId</code> have been changed to <code>org.apache.logging.log4j</code> to avoid any conflicts with Log4j 1.x.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-12-1-changed"><a class="anchor" href="#release-notes-2-12-1-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Make Log4j Core optional for Log4j 1.2 API. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2556">LOG4J2-2556</a>)</p>
</li>
<li>
<p>Update MongoDB 3 driver from 3.10.1 to 3.10.2. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2646">LOG4J2-2646</a>)</p>
</li>
<li>
<p>Improve exception messages in the JDBC appender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2657">LOG4J2-2657</a>)</p>
</li>
<li>
<p>Retry when JDBC throws a java.sql.SQLTransactionRollbackException in commitAndClose(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-2660">LOG4J2-2660</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-12-1-fixed"><a class="anchor" href="#release-notes-2-12-1-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Allow file renames to work when files are missing from the sequence. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1946">LOG4J2-1946</a>)</p>
</li>
<li>
<p>Remove references to LoggerContext when it is shutdown. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2366">LOG4J2-2366</a>)</p>
</li>
<li>
<p>Improve the performance of capturing location information. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2644">LOG4J2-2644</a>)</p>
</li>
<li>
<p>Support emulating a MAC address when using ipv6. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2650">LOG4J2-2650</a>)</p>
</li>
<li>
<p>AbstractAction.reportException records a warning to the status logger, providing more information when file based appenders fail to compress rolled data asynchronously. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2658">LOG4J2-2658</a>)</p>
</li>
<li>
<p>AbstractAction handles and records unchecked RuntimeException and Error in addition to IOException. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2659">LOG4J2-2659</a>)</p>
</li>
<li>
<p>"Values not bound to statement" when using JDBC appender, appender does not respect bufferSize="0". (<a href="https://issues.apache.org/jira/browse/LOG4J2-2667">LOG4J2-2667</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-12-0"><a class="anchor" href="#release-notes-2-12-0"></a>2.12.0</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2019-06-23</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This release contains bugfixes and minor enhancements.</p>
</div>
<div class="paragraph">
<p>Due to a break in compatibility in the SLF4J binding, Log4j now ships with two versions of the SLF4J to Log4j adapters.
<code>log4j-slf4j-impl</code> should be used with SLF4J 1.7.x and earlier and <code>log4j-slf4j18-impl</code> should be used with SLF4J 1.8.x and later.</p>
</div>
<div class="paragraph">
<p>New features include support for reconfiguration of Log4j configuraton files accessed via HTTP(s) and Spring Cloud Config specifically, a new Docker Lookup for obtaining information about the current Docker container, new reconfiguration methods added to the Configurator class, the ability to pad integers with leading zeros in filenames generated by the rolling file appenders, and allowing the TCP <code>SocketAppender</code> to connect to multiple IP addresses when they are returned from DNS.</p>
</div>
<div class="paragraph">
<p>More details on the new features and fixes are itemized below.</p>
</div>
<div class="paragraph">
<p>Note that the XML, JSON and YAML formats changed in the 2.11.0 release: they no longer have the <code>timeMillis</code> attribute and instead have an <code>Instant</code> element with <code>epochSecond</code> and <code>nanoOfSecond</code> attributes.</p>
</div>
<div class="paragraph">
<p>The Log4j 2.12.0 API, as well as many core components, maintains binary compatibility with previous releases.</p>
</div>
<div class="paragraph">
<p>Log4j 2.12.0 requires a minimum of Java 7 to build and run.
Log4j 2.3 was the last release that supported Java 6.</p>
</div>
<div class="paragraph">
<p>Basic compatibility with Log4j 1.x is provided through the <code>log4j-1.2-api</code> component, however it does
not implement some of the very implementation specific classes and methods.
The package names and Maven <code>groupId</code> have been changed to <code>org.apache.logging.log4j</code> to avoid any conflicts with Log4j 1.x.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-12-0-added"><a class="anchor" href="#release-notes-2-12-0-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Allow custom end-of-line with JsonLayout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2337">LOG4J2-2337</a>)</p>
</li>
<li>
<p>Allow zero padding the counter of a RollingFileAppender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2403">LOG4J2-2403</a>)</p>
</li>
<li>
<p>Add reconfiguration methods to Configurator. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2406">LOG4J2-2406</a>)</p>
</li>
<li>
<p>Add filter that will match events when no marker is present. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2427">LOG4J2-2427</a>)</p>
</li>
<li>
<p>TCP Appender should support a host name resolving to multiple IP addresses. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2586">LOG4J2-2586</a>)</p>
</li>
<li>
<p>GZIP compression on rollover supports configurable compression levels. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2598">LOG4J2-2598</a>)</p>
</li>
<li>
<p>AsyncQueueFullPolicy configuration short values "Default" and "Discard" are case-insensitive to avoid confusion. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2611">LOG4J2-2611</a>)</p>
</li>
<li>
<p>Add and use method org.apache.logging.log4j.message.MapMessage.toKey(String) for simpler subclasses. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2634">LOG4J2-2634</a>)</p>
</li>
<li>
<p>Add support for reconfiguration via HTTP(S), Docker, and Spring Cloud Configuration. (<a href="https://issues.apache.org/jira/browse/LOG4J2-913">LOG4J2-913</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-12-0-changed"><a class="anchor" href="#release-notes-2-12-0-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Update Jackson from 2.9.7 to 2.9.8. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2570">LOG4J2-2570</a>)</p>
</li>
<li>
<p>Update MongoDB 3 module driver from 3.9.0 to 3.10.1. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2574">LOG4J2-2574</a>)</p>
</li>
<li>
<p>Update Jackson from 2.9.8 to 2.9.9. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2619">LOG4J2-2619</a>)</p>
</li>
<li>
<p>Refactor several AsyncLogger methods below the 35 byte threshold for inlining. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2634">LOG4J2-2634</a>)</p>
</li>
<li>
<p>Update tests from H2 1.4.197 to 1.4.199.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-12-0-fixed"><a class="anchor" href="#release-notes-2-12-0-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>FailoverAppender was failing with ERROR appender Failover has no parameter that matches element Failovers. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1103">LOG4J2-1103</a>)</p>
</li>
<li>
<p>Lookups were not found if the plugin key was not lower case. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1143">LOG4J2-1143</a>)</p>
</li>
<li>
<p>Locate plugins within a Jar using a URL Connection. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1852">LOG4J2-1852</a>)</p>
</li>
<li>
<p>RollingRandomAccessFileAppender error message referenced incorrect class name. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2547">LOG4J2-2547</a>)</p>
</li>
<li>
<p>NullPointerException in JdbcAppender.createAppender(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-2559">LOG4J2-2559</a>)</p>
</li>
<li>
<p>JEP223 version detection fix for JDK 9 and up. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2561">LOG4J2-2561</a>)</p>
</li>
<li>
<p>MapPatternConverter is properly created from the '%K', '%map', and '%MAP' patterns. PatternConverter instanceOf methods with unknown parameter types no longer elide those with known parameters. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2564">LOG4J2-2564</a>)</p>
</li>
<li>
<p>StackOverflowException when server not reachable with SocketAppender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2592">LOG4J2-2592</a>)</p>
</li>
<li>
<p>Throw better exception message when both log4j-slf4j-impl and log4j-to-slf4j are present. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2597">LOG4J2-2597</a>)</p>
</li>
<li>
<p>java.lang.StackOverflowError at org.apache.logging.log4j.junit.AbstractExternalFileCleaner.println(AbstractExternalFileCleaner.java:169). (<a href="https://issues.apache.org/jira/browse/LOG4J2-2598">LOG4J2-2598</a>)</p>
</li>
<li>
<p>Update file time when size based triggering policy is used without a time-based triggering policy. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2602">LOG4J2-2602</a>)</p>
</li>
<li>
<p>Asynchronous logging when the queue is full no longer results in heavy CPU utilization and low throughput. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2606">LOG4J2-2606</a>)</p>
</li>
<li>
<p>Explicitly set file creation time. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2610">LOG4J2-2610</a>)</p>
</li>
<li>
<p>NullPointerException at org.apache.logging.log4j.core.appender.db.jdbc.JdbcDatabaseManager.writeInternal(JdbcDatabaseManager.java:803). (<a href="https://issues.apache.org/jira/browse/LOG4J2-2612">LOG4J2-2612</a>)</p>
</li>
<li>
<p>Restore constructor to ThrowablePatternConverter that was removed in 2.8.2. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2616">LOG4J2-2616</a>)</p>
</li>
<li>
<p>Possible ClassCastException in org.apache.logging.log4j.core.script.ScriptManager.ScriptManager(Configuration, WatchManager) (<a href="https://issues.apache.org/jira/browse/LOG4J2-2618">LOG4J2-2618</a>)</p>
</li>
<li>
<p>StructuredDataId was ignoring maxLength attribute. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2622">LOG4J2-2622</a>)</p>
</li>
<li>
<p>Fix a race allowing events not to be recorded when a RoutingAppender purge policy attempts to delete an idle appender at exactly the same time as a new event is recorded. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2629">LOG4J2-2629</a>)</p>
</li>
<li>
<p>RoutingAppender PurgePolicy implementations no longer stop appenders referenced from the logger configuration, only those that have been created by the RoutingAppender. Note that RoutingAppender.getAppenders no longer includes entries for referenced appenders, only those which it has created. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2631">LOG4J2-2631</a>)</p>
</li>
<li>
<p>RFC5424Layout was not properly setting default Structured Element id for the MDC (<a href="https://issues.apache.org/jira/browse/LOG4J2-2636">LOG4J2-2636</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-11-2"><a class="anchor" href="#release-notes-2-11-2"></a>2.11.2</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2019-02-04</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This release contains bugfixes and minor enhancements.</p>
</div>
<div class="paragraph">
<p>Due to a break in compatibility in the SLF4J binding, Log4j now ships with two versions of the SLF4J to Log4j adapters.
<code>log4j-slf4j-impl</code> should be used with SLF4J 1.7.x and earlier and <code>log4j-slf4j18-impl</code> should be used with SLF4J 1.8.x and later.</p>
</div>
<div class="paragraph">
<p>As of Log4j 2.9.0, the Log4j API was modified to use <code>java.util.ServiceLoader</code> to locate Log4j implementations, although the former binding mechanism is still supported.
The Log4j API JAR is now a multi-release JAR to provide implementations of Java 9 specific classes.
Multi-release JARs are not supported by the OSGi specification so OSGi modules will not be able to take advantage of these implementations but will not lose functionality as they will fall back to the implementations used in Java 7 and 8.
Applications using Spring Boot must add the Multi-Release header to the JAR manifest or the Java 9+ classes will be ignored.</p>
</div>
<div class="paragraph">
<p>More details on the new features and fixes are itemized below.
Note that some tools are not compatible with multi-release JARs and may fail trying to process class files in the <code>META-INF/versions/9</code> folder.
Those errors should be reported to the tool vendor.</p>
</div>
<div class="paragraph">
<p>Note that subsequent to the 2.9.0 release, for security reasons, Log4j does not process DTD in XML files.
If you used DTD for including snippets, you have to use XInclude or Composite Configuration instead.</p>
</div>
<div class="paragraph">
<p>Also subsequent to the 2.9.0 release, for security reasons, <code>SerializedLayout</code> is deprecated and no longer used as default in the Socket and JMS appenders.
<code>SerializedLayout</code> can still be used as before, but has to be specified explicitly.
To retain old behaviour, you have to change configuration like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;Appenders&gt;
  &lt;Socket name="socket" host="localhost" port="9500"/&gt;
&lt;/Appenders&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>into:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;Appenders&gt;
  &lt;Socket name="socket" host="localhost" port="9500"&gt;
    &lt;SerializedLayout/&gt;
  &lt;/Socket&gt;
&lt;/Appenders&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>We do, however, discourage the use of <code>SerializedLayout</code> and recommend <code>JsonLayout</code> as a replacement:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;Appenders&gt;
  &lt;Socket name="socket" host="localhost" port="9500"&gt;
    &lt;JsonLayout properties="true"/&gt;
  &lt;/Socket&gt;
&lt;/Appenders&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the XML, JSON and YAML formats changed in the 2.11.0 release: they no longer have the <code>timeMillis</code> attribute and instead have an <code>Instant</code> element with <code>epochSecond</code> and <code>nanoOfSecond</code> attributes.</p>
</div>
<div class="paragraph">
<p>The Log4j 2.11.2 API, as well as many core components, maintains binary compatibility with previous releases.</p>
</div>
<div class="paragraph">
<p>Log4j 2.11.2 requires a minimum of Java 7 to build and run.
Log4j 2.3 was the last release that supported Java 6.</p>
</div>
<div class="paragraph">
<p>Basic compatibility with Log4j 1.x is provided through the <code>log4j-1.2-api</code> component, however it does
not implement some of the very implementation specific classes and methods.
The package names and Maven <code>groupId</code> have been changed to <code>org.apache.logging.log4j</code> to avoid any conflicts with Log4j 1.x.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-11-2-added"><a class="anchor" href="#release-notes-2-11-2-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>PatternLayout %date conversion pattern should render time zone designator for ISO-ISO8601. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1246">LOG4J2-1246</a>)</p>
</li>
<li>
<p>JDBC Appender should reconnect to the database when a connection goes stale. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2496">LOG4J2-2496</a>)</p>
</li>
<li>
<p>Let JDBC PoolingDriverConnectionSource with Apache Commons DBCP configure a PoolableConnectionFactory. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2505">LOG4J2-2505</a>)</p>
</li>
<li>
<p>Allow a JDBC Appender to truncate strings to match a table&#8217;s metadata column length limit. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2509">LOG4J2-2509</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-11-2-changed"><a class="anchor" href="#release-notes-2-11-2-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Switch from CLIRR to RevAPI for detecting API changes. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1576">LOG4J2-1576</a>)</p>
</li>
<li>
<p>Improve exception logging performance. ThrowableProxy construction uses a faster method to discover the current stack trace. ThrowablePatternConverter and ExtendedThrowablePatternConverter default configurations no longer allocate an additional buffer for stack trace contents. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2391">LOG4J2-2391</a>)</p>
</li>
<li>
<p>Better handling of %highlight pattern when using jul-bridge. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2405">LOG4J2-2405</a>)</p>
</li>
<li>
<p>Let the NullAppender default its name to "null". (<a href="https://issues.apache.org/jira/browse/LOG4J2-2447">LOG4J2-2447</a>)</p>
</li>
<li>
<p>Update Jackson from 2.9.6 to 2.9.7. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2468">LOG4J2-2468</a>)</p>
</li>
<li>
<p>Update Apache Commons Compress from 1.17 to 1.18. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2469">LOG4J2-2469</a>)</p>
</li>
<li>
<p>Update Apache Commons CSV from 1.5 to 1.6. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2470">LOG4J2-2470</a>)</p>
</li>
<li>
<p>Update javax.mail from 1.6.1 to 1.6.2. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2471">LOG4J2-2471</a>)</p>
</li>
<li>
<p>Update mongo-java-driver 3 from 3.8.0 to 3.8.2. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2472">LOG4J2-2472</a>)</p>
</li>
<li>
<p>JDBC Appender should release parameter resources ASAP. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2489">LOG4J2-2489</a>)</p>
</li>
<li>
<p>Allow all Appenders to optionally carry a Property array. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2491">LOG4J2-2491</a>)</p>
</li>
<li>
<p>Update MongoDB driver from 3.8.2 to 3.9.0 for log4j-mongodb3 module. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2503">LOG4J2-2503</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-11-2-fixed"><a class="anchor" href="#release-notes-2-11-2-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Logging with a lambda expression with a method call that also logs would cause logs within method call to reference line num and method name of the parent method. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1570">LOG4J2-1570</a>)</p>
</li>
<li>
<p>Fixed Appenders section in Extending Log4j. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1571">LOG4J2-1571</a>)</p>
</li>
<li>
<p>Direct write was creating files with the wrong date/time. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1906">LOG4J2-1906</a>)</p>
</li>
<li>
<p>Expose LoggerContext.setConfiguration as a public method. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2009">LOG4J2-2009</a>)</p>
</li>
<li>
<p>Use the file pattern as the FileManager "name" when no filename is present. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2061">LOG4J2-2061</a>)</p>
</li>
<li>
<p>StackOverflowError at AwaitCompletionReliabilityStrategy. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2134">LOG4J2-2134</a>)</p>
</li>
<li>
<p>Fix memory leak in ReusableParameterizedMessage. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2201">LOG4J2-2201</a>)</p>
</li>
<li>
<p>Load PropertySources from any accessible ClassLoader. Hide any exceptions that may occur accessing a PropertySource. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2266">LOG4J2-2266</a>)</p>
</li>
<li>
<p>ReusableObjectMessage parameter is properly passed to appenders (#203). (<a href="https://issues.apache.org/jira/browse/LOG4J2-2363">LOG4J2-2363</a>)</p>
</li>
<li>
<p>NameAbbreviator correctly abbreviates first fragments (#188). (<a href="https://issues.apache.org/jira/browse/LOG4J2-2365">LOG4J2-2365</a>)</p>
</li>
<li>
<p>Pre-deployment of PersistenceUnit that using Log4j as session logger failed (#198). (<a href="https://issues.apache.org/jira/browse/LOG4J2-2397">LOG4J2-2397</a>)</p>
</li>
<li>
<p>Exceptions are added to all columns when a JDBC Appender&#8217;s ColumnMapping uses a Pattern. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2413">LOG4J2-2413</a>)</p>
</li>
<li>
<p>NullPointerException when closing never used RollingRandomAccessFileAppender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2418">LOG4J2-2418</a>)</p>
</li>
<li>
<p>Handle some unchecked exceptions while loading plugins. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2422">LOG4J2-2422</a>)</p>
</li>
<li>
<p>Setting a null ErrorHandler on AbstractAppender is not allowed and will no-op as expected. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2441">LOG4J2-2441</a>)</p>
</li>
<li>
<p>ErrorHandler is invoked with a LogEvent and Throwable when possible, where previously only a string was used. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2444">LOG4J2-2444</a>)</p>
</li>
<li>
<p>Add Log4j-slf4j18-impl dependency to BOM POM. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2453">LOG4J2-2453</a>)</p>
</li>
<li>
<p>RollingRandomAccessFileManager ignores new file patterns from programmatic reconfiguration. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2457">LOG4J2-2457</a>)</p>
</li>
<li>
<p>ColumnMapping literal not working. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2466">LOG4J2-2466</a>)</p>
</li>
<li>
<p>org.apache.log4j.SimpleLayout and ConsoleAppender missing in log4j-1.2-api. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2476">LOG4J2-2476</a>)</p>
</li>
<li>
<p>AbstractStringLayoutStringEncodingBenchmark returns the computed variables on each benchmark to avoid DCE. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2478">LOG4J2-2478</a>)</p>
</li>
<li>
<p>Avoid NullPointerExceptions in org.apache.logging.log4j.core.config.AbstractConfiguration for null arguments. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2481">LOG4J2-2481</a>)</p>
</li>
<li>
<p>BasicContextSelector cannot be used in a OSGI application. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2482">LOG4J2-2482</a>)</p>
</li>
<li>
<p>SizeBasedTriggeringPolicy was not honored when using the DirectWriteRolloverStrategy if the machine restarts. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2485">LOG4J2-2485</a>)</p>
</li>
<li>
<p>JmsAppender reconnectIntervalMillis cannot be set from a configuration file. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2497">LOG4J2-2497</a>)</p>
</li>
<li>
<p>JMS Appender may throw a NullPointerException when JMS is not up while the Appender is starting. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2499">LOG4J2-2499</a>)</p>
</li>
<li>
<p>Document that Properties element must be the first configuration element. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2500">LOG4J2-2500</a>)</p>
</li>
<li>
<p>JDBC Appender fails when using both parameter, source, and literal ColumnMapping elements. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2508">LOG4J2-2508</a>)</p>
</li>
<li>
<p>Make Strings.toRootUpperCase a static method so it can be accessed. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2514">LOG4J2-2514</a>)</p>
</li>
<li>
<p>Configuration documentation referenced incorrect method name. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2515">LOG4J2-2515</a>)</p>
</li>
<li>
<p>Fix regression using MapMessageLookup.lookup with MapMessages that do not implement StringMapMessage. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2522">LOG4J2-2522</a>)</p>
</li>
<li>
<p>Prevent ConcurrentModificationException while iterating over ListAppender events. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2527">LOG4J2-2527</a>)</p>
</li>
<li>
<p>Generalize checks using MapMessage implementations with do not extend StringMapMessage. Introduce new JAVA_UNQUOTED MapMessage format type based on the JAVA formatting, but without quoted values. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2530">LOG4J2-2530</a>)</p>
</li>
<li>
<p>Fix a regression introduced by LOG4J2-2301 in 2.11.1 allowing allocation to occur in AsyncLoggerConfig. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2533">LOG4J2-2533</a>)</p>
</li>
<li>
<p>CronTriggeringPolicy was not rolling properly, especially when used with the SizeBasedTriggeringPolicy. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2542">LOG4J2-2542</a>)</p>
</li>
<li>
<p>Add Log4j-to-SLF4J to BOM pom.xml. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2543">LOG4J2-2543</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-11-1"><a class="anchor" href="#release-notes-2-11-1"></a>2.11.1</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2018-07-22</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This release contains new features, bugfixes and minor enhancements.</p>
</div>
<div class="paragraph">
<p>Due to a break in compatibility in the SLF4J binding, Log4j now ships with two versions of the SLF4J to Log4j adapters.
<code>log4j-slf4j-impl</code> should be used with SLF4J 1.7.x and earlier and <code>log4j-slf4j18-impl</code> should be used with SLF4J 1.8.x and later.</p>
</div>
<div class="paragraph">
<p>As of Log4j 2.9.0, the Log4j API was modified to use <code>java.util.ServiceLoader</code> to locate Log4j implementations, although the former binding mechanism is still supported.
The Log4j API JAR is now a multi-release JAR to provide implementations of Java 9 specific classes.
Multi-release JARs are not supported by the OSGi specification so OSGi modules will not be able to take advantage of these implementations but will not lose functionality as they will fall back to the implementations used in Java 7 and 8.
More details on the new features and fixes are itemized below.
Note that some tools are not compatible with multi-release JARs and may fail trying to process class files in the <code>META-INF/versions/9</code> folder.
Those errors should be reported to the tool vendor.</p>
</div>
<div class="paragraph">
<p>Note that subsequent to the 2.9.0 release, for security reasons, <code>SerializedLayout</code> is deprecated and no longer used as default in the Socket and JMS appenders.
<code>SerializedLayout</code> can still be used as before, but has to be specified explicitly.
To retain old behaviour, you have to change configuration like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;Appenders&gt;
  &lt;Socket name="socket" host="localhost" port="9500"/&gt;
&lt;/Appenders&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>into:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;Appenders&gt;
  &lt;Socket name="socket" host="localhost" port="9500"&gt;
    &lt;SerializedLayout/&gt;
  &lt;/Socket&gt;
&lt;/Appenders&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>We do, however, discourage the use of <code>SerializedLayout</code> and recommend <code>JsonLayout</code> as a replacement:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;Appenders&gt;
  &lt;Socket name="socket" host="localhost" port="9500"&gt;
    &lt;JsonLayout properties="true"/&gt;
  &lt;/Socket&gt;
&lt;/Appenders&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that subsequent to the 2.9.0 release, for security reasons, Log4j does not process DTD in XML files.
If you used DTD for including snippets, you have to use XInclude or Composite Configuration instead.</p>
</div>
<div class="paragraph">
<p>The Log4j 2.11.1 API, as well as many core components, maintains binary compatibility with previous releases.</p>
</div>
<div class="paragraph">
<p>Log4j 2.11.1 requires a minimum of Java 7 to build and run.
Log4j 2.3 was the last release that supported Java 6.</p>
</div>
<div class="paragraph">
<p>Basic compatibility with Log4j 1.x is provided through the <code>log4j-1.2-api</code> component, however it does
not implement some of the very implementation specific classes and methods.
The package names and Maven <code>groupId</code> have been changed to <code>org.apache.logging.log4j</code> to avoid any conflicts with Log4j 1.x.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-11-1-changed"><a class="anchor" href="#release-notes-2-11-1-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Allow composite configuration for context parameter. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1721">LOG4J2-1721</a>)</p>
</li>
<li>
<p>Status logger should show the Log4j name and version when initializing itself. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2302">LOG4J2-2302</a>)</p>
</li>
<li>
<p>Log4j2 2.8.2 JMX unregister NullPointerException. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2304">LOG4J2-2304</a>)</p>
</li>
<li>
<p>Update Jackson from 2.9.4 to 2.9.5. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2311">LOG4J2-2311</a>)</p>
</li>
<li>
<p>Update LMAX Disruptor from 3.3.7 to 3.4.2. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2313">LOG4J2-2313</a>)</p>
</li>
<li>
<p>Update JAnsi from 1.17 to 1.17.1. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2328">LOG4J2-2328</a>)</p>
</li>
<li>
<p>Added AbstractLogEvent.getMutableInstant to allow the MutableInstant instance to be modified by classes extending AbstractLogEvent. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2351">LOG4J2-2351</a>)</p>
</li>
<li>
<p>Update Jackson from 2.9.5 to 2.9.6. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2357">LOG4J2-2357</a>)</p>
</li>
<li>
<p>Update Kafka client from 1.0.0 to 1.1.0. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2358">LOG4J2-2358</a>)</p>
</li>
<li>
<p>Update Kafka client from 1.1.0 to 1.1.1. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2384">LOG4J2-2384</a>)</p>
</li>
<li>
<p>Update Groovy from 2.4.13 to 2.5.1. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2385">LOG4J2-2385</a>)</p>
</li>
<li>
<p>Update optional Apache Commons DBCP from 2.2.0 to 2.4.0. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2386">LOG4J2-2386</a>)</p>
</li>
<li>
<p>Log4j 2.0 ERROR "Could not search jar" with JBoss EAP 6.2. (<a href="https://issues.apache.org/jira/browse/LOG4J2-548">LOG4J2-548</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-11-1-fixed"><a class="anchor" href="#release-notes-2-11-1-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Curly braces in parameters are not treated as placeholders. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2032">LOG4J2-2032</a>)</p>
</li>
<li>
<p>Improve plugin error message when elements are missing. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2268">LOG4J2-2268</a>)</p>
</li>
<li>
<p>MutableLogEvent references to other objects are cleared after each use. Fix a memory leak causing references to parameters to be held after synchronous logging with thread locals enabled. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2269">LOG4J2-2269</a>)</p>
</li>
<li>
<p>ParserConfigurationException when using Log4j with oracle.xml.jaxp.JXDocumentBuilderFactory. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2283">LOG4J2-2283</a>)</p>
</li>
<li>
<p>PoolingDriverConnectionSource does not take into account properties, user name, and password. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2300">LOG4J2-2300</a>)</p>
</li>
<li>
<p>Mixed async loggers no longer forget parameter values, providing some appenders with an array of nulls. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2301">LOG4J2-2301</a>)</p>
</li>
<li>
<p>Make java.util.ServiceLoader properly work in OSGi by using the Service Loader Mediator Specification. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2305">LOG4J2-2305</a>)</p>
</li>
<li>
<p>Split the SLF4J binding into 2 implementations - one for SLF4J 1.7.x and one for SLF4J 1.8+. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2305">LOG4J2-2305</a>)</p>
</li>
<li>
<p>MutableLogEvent and RingBufferLogEvent message mementos retain the original format string. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2307">LOG4J2-2307</a>)</p>
</li>
<li>
<p>Jackson layouts used with AsyncLoggerContextSelector output the expected format rather than only a JSON string of the message text. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2312">LOG4J2-2312</a>)</p>
</li>
<li>
<p>If root LoggerConfig does not have a Level return ERROR. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2316">LOG4J2-2316</a>)</p>
</li>
<li>
<p>MutableLogEvent.getNonNullImmutableMessage and Log4jLogEvent.makeMessageImmutable retain format and parameters. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2317">LOG4J2-2317</a>)</p>
</li>
<li>
<p>Messages are no longer mutated when the asynchronous queue is full. A warning is logged to the status logger instead. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2318">LOG4J2-2318</a>)</p>
</li>
<li>
<p>Fix NPE in AbstractLogger when another exception is thrown, masking the root cause. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2320">LOG4J2-2320</a>)</p>
</li>
<li>
<p>AsyncLogger uses the correct level when unspecified. This provides parity between AsyncLogger and Logger. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2321">LOG4J2-2321</a>)</p>
</li>
<li>
<p>Custom ContextSelector implementations which select an AsyncLoggerContext disable LoggerConfig.includeLocation by default for parity with AsyncLoggerContextSelector. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2322">LOG4J2-2322</a>)</p>
</li>
<li>
<p>RollingFileManager debug logging avoids string concatenation and errant braces in favor of parameterized logging. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2331">LOG4J2-2331</a>)</p>
</li>
<li>
<p>Handle errors thrown in default disruptor ExceptionHandler implementations to avoid killing background threads. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2333">LOG4J2-2333</a>)</p>
</li>
<li>
<p>Add API org.apache.logging.log4j.core.appender.AsyncAppender.getQueueSize(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-2334">LOG4J2-2334</a>)</p>
</li>
<li>
<p>Remove duplicate hyphen from the AsyncLoggerConfig background thread name. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2336">LOG4J2-2336</a>)</p>
</li>
<li>
<p>The OSGi Activator specified an incorrect version. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2343">LOG4J2-2343</a>)</p>
</li>
<li>
<p>Update Apache Commons Compress from 1.16.1 to 1.17. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2347">LOG4J2-2347</a>)</p>
</li>
<li>
<p>RingBufferLogEvent memento messages provide the expected format string, and no longer attempt to substitute parameters into curly braces in parameter toString values. Both RingBufferLogEvent and MutableLogEvent memento implementations memoize results to avoid rebuilding formatted string values. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2352">LOG4J2-2352</a>)</p>
</li>
<li>
<p>PropertiesUtil ignores non-string system properties. Fixes a NoClassDefFoundError initializing StatusLogger caused by an NPE while initializing the static PropertiesUtil field. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2355">LOG4J2-2355</a>)</p>
</li>
<li>
<p>Fixed a memory leak in which ReusableObjectMessage would hold a reference to the most recently logged object. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2362">LOG4J2-2362</a>)</p>
</li>
<li>
<p>Fixed a memory leak in which ReusableParameterizedMessage would hold a reference to the most recently logged throwable and provided varargs array. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2364">LOG4J2-2364</a>)</p>
</li>
<li>
<p>Nested logging doesn&#8217;t clobber AbstractStringLayout cached StringBuilders (<a href="https://issues.apache.org/jira/browse/LOG4J2-2368">LOG4J2-2368</a>)</p>
</li>
<li>
<p>StringBuilders.escapeJson implementation runs in linear time. Escaping large JSON strings in EncodingPatternConverter and MapMessage will perform significantly better. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2373">LOG4J2-2373</a>)</p>
</li>
<li>
<p>StringBuilders.escapeXml implementation runs in linear time. Escaping large XML strings in EncodingPatternConverter and MapMessage will perform significantly better. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2376">LOG4J2-2376</a>)</p>
</li>
<li>
<p>NullPointerException in org.apache.logging.log4j.util.LoaderUtil.getClassLoaders() when using Bootstrap class loader. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2377">LOG4J2-2377</a>)</p>
</li>
<li>
<p>Update Mongodb 3 driver from 3.6.3 to 3.8.0. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2382">LOG4J2-2382</a>)</p>
</li>
<li>
<p>Thread indefinitely blocked when logging a message in an interrupted thread. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2388">LOG4J2-2388</a>)</p>
</li>
<li>
<p>ThrowableProxy was saving and retrieving cache entries using different keys. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2389">LOG4J2-2389</a>)</p>
</li>
<li>
<p>Fix broken links in log4j web documentation. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2390">LOG4J2-2390</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-11-0"><a class="anchor" href="#release-notes-2-11-0"></a>2.11.0</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2018-03-11</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This release contains new features, bugfixes and minor enhancements.
Some of the new features include support for the Java 9 module system, support for the new SLF4j 1.8 binding mechanism, simplification of the Log4j property naming scheme, and native support of Jetty&#8217;s logger.
Log4j API is now a fully compliant module while the other Log4j jars are named automatic modules.</p>
</div>
<div class="paragraph">
<p>As of Log4j 2.9.0, the Log4j API was modified to use <code>java.util.ServiceLoader</code> to locate Log4j implementations, although the former binding mechanism is still supported.
The Log4j API JAR is now a multi-release JAR to provide implementations of Java 9 specific classes.
Multi-release JARs are not supported by the OSGi specification so OSGi modules will not be able to take advantage of these implementations but will not lose functionality as they will fall back to the implementations used in Java 7 and 8.
More details on the new features and fixes are itemized below.
Note that some tools are not compatible with multi-release JARs and may fail trying to process class files in the <code>META-INF/versions/9</code> folder.
Those errors should be reported to the tool vendor.</p>
</div>
<div class="paragraph">
<p>Note that subsequent to the 2.9.0 release, for security reasons, <code>SerializedLayout</code> is deprecated and no longer used as default in the Socket and JMS appenders.
<code>SerializedLayout</code> can still be used as before, but has to be specified explicitly.
To retain old behaviour, you have to change configuration like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;Appenders&gt;
  &lt;Socket name="socket" host="localhost" port="9500"/&gt;
&lt;/Appenders&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>into:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;Appenders&gt;
  &lt;Socket name="socket" host="localhost" port="9500"&gt;
    &lt;SerializedLayout/&gt;
  &lt;/Socket&gt;
&lt;/Appenders&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>We do, however, discourage the use of <code>SerializedLayout</code> and recommend <code>JsonLayout</code> as a replacement:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;Appenders&gt;
  &lt;Socket name="socket" host="localhost" port="9500"&gt;
    &lt;JsonLayout properties="true"/&gt;
  &lt;/Socket&gt;
&lt;/Appenders&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that subsequent to the 2.9.0 release, for security reasons, Log4j does not process DTD in XML files.
If you used DTD for including snippets, you have to use XInclude or Composite Configuration instead.</p>
</div>
<div class="paragraph">
<p>The Log4j 2.11.0 API, as well as many core components, maintains binary compatibility with previous releases with the following exceptions to Log4j Core.
Log4j 2.11.0 moves code from <code>log4j-core</code> to several new Maven modules.
Dependencies to other JARs that used to be optional in <code>log4j-core</code> are now required in the new modules.
The code in these modules have been repackaged.
These changes do not affect your configuration files.</p>
</div>
<div class="paragraph">
<p>The new modules are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>log4j-jdbc-dbc2</code></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Group ID: `org.apache.logging.log4j</p>
</li>
<li>
<p>Artifact ID: <code>log4j-jdbc-dbc2</code></p>
</li>
<li>
<p>Old package: <code>org.apache.logging.log4j.core.appender.db.jdbc</code></p>
</li>
<li>
<p>New package: <code>org.apache.logging.log4j.jdbc.appender</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code>log4j-jpa</code></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Group ID: <code>org.apache.logging.log4j</code></p>
</li>
<li>
<p>Artifact ID: <code>log4j-jpa</code></p>
</li>
<li>
<p>Old package 1: <code>org.apache.logging.log4j.core.appender.db.jpa</code></p>
</li>
<li>
<p>New package 1: <code>org.apache.logging.log4j.jpa.appender</code></p>
</li>
<li>
<p>Old package 2: <code>org.apache.logging.log4j.core.appender.db.jpa.converter</code></p>
</li>
<li>
<p>New package 2: <code>org.apache.logging.log4j.jpa.converter</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code>log4j-mongodb2</code></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Group ID: <code>org.apache.logging.log4j</code></p>
</li>
<li>
<p>Artifact ID: <code>log4j-mongodb2</code></p>
</li>
<li>
<p>Old package: <code>org.apache.logging.log4j.mongodb</code></p>
</li>
<li>
<p>New package: <code>org.apache.logging.log4j.mongodb2</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code>log4j-mongodb3</code></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Group ID: <code>org.apache.logging.log4j</code></p>
</li>
<li>
<p>Artifact ID: <code>log4j-mongodb3</code></p>
</li>
<li>
<p>Old package: <code>org.apache.logging.log4j.mongodb</code></p>
</li>
<li>
<p>New package: <code>org.apache.logging.log4j.mongodb3</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Log4j 2.11.0 requires a minimum of Java 7 to build and run.
Log4j 2.3 was the last release that supported Java 6.</p>
</div>
<div class="paragraph">
<p>Basic compatibility with Log4j 1.x is provided through the <code>log4j-1.2-api</code> component, however it does
not implement some of the very implementation specific classes and methods.
The package names and Maven <code>groupId</code> have been changed to <code>org.apache.logging.log4j</code> to avoid any conflicts with Log4j 1.x.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-11-0-added"><a class="anchor" href="#release-notes-2-11-0-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Added support for precise (micro and nanosecond) timestamps when running on Java 9. A limited number of precise %d date formats are supported with PatternLayout. POTENTIAL BREAKING CHANGE: The XML, JSON and YAML formats have changed: they no longer have the "timeMillis" attribute and instead have an "Instant" element with "epochSecond" and "nanoOfSecond" attributes. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1883">LOG4J2-1883</a>)</p>
</li>
<li>
<p>Add missing converters to PatternLayout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2143">LOG4J2-2143</a>)</p>
</li>
<li>
<p>Add API org.apache.logging.log4j.core.lookup.Interpolator.getStrLookupMap(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-2160">LOG4J2-2160</a>)</p>
</li>
<li>
<p>The MongoDB Appender should use a keys and values for a Log4j MapMessage. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2179">LOG4J2-2179</a>)</p>
</li>
<li>
<p>Add a MongoDbProvider builder for and deprecate org.apache.logging.log4j.mongodb.MongoDbProvider.createNoSqlProvider(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-2180">LOG4J2-2180</a>)</p>
</li>
<li>
<p>The JDBC Appender should use keys and values from a Log4j MapMessage. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2181">LOG4J2-2181</a>)</p>
</li>
<li>
<p>Add a simple JDBC DriverManager-based ConnectionSource that uses JDBC&#8217;s DriverManager#getConnection(String, String, String). (<a href="https://issues.apache.org/jira/browse/LOG4J2-2185">LOG4J2-2185</a>)</p>
</li>
<li>
<p>Add a JDBC ConnectionSource that provides pooling through Apache Commons DBCP 2. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2186">LOG4J2-2186</a>)</p>
</li>
<li>
<p>Add a hook for a Connection Source for a JDBC Appender to release its resources. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2187">LOG4J2-2187</a>)</p>
</li>
<li>
<p>Output JSON object for ObjectMessage in JsonLayout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2190">LOG4J2-2190</a>)</p>
</li>
<li>
<p>Made log4j-core a multi-release ("multi-version") jar, added log4j-core-java9 module. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2191">LOG4J2-2191</a>)</p>
</li>
<li>
<p>Add org.apache.logging.log4j.core.util.WatchManager#unwatch(File). (<a href="https://issues.apache.org/jira/browse/LOG4J2-2203">LOG4J2-2203</a>)</p>
</li>
<li>
<p>Add method org.apache.logging.log4j.core.util.WatchManager.reset(File) and reset(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-2206">LOG4J2-2206</a>)</p>
</li>
<li>
<p>Add debug logging to org.apache.logging.log4j.mongodb.MongoDbConnection. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2208">LOG4J2-2208</a>)</p>
</li>
<li>
<p>Add API to enable iterating over message parameters without creating temporary objects. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2253">LOG4J2-2253</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-11-0-changed"><a class="anchor" href="#release-notes-2-11-0-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Removed unnecessary threadlocal StringBuilder field from MdcPatternConverter. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2127">LOG4J2-2127</a>)</p>
</li>
<li>
<p>Update ZeroMQ&#8217;s jeromq from 0.4.2 to 0.4.3. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2132">LOG4J2-2132</a>)</p>
</li>
<li>
<p>Update version of maven bundle plugin to 3.4.0. Convert bundle plugin error to a warning. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2146">LOG4J2-2146</a>)</p>
</li>
<li>
<p>Update Jackson from 2.9.2 to 2.9.3. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2165">LOG4J2-2165</a>)</p>
</li>
<li>
<p>NullPointerException at org.apache.logging.log4j.util.Activator.loadProvider(Activator.java:81) in log4j 2.10.0. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2182">LOG4J2-2182</a>)</p>
</li>
<li>
<p>Update MongoDB driver from 3.0.4 to 3.6.1. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2184">LOG4J2-2184</a>)</p>
</li>
<li>
<p>Split off JPA support into a new module log4j-jpa. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2188">LOG4J2-2188</a>)</p>
</li>
<li>
<p>Update JMH to version 1.19 from 1.1.1. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2193">LOG4J2-2193</a>)</p>
</li>
<li>
<p>Require Java 9 to compile the log4j-perf module to allow benchmarking with Java 9 APIs. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2194">LOG4J2-2194</a>)</p>
</li>
<li>
<p>Document default property value support. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2197">LOG4J2-2197</a>)</p>
</li>
<li>
<p>Update MongoDB dependencies from classic to modern. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2198">LOG4J2-2198</a>)</p>
</li>
<li>
<p>MarkerFilter onMismatch invalid attribute in .properties. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2202">LOG4J2-2202</a>)</p>
</li>
<li>
<p>org.apache.logging.log4j.core.util.WatchManager.getWatchers() should pre-allocate its new Map. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2204">LOG4J2-2204</a>)</p>
</li>
<li>
<p>New module log4j-mongodb3: Remove use of deprecated MongoDB APIs and code to the Java driver version 3 API. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2205">LOG4J2-2205</a>)</p>
</li>
<li>
<p>Rename existing MongoDb plugin and related artifacts from MongoDb to MongoDb2. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2209">LOG4J2-2209</a>)</p>
</li>
<li>
<p>Fix error log message for Script which says ScriptFile instead. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2210">LOG4J2-2210</a>)</p>
</li>
<li>
<p>Unnecessary contention in CopyOnWriteSortedArrayThreadContextMap. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2212">LOG4J2-2212</a>)</p>
</li>
<li>
<p>Unnecessary contention in GarbageFreeSortedArrayThreadContextMap. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2213">LOG4J2-2213</a>)</p>
</li>
<li>
<p>Unnecessary contention in DefaultThreadContextMap. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2214">LOG4J2-2214</a>)</p>
</li>
<li>
<p>Reduce compiler warnings in log4j-api. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2215">LOG4J2-2215</a>)</p>
</li>
<li>
<p>Configuration builder classes should look for "onMismatch", not "onMisMatch". (<a href="https://issues.apache.org/jira/browse/LOG4J2-2219">LOG4J2-2219</a>)</p>
</li>
<li>
<p>Update Jackson from 2.9.3 to 2.9.4. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2229">LOG4J2-2229</a>)</p>
</li>
<li>
<p>Removed unnecessary dependency on jcommander since Log4j uses embedded picocli since 2.9. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2236">LOG4J2-2236</a>)</p>
</li>
<li>
<p>Cannot see or copy all of certain JAnsi exception messages on Windows due to NUL characters. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2243">LOG4J2-2243</a>)</p>
</li>
<li>
<p>Update Apache Commons Compress from 1.15 to 1.16.1. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2245">LOG4J2-2245</a>)</p>
</li>
<li>
<p>The internal status logger timestamp format is now configurable with system property <a href="manual/status-logger.html#log4j2.statusLoggerDateFormat" class="xref page"><code>log4j2.statusLoggerDateFormat</code></a>. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2250">LOG4J2-2250</a>)</p>
</li>
<li>
<p>Reusable LogEvents now pass the original format string to downstream components like layouts and filters. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2252">LOG4J2-2252</a>)</p>
</li>
<li>
<p>Update MongoDB 3 module from driver 3.6.1 to 3.6.3. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2259">LOG4J2-2259</a>)</p>
</li>
<li>
<p>[SMTP] Update javax.mail from 1.6.0 to 1.6.1. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2260">LOG4J2-2260</a>)</p>
</li>
<li>
<p>Update JAnsi from 1.16 to 1.17. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2264">LOG4J2-2264</a>)</p>
</li>
<li>
<p>Documentation fix in manual page for custom configurations. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2273">LOG4J2-2273</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-11-0-fixed"><a class="anchor" href="#release-notes-2-11-0-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Revert OSGi API version to 4.3.1. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1976">LOG4J2-1976</a>)</p>
</li>
<li>
<p>Avoid null attribute values in DefaultConfigurationBuilder. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2002">LOG4J2-2002</a>)</p>
</li>
<li>
<p>LoaderUtil was not looping properly over class loaders. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2104">LOG4J2-2104</a>)</p>
</li>
<li>
<p>DefaultMergeStrategy did not merge filters on loggers correctly. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2123">LOG4J2-2123</a>)</p>
</li>
<li>
<p>Removed compile-time dependency on Java Management APIs from Log4J API module to improve compatibility with Android Platform which does not support JMX extensions. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2126">LOG4J2-2126</a>)</p>
</li>
<li>
<p>Log4j2 throws NoClassDefFoundError in Java 9 in java.util.ServiceLoader. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2129">LOG4J2-2129</a>)</p>
</li>
<li>
<p>Don&#8217;t create exit message in traceExit&#174; when logging is disabled. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2157">LOG4J2-2157</a>)</p>
</li>
<li>
<p>Fixed bug where ThreadContext map was cleared, resulting in entries being only available for one log event. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2158">LOG4J2-2158</a>)</p>
</li>
<li>
<p>Allow SortedArrayStringMap to be filtered upon deserialization. Fix build error in Java 9 when compiling log4j-core test classes. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2163">LOG4J2-2163</a>)</p>
</li>
<li>
<p>Fix typo in Property Substitution docs. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2175">LOG4J2-2175</a>)</p>
</li>
<li>
<p>NullPointerException would occur when header was provided to a Layout on RollingRandingAccessFileAppender with DirectWriteRolloverStrategy. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2247">LOG4J2-2247</a>)</p>
</li>
<li>
<p>Incorrect automatics module name header was being included in manifests. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2254">LOG4J2-2254</a>)</p>
</li>
<li>
<p>Strings::join, when called with [null] returns "null" instead of EMPTY. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2270">LOG4J2-2270</a>)</p>
</li>
<li>
<p>Move module-info.class to META-INF/versions/9 directory. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2271">LOG4J2-2271</a>)</p>
</li>
<li>
<p>Allow EnvironmentPropertySource to run with a SecurityManager that rejects environment variable access. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2274">LOG4J2-2274</a>)</p>
</li>
<li>
<p>ConcurrentModificationException from org.apache.logging.log4j.status.StatusLogger.&lt;clinit&gt;(StatusLogger.java:71). (<a href="https://issues.apache.org/jira/browse/LOG4J2-2276">LOG4J2-2276</a>)</p>
</li>
<li>
<p>Allow SystemPropertiesPropertySource to run with a SecurityManager that rejects system property access. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2279">LOG4J2-2279</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-10-0"><a class="anchor" href="#release-notes-2-10-0"></a>2.10.0</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2017-11-18</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This release contains new features, bugfixes and minor enhancements.
Some of the new features include support for the Java 9 module system, support for the new SLF4j 1.8 binding mechanism, simplification of the Log4j property naming scheme, and native support of Jetty&#8217;s logger.
Log4j API is now a fully compliant Java 9 module while the other Log4j jars are Java 9 named automatic modules.</p>
</div>
<div class="paragraph">
<p>This release supports both SLF4J 1.7.x and SLF4J 1.8.x.
Because SLF4J 1.7.x requires implementations to include classes in the <code>org.slf4j.impl</code> package <code>log4j-sl4j-impl</code> cannot be used as a Java 9 module.
Support for SLF4J 1.7.x will be removed in a future release.</p>
</div>
<div class="paragraph">
<p>As of Log4j 2.9.0, the Log4j API was modified to use <code>java.util.ServiceLoader</code> to locate Log4j implementations, although the former binding mechanism is still supported.
The Log4j API JAR is now a multi-release JAR to provide implementations of Java 9 specific classes.
Multi-release JARs are not supported by the OSGi specification so OSGi modules will not be able to take advantage of these implementations but will not lose functionality as they will fall back to the implementations used in Java 7 and 8.
More details on the new features and fixes are itemized below.
Note that some tools are not compatible with multi-release JARs and may fail trying to process class files in the <code>META-INF/versions/9</code> folder.
Those errors should be reported to the tool vendor.</p>
</div>
<div class="paragraph">
<p>During testing of the release it was found that one unit test fails when run on Windows.
When building from source either use <code>mvn clean install -DskipTests</code> on Windows or run the build on a different operating system.
The unit test failure is a problem in the test, not in Log4j.
As always, pre-built distributions can be downloaded from
<a href="https://downloads.apache.org/logging/log4j/" class="bare">https://downloads.apache.org/logging/log4j/</a>
or the binaries JARs may be obtained from the Maven central repository.</p>
</div>
<div class="paragraph">
<p>Note that subsequent to the 2.9.0 release, for security reasons, <code>SerializedLayout</code> is deprecated and no longer used as default in the Socket and JMS appenders.
<code>SerializedLayout</code> can still be used as before, but has to be specified explicitly.
To retain old behaviour, you have to change configuration like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;Appenders&gt;
  &lt;Socket name="socket" host="localhost" port="9500"/&gt;
&lt;/Appenders&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>into:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;Appenders&gt;
  &lt;Socket name="socket" host="localhost" port="9500"&gt;
    &lt;SerializedLayout/&gt;
  &lt;/Socket&gt;
&lt;/Appenders&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>We do, however, discourage the use of <code>SerializedLayout</code> and recommend <code>JsonLayout</code> as a replacement:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;Appenders&gt;
  &lt;Socket name="socket" host="localhost" port="9500"&gt;
    &lt;JsonLayout properties="true"/&gt;
  &lt;/Socket&gt;
&lt;/Appenders&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that subsequent to the 2.9.0 release, for security reasons, Log4j does not process DTD in XML files.
If you used DTD for including snippets, you have to use XInclude or Composite Configuration instead.</p>
</div>
<div class="paragraph">
<p>The Log4j 2.10.0 API, as well as many core components, maintains binary compatibility with previous releases.</p>
</div>
<div class="paragraph">
<p>Log4j 2.10.0 requires a minimum of Java 7 to build and run.
Log4j 2.3 was the last release that supported Java 6.</p>
</div>
<div class="paragraph">
<p>Basic compatibility with Log4j 1.x is provided through the <code>log4j-1.2-api</code> component, however it does
not implement some of the very implementation specific classes and methods.
The package names and Maven <code>groupId</code> have been changed to <code>org.apache.logging.log4j</code> to avoid any conflicts with Log4j 1.x.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-10-0-added"><a class="anchor" href="#release-notes-2-10-0-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Allow filtering of line breaks in layout pattern. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1203">LOG4J2-1203</a>)</p>
</li>
<li>
<p>Simplify log4j system property naming scheme. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1431">LOG4J2-1431</a>)</p>
</li>
<li>
<p>Add fields with fixed values to JSON/XML/YAML layouts. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1694">LOG4J2-1694</a>)</p>
</li>
<li>
<p>Add global configuration environment SPI. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1809">LOG4J2-1809</a>)</p>
</li>
<li>
<p>Provide ways to configure SSL that avoid plain-text passwords in the log4j configuration. The configuration may now specify a system environment variable that holds the password, or the path to a file that holds the password. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2054">LOG4J2-2054</a>)</p>
</li>
<li>
<p>Modularize Log4j-api and make most other log4j jars automatic modules. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2056">LOG4J2-2056</a>)</p>
</li>
<li>
<p>Add possibility of sending the key of a message to Kafka using KafkaAppender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2062">LOG4J2-2062</a>)</p>
</li>
<li>
<p>Add org.apache.logging.log4j.core.config.composite.CompositeConfiguration#toString(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-2071">LOG4J2-2071</a>)</p>
</li>
<li>
<p>Add a noop AppenderSkeleton for applications still using Log4j 1.x. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2098">LOG4J2-2098</a>)</p>
</li>
<li>
<p>XML encoding for PatternLayout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2103">LOG4J2-2103</a>)</p>
</li>
<li>
<p>Add property to disable message pattern converter lookups. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2109">LOG4J2-2109</a>)</p>
</li>
<li>
<p>MapMessage should use deep toString for values. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2112">LOG4J2-2112</a>)</p>
</li>
<li>
<p>Provide a native Log4j 2 implementation of Eclipse Jetty&#8217;s org.eclipse.jetty.util.log.Logger. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2114">LOG4J2-2114</a>)</p>
</li>
<li>
<p>Properly escape newlines and other control characters in JSON. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2120">LOG4J2-2120</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-10-0-changed"><a class="anchor" href="#release-notes-2-10-0-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Update classes in org.apache.logging.log4j.core.net.ssl in APIs from String to a PasswordProvider producing char[] for passwords. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1896">LOG4J2-1896</a>)</p>
</li>
<li>
<p>Provide support for overriding the Tomcat Log class in Tomcat 8.5+. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2025">LOG4J2-2025</a>)</p>
</li>
<li>
<p>Disable thread name caching by default when running on Java 8u102 or later. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2052">LOG4J2-2052</a>)</p>
</li>
<li>
<p>Support new SLF4J binding mechanism introduced in SLF4J 1.8. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2057">LOG4J2-2057</a>)</p>
</li>
<li>
<p>Split up log4j-nosql into one module per appender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2076">LOG4J2-2076</a>)</p>
</li>
<li>
<p>Update from Jackson 2.9.1 to 2.9.2. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2077">LOG4J2-2077</a>)</p>
</li>
<li>
<p>Update LMAX disruptor from 3.3.6 to 3.3.7. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2078">LOG4J2-2078</a>)</p>
</li>
<li>
<p>Update Apache Commons Compress from 1.14 to 1.15. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2081">LOG4J2-2081</a>)</p>
</li>
<li>
<p>Upgrade picocli to 2.0.3 from 0.9.8. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2088">LOG4J2-2088</a>)</p>
</li>
<li>
<p>[TagLib] Update servlet-api provided dependency from 2.5 to 3.0.1. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2089">LOG4J2-2089</a>)</p>
</li>
<li>
<p>Update Apache Kafka kafka-clients from 0.11.0.1 to 1.0.0. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2096">LOG4J2-2096</a>)</p>
</li>
<li>
<p>Jackson dependencies for 2.9.2 incorrectly bring in jackson-annotations 2.9.0 instead of 2.9.2. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2117">LOG4J2-2117</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-10-0-fixed"><a class="anchor" href="#release-notes-2-10-0-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Nested pattern layout options broken. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1216">LOG4J2-1216</a>)</p>
</li>
<li>
<p>Until this change, messages appeared out of order in log file any time when the async logging queue was full. With this change, messages are only logged out of order to prevent deadlock when Log4j2 detects recursive logging while the queue is full. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2031">LOG4J2-2031</a>)</p>
</li>
<li>
<p>CompositeConfiguration supports Reconfiguration. PR #115. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2036">LOG4J2-2036</a>)</p>
</li>
<li>
<p>Exception java.nio.charset.UnsupportedCharsetException: cp65001 in 2.9.0. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2053">LOG4J2-2053</a>)</p>
</li>
<li>
<p>If Log4j is used as the Tomcat logging implementation startup might fail if an application also uses Log4j. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2055">LOG4J2-2055</a>)</p>
</li>
<li>
<p>AbstractDatabaseManager should make a copy of LogEvents before holding references to them: AsyncLogger log events are mutable. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2060">LOG4J2-2060</a>)</p>
</li>
<li>
<p>Log4j1XmlLayout does not provide the entire stack trace, it is missing the caused by information. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2070">LOG4J2-2070</a>)</p>
</li>
<li>
<p>Log4j-config.xsd should make AppenderRef optional for each Logger element. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2073">LOG4J2-2073</a>)</p>
</li>
<li>
<p>The console appender should say why it cannot load JAnsi. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2074">LOG4J2-2074</a>)</p>
</li>
<li>
<p>Wrong Apache Commons CSV version referenced in the Javadoc of CsvParameterLayout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2085">LOG4J2-2085</a>)</p>
</li>
<li>
<p>Jansi now needs to be enabled explicitly (by setting system property <code>log4j.skipJansi</code> to <code>false</code>). To avoid causing problems for web applications, Log4j will no longer automatically try to load Jansi without explicit configuration. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2087">LOG4J2-2087</a>)</p>
</li>
<li>
<p>Log4j respects the configured <a href="manual/systemproperties.html#log4j2.isWebapp" class="xref page"><code>log4j2.isWebapp</code></a> property. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2091">LOG4J2-2091</a>)</p>
</li>
<li>
<p>LevelMixIn class for Jackson is coded incorrectly (<a href="https://issues.apache.org/jira/browse/LOG4J2-2100">LOG4J2-2100</a>)</p>
</li>
<li>
<p>Non-string value in MapMessage caused ClassCastException. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2101">LOG4J2-2101</a>)</p>
</li>
<li>
<p>MapMessage JSON encoding will escape keys and values. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2102">LOG4J2-2102</a>)</p>
</li>
<li>
<p>MapMessage supports both StringBuilderFormattable and MultiFormatMessage. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2107">LOG4J2-2107</a>)</p>
</li>
<li>
<p>XML Schema for DynamicFilterThreshold does not accept multiple KeyValuePairs. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2289">LOG4J2-2289</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-9-1"><a class="anchor" href="#release-notes-2-9-1"></a>2.9.1</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2017-09-17</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This release contains bugfixes and minor enhancements.</p>
</div>
<div class="paragraph">
<p>As of Log4j 2.9.0, the Log4j API was modified to use <code>java.util.ServiceLoader</code> to locate Log4j implementations, although the former binding mechanism is still supported.
The Log4j JAR is now a multi-release JAR to provide implementations of the Java 9 specific classes.
Multi-release JARs are not supported by the OSGi specification so OSGi modules will not be able to take advantage of these implementations but will not lose functionality as they will fall back to the implementations used in Java 7 and 8.
More details on the new features and fixes are itemized below.</p>
</div>
<div class="paragraph">
<p>Note that subsequent to the 2.9.0 release, for security reasons, <code>SerializedLayout</code> is deprecated and no longer used as default in the Socket and JMS appenders.
<code>SerializedLayout</code> can still be used as before, but has to be specified explicitly.
To retain old behaviour, you have to change configuration like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;Appenders&gt;
  &lt;Socket name="socket" host="localhost" port="9500"/&gt;
&lt;/Appenders&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>into:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;Appenders&gt;
  &lt;Socket name="socket" host="localhost" port="9500"&gt;
    &lt;SerializedLayout/&gt;
  &lt;/Socket&gt;
&lt;/Appenders&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>We do, however, discourage the use of <code>SerializedLayout</code> and recommend <code>JsonLayout</code> as a replacement:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;Appenders&gt;
  &lt;Socket name="socket" host="localhost" port="9500"&gt;
    &lt;JsonLayout properties="true"/&gt;
  &lt;/Socket&gt;
&lt;/Appenders&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that subsequent to the 2.9.0 release, for security reasons, Log4j does not process DTD in XML files.
If you used DTD for including snippets, you have to use XInclude or Composite Configuration instead.</p>
</div>
<div class="paragraph">
<p>The Log4j 2.9.1 API, as well as many core components, maintains binary compatibility with previous releases.</p>
</div>
<div class="paragraph">
<p>Log4j 2.9.1 requires a minimum of Java 7 to build and run.
Log4j 2.3 was the last release that supported Java 6.</p>
</div>
<div class="paragraph">
<p>Basic compatibility with Log4j 1.x is provided through the <code>log4j-1.2-api</code> component, however it does
not implement some of the very implementation specific classes and methods.
The package names and Maven <code>groupId</code> have been changed to <code>org.apache.logging.log4j</code> to avoid any conflicts with Log4j 1.x.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-9-1-changed"><a class="anchor" href="#release-notes-2-9-1-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Use a class' canonical name instead of name to create its logger name. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2023">LOG4J2-2023</a>)</p>
</li>
<li>
<p>Update Jackson from 2.9.0 to 2.9.1 (fix for Java 9.) (<a href="https://issues.apache.org/jira/browse/LOG4J2-2043">LOG4J2-2043</a>)</p>
</li>
<li>
<p>Update Apache Commons CSV from 1.4 to 1.5. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2044">LOG4J2-2044</a>)</p>
</li>
<li>
<p>Update javax.mail from 1.5.6 to 1.6.0. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2045">LOG4J2-2045</a>)</p>
</li>
<li>
<p>Update Apache Commons Compress from 1.13 to 1.14. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2046">LOG4J2-2046</a>)</p>
</li>
<li>
<p>Update Cassandra driver from 3.1.0 to 3.1.4. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2047">LOG4J2-2047</a>)</p>
</li>
<li>
<p>Update Apache Kafka Client from 0.11.0.0 to 0.11.0.1. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2049">LOG4J2-2049</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-9-1-fixed"><a class="anchor" href="#release-notes-2-9-1-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Prevent ConcurrentModificationException with AsyncLoggerConfig. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1914">LOG4J2-1914</a>)</p>
</li>
<li>
<p>ClassNotFoundException when making all loggers asynchronous under OSGi environment. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1936">LOG4J2-1936</a>)</p>
</li>
<li>
<p>Prevent ConcurrentModificationException with AsyncLoggerConfig. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1988">LOG4J2-1988</a>)</p>
</li>
<li>
<p>java.lang.AbstractMethodError: javax.xml.parsers.DocumentBuilderFactory.setFeature(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-2026">LOG4J2-2026</a>)</p>
</li>
<li>
<p>Java 9 StackLocator was not properly skipping the initial stack frames. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2028">LOG4J2-2028</a>)</p>
</li>
<li>
<p>Marker examples should not use deprecated flow APIs. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2029">LOG4J2-2029</a>)</p>
</li>
<li>
<p>Inspect all known ClassLoaders to locate the service provider. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2030">LOG4J2-2030</a>)</p>
</li>
<li>
<p>Fix documentation to clarify disruptor-3.3.4 is now required for async loggers (previously the docs referred to disruptor-3.3.3 which was never released). (<a href="https://issues.apache.org/jira/browse/LOG4J2-2035">LOG4J2-2035</a>)</p>
</li>
<li>
<p>Increase default queue size for AsyncAppender from 128 to 1024. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2048">LOG4J2-2048</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-9-0"><a class="anchor" href="#release-notes-2-9-0"></a>2.9.0</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2017-08-26</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This release contains the first support of Java 9 as well as bugfixes and minor enhancements.
The Log4j API was modified to use <code>java.util.ServiceLoader</code> to locate Log4j implementations, although the former binding mechanism is still supported.
The Log4j JAR is now a multi-release JAR to provide implementations of the Java 9 specific classes.
Multi-release JARs are not supported by the OSGi specification so OSGi modules will not be able to take advantage of these implementations but will not lose functionality as they will fall back to the implementations used in Java 7 and 8.
More details on the new features and fixes are itemized below.</p>
</div>
<div class="paragraph">
<p>Note that subsequent to the 2.9.0 release, for security reasons, <code>SerializedLayout</code> is deprecated and no longer used as default in the Socket and JMS appenders.
<code>SerializedLayout</code> can still be used as before, but has to be specified explicitly.
To retain old behaviour, you have to change configuration like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;Appenders&gt;
  &lt;Socket name="socket" host="localhost" port="9500"/&gt;
&lt;/Appenders&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>into:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;Appenders&gt;
  &lt;Socket name="socket" host="localhost" port="9500"&gt;
    &lt;SerializedLayout/&gt;
  &lt;/Socket&gt;
&lt;/Appenders&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>We do, however, discourage the use of <code>SerializedLayout</code> and recommend <code>JsonLayout</code> as a replacement:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;Appenders&gt;
  &lt;Socket name="socket" host="localhost" port="9500"&gt;
    &lt;JsonLayout properties="true"/&gt;
  &lt;/Socket&gt;
&lt;/Appenders&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that subsequent to the 2.9.0 release, for security reasons, Log4j does not process DTD in XML files.
If you used DTD for including snippets, you have to use XInclude or Composite Configuration instead.</p>
</div>
<div class="paragraph">
<p>The Log4j 2.9.0 API, as well as many core components, maintains binary compatibility with previous releases.</p>
</div>
<div class="paragraph">
<p>Log4j 2.9.0 requires a minimum of Java 7 to build and run.
Log4j 2.3 was the last release that supported Java 6.</p>
</div>
<div class="paragraph">
<p>Basic compatibility with Log4j 1.x is provided through the <code>log4j-1.2-api</code> component, however it does
not implement some of the very implementation specific classes and methods.
The package names and Maven <code>groupId</code> have been changed to <code>org.apache.logging.log4j</code> to avoid any conflicts with Log4j 1.x.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-9-0-added"><a class="anchor" href="#release-notes-2-9-0-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>The JMS Appender should use a JMS MapMessage for a Log4j MapMessage. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1294">LOG4J2-1294</a>)</p>
</li>
<li>
<p>Add support for Java 9 StackWalker. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1359">LOG4J2-1359</a>)</p>
</li>
<li>
<p>Generic HTTP appender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1442">LOG4J2-1442</a>)</p>
</li>
<li>
<p>Configurable Log File Permissions with PosixFilePermission. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1699">LOG4J2-1699</a>)</p>
</li>
<li>
<p>Temporary compress directory during rollover (#88). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1766">LOG4J2-1766</a>)</p>
</li>
<li>
<p>Log4j2 will now print all internal logging to the console if system property <code>log4j2.debug</code> is defined with any value (or no value). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1813">LOG4J2-1813</a>)</p>
</li>
<li>
<p>Added wrapper classes CustomLoggerGenerator and ExtendedLoggerGenerator to avoid class name with a dollar ($) character which has special meaning in many *nix command line environments. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1814">LOG4J2-1814</a>)</p>
</li>
<li>
<p>Support null byte delimiter in GelfLayout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1854">LOG4J2-1854</a>)</p>
</li>
<li>
<p>Add an optional random delay in TimeBasedTriggeringPolicy (<a href="https://issues.apache.org/jira/browse/LOG4J2-1855">LOG4J2-1855</a>)</p>
</li>
<li>
<p>Shortcut to add Property and KeyValuePair component in ConfigurationBuilder. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1860">LOG4J2-1860</a>)</p>
</li>
<li>
<p>Support capped collections for MongoDb appender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1864">LOG4J2-1864</a>)</p>
</li>
<li>
<p>Added methods ::writeBytes(ByteBuffer) and ::writeBytes(byte[], int, int) to ByteBufferDestination interface and use these methods in TextEncoderHelper where possible to prepare for future enhancements to reduce lock contention. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1874">LOG4J2-1874</a>)</p>
</li>
<li>
<p>Warn when a configuration file for an inactive ConfigurationFactory is found. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1880">LOG4J2-1880</a>)</p>
</li>
<li>
<p>Added process ID (pid) pattern converter. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1884">LOG4J2-1884</a>)</p>
</li>
<li>
<p>Add forEach() methods to org.apache.logging.log4j.message.MapMessage. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1930">LOG4J2-1930</a>)</p>
</li>
<li>
<p>Add containsKey() methods to org.apache.logging.log4j.message.MapMessage. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1932">LOG4J2-1932</a>)</p>
</li>
<li>
<p>JMS Appender does not know how to recover from a broken connection. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1934">LOG4J2-1934</a>)</p>
</li>
<li>
<p>Add with(String, primitive) methods to org.apache.logging.log4j.message.MapMessage. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1935">LOG4J2-1935</a>)</p>
</li>
<li>
<p>Generate source jas for all test jars. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1945">LOG4J2-1945</a>)</p>
</li>
<li>
<p>JMS Appender should be able to connect to a broker (later) even it is not present at configuration time. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1955">LOG4J2-1955</a>)</p>
</li>
<li>
<p>JsonLayout, XmlLayout and YamlLayout support 0-byte termination of log events. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1981">LOG4J2-1981</a>)</p>
</li>
<li>
<p>Public API for parsing the output from JsonLayout/XmlLayout/YamlLayout into a LogEvent. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1986">LOG4J2-1986</a>)</p>
</li>
<li>
<p>Support printing multiple StructuredData elements in RFC5424Layout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2008">LOG4J2-2008</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-9-0-changed"><a class="anchor" href="#release-notes-2-9-0-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Allow for bufferSize=0 in SMTP appender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1071">LOG4J2-1071</a>)</p>
</li>
<li>
<p>Async Loggers no longer use deprecated LMAX Disruptor APIs. (Disruptor-3.3.3 or higher is now required.) (<a href="https://issues.apache.org/jira/browse/LOG4J2-1261">LOG4J2-1261</a>)</p>
</li>
<li>
<p>Add more detail to WARN "Ignoring log event" messages printed to the console after log4j was shut down. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1801">LOG4J2-1801</a>)</p>
</li>
<li>
<p>Move server components from log4j-core to new log4-server module. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1851">LOG4J2-1851</a>)</p>
</li>
<li>
<p>Update ZeroMQ&#8217;s JeroMQ from 0.3.6 to 0.4.0. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1868">LOG4J2-1868</a>)</p>
</li>
<li>
<p>Update Kafka client from 0.10.1.1 to 0.10.2.0 (<a href="https://issues.apache.org/jira/browse/LOG4J2-1869">LOG4J2-1869</a>)</p>
</li>
<li>
<p>Update JavaMail from 1.5.5 to 1.5.6. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1872">LOG4J2-1872</a>)</p>
</li>
<li>
<p>Missing documentation for Max index limit in DefaultRolloverStrategy. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1877">LOG4J2-1877</a>)</p>
</li>
<li>
<p>Update JAnsi from 1.14 to 1.15. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1879">LOG4J2-1879</a>)</p>
</li>
<li>
<p>Add missing getters to classes in package org.apache.logging.log4j.core.net.ssl. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1899">LOG4J2-1899</a>)</p>
</li>
<li>
<p>Update JAnsi from 1.15 to 1.16. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1900">LOG4J2-1900</a>)</p>
</li>
<li>
<p>Improved error message when misconfigured with multiple incompatible appenders targeting same file. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1908">LOG4J2-1908</a>)</p>
</li>
<li>
<p>Support using java.util.ServiceLoader to locate Log4j 2 API providers. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1917">LOG4J2-1917</a>)</p>
</li>
<li>
<p>Facilitate log4j use in Android applications: remove dependency on RMI and Management APIs from log4j-api. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1926">LOG4J2-1926</a>)</p>
</li>
<li>
<p>Add support for DirectWriteRolloverStrategy to RollingRandomAccessFileAppender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1928">LOG4J2-1928</a>)</p>
</li>
<li>
<p>Update Jackson from 2.8.7 to 2.8.9. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1938">LOG4J2-1938</a>)</p>
</li>
<li>
<p>Fix docker build with jdk9 requirements (#84). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1950">LOG4J2-1950</a>)</p>
</li>
<li>
<p>Configurations with multiple root loggers now fail loudly. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1954">LOG4J2-1954</a>)</p>
</li>
<li>
<p>JMS Appender broker password should be a char[], not a String. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1956">LOG4J2-1956</a>)</p>
</li>
<li>
<p>Deprecate SerializedLayout and remove it as default. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1958">LOG4J2-1958</a>)</p>
</li>
<li>
<p>Disable DTD processing in XML configuration files. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1959">LOG4J2-1959</a>)</p>
</li>
<li>
<p>Update ZeroMQ&#8217;s JeroMQ from 0.4.0 to 0.4.1. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1960">LOG4J2-1960</a>)</p>
</li>
<li>
<p>Update Kafka client from 0.10.2.0 to 0.11.0.0 (<a href="https://issues.apache.org/jira/browse/LOG4J2-1962">LOG4J2-1962</a>)</p>
</li>
<li>
<p>Include separator option of PatternLayout in manual (and other updates). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1966">LOG4J2-1966</a>)</p>
</li>
<li>
<p>Update HdrHistogram from 2.1.8 to 2.1.9. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1970">LOG4J2-1970</a>)</p>
</li>
<li>
<p>Update ZeroMQ&#8217;s JeroMQ from 0.4.1 to 0.4.2. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1974">LOG4J2-1974</a>)</p>
</li>
<li>
<p>Update javax.persistence from 2.1.0 to 2.1.1. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1975">LOG4J2-1975</a>)</p>
</li>
<li>
<p>Update org.osgi.core from 4.3.1 to 6.0.0. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1976">LOG4J2-1976</a>)</p>
</li>
<li>
<p>Allow maxLength of StructuredData to be specified by the user. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1984">LOG4J2-1984</a>)</p>
</li>
<li>
<p>Refactor SimpleMessage to be concise and clear (#100) (<a href="https://issues.apache.org/jira/browse/LOG4J2-1991">LOG4J2-1991</a>)</p>
</li>
<li>
<p>Replace JCommander command line parser with picocli to let users run Log4j2 utility applications without requiring an external dependency. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2011">LOG4J2-2011</a>)</p>
</li>
<li>
<p>Allow KeyStoreConfiguration and TrustStoreConfiguration to find files as resources. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2015">LOG4J2-2015</a>)</p>
</li>
<li>
<p>Update Jackson from 2.8.9 to 2.9.0. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2017">LOG4J2-2017</a>)</p>
</li>
<li>
<p>Remove default layout from KafkaAppender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2020">LOG4J2-2020</a>)</p>
</li>
<li>
<p>RFC5424Layout now prints the process id. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2022">LOG4J2-2022</a>)</p>
</li>
<li>
<p>Use a class' canonical name instead of name to create its logger name. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2023">LOG4J2-2023</a>)</p>
</li>
<li>
<p>Update SLF4J from 1.7.24 to 1.7.25.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-9-0-fixed"><a class="anchor" href="#release-notes-2-9-0-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>SocketAppender will lose several events after re-connection to server. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1311">LOG4J2-1311</a>)</p>
</li>
<li>
<p>Prevent NullPointerException when a file name is specified with the DirectWriteRolloverStrategy. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1833">LOG4J2-1833</a>)</p>
</li>
<li>
<p>Ensure the ThreadLocal StringBuilder in ParameterizedMessage won&#8217;t hold excessively much memory after logging a long message. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1858">LOG4J2-1858</a>)</p>
</li>
<li>
<p>Fix configuration documentation. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1867">LOG4J2-1867</a>)</p>
</li>
<li>
<p>More reliable checking for runtime dependencies. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1876">LOG4J2-1876</a>)</p>
</li>
<li>
<p>Fix documentation about default additivity value for loggers. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1885">LOG4J2-1885</a>)</p>
</li>
<li>
<p>Log4j throws a java.nio.charset.UnsupportedCharsetException: cp65001. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1888">LOG4J2-1888</a>)</p>
</li>
<li>
<p>Improve the documentation of the DynamicThresholdFilter. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1911">LOG4J2-1911</a>)</p>
</li>
<li>
<p>CompositeConfiguration logs warning "Unable to determine URI for configuration." However, the reconfiguration is completed. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1912">LOG4J2-1912</a>)</p>
</li>
<li>
<p>ScriptEngineManager is not available in Android and causes a NoClassDefFoundError. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1920">LOG4J2-1920</a>)</p>
</li>
<li>
<p>EOFException with FormattedMessage. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1929">LOG4J2-1929</a>)</p>
</li>
<li>
<p>The eventPrefix attribute was being ignored in the RFC5424Layout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1943">LOG4J2-1943</a>)</p>
</li>
<li>
<p>Trim levels read from properties file to remove trailing spaces. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1948">LOG4J2-1948</a>)</p>
</li>
<li>
<p>JndiManager is not released when the JmsAppender builder catches an exception trying to build itself. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1953">LOG4J2-1953</a>)</p>
</li>
<li>
<p>Reconfigure breaks DirectWriteRolloverStrategy. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1961">LOG4J2-1961</a>)</p>
</li>
<li>
<p>Dynamic reconfiguration does not work for filePattern of RollingFile. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1964">LOG4J2-1964</a>)</p>
</li>
<li>
<p>ClassCastException: org.eclipse.osgi.internal.loader.SystemBundleLoader$1 cannot be cast to java.lang.ClassLoader. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1971">LOG4J2-1971</a>)</p>
</li>
<li>
<p>Register log4j-core as an OSGi service. Skip tests for LOG4J2-1766 on macOS. Use group "staff" for LOG4J2-1699 test on macOS. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1971">LOG4J2-1971</a>)</p>
</li>
<li>
<p>Consider the StringBuilder&#8217;s capacity instead of content length when trimming. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1977">LOG4J2-1977</a>)</p>
</li>
<li>
<p>Log4j-config.xsd only allows one AppenderRef element for each Logger element. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1982">LOG4J2-1982</a>)</p>
</li>
<li>
<p>Fix default buffer size to match documentation (from 8102 to 8192 a.k.a. 8KB.) (<a href="https://issues.apache.org/jira/browse/LOG4J2-1985">LOG4J2-1985</a>)</p>
</li>
<li>
<p>Log4J JUL Bridge and RMI Security Manager causes access denied ("java.util.logging.LoggingPermission" "control") (<a href="https://issues.apache.org/jira/browse/LOG4J2-1987">LOG4J2-1987</a>)</p>
</li>
<li>
<p>Clarify Javadoc for AbstractTriggeringPolicy. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1989">LOG4J2-1989</a>)</p>
</li>
<li>
<p>ConcurrentModificationException logging a parameter of type Map. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1990">LOG4J2-1990</a>)</p>
</li>
<li>
<p>Fix compiler warnings in LoggerConfigTest. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1993">LOG4J2-1993</a>)</p>
</li>
<li>
<p>TcpSocketServer does not close accepted Sockets. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1994">LOG4J2-1994</a>)</p>
</li>
<li>
<p>HighlightConverter converts all unrecognized levels to DEBUG. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1999">LOG4J2-1999</a>)</p>
</li>
<li>
<p>StyleConverter.newInstance argument validation is incorrect. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2001">LOG4J2-2001</a>)</p>
</li>
<li>
<p>No compression when using a separate drive in Linux. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2012">LOG4J2-2012</a>)</p>
</li>
<li>
<p>SslSocketManager does not apply SSLContext on TCP reconnect. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2013">LOG4J2-2013</a>)</p>
</li>
<li>
<p>Mark FileRenameAction as successful when using alternative ways to move files. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2016">LOG4J2-2016</a>)</p>
</li>
<li>
<p>Fix incorrect documentation for LoggerNameLevelRewritePolicy. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2018">LOG4J2-2018</a>)</p>
</li>
<li>
<p>Parameter of mdcId in SyslogAppender has no default value. (<a href="https://issues.apache.org/jira/browse/LOG4J2-922">LOG4J2-922</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-8-2"><a class="anchor" href="#release-notes-2-8-2"></a>2.8.2</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2017-04-02</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This release primarily contains bugfixes and minor enhancements.
More details on the new features and fixes are itemized below.</p>
</div>
<div class="paragraph">
<p>Note that subsequent to the 2.6 release a minor source incompatibility was found due to the addition of new methods to the <code>Logger</code> interface.
If you have code that does:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">logger.error(null, “This is the log message”, throwable);</code></pre>
</div>
</div>
<div class="paragraph">
<p>or similar with any log level you will get a compiler error saying the reference is ambiguous.
To correct this either do:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">logger.error(“This is the log message”, throwable);</code></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">logger.error((Marker) null, “This is the log message”, throwable);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Log4j 2.8.2 API, as well as many core components, maintains binary compatibility with previous releases.</p>
</div>
<div class="paragraph">
<p>Log4j 2.8.2 requires a minimum of Java 7 to build and run.
Log4j 2.3 was the last release that supported Java 6.</p>
</div>
<div class="paragraph">
<p>Basic compatibility with Log4j 1.x is provided through the <code>log4j-1.2-api</code> component, however it does
not implement some of the very implementation specific classes and methods.
The package names and Maven <code>groupId</code> have been changed to <code>org.apache.logging.log4j</code> to avoid any conflicts with Log4j 1.x.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-8-2-added"><a class="anchor" href="#release-notes-2-8-2-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Add support for appending common suffix to each line of extended and root throwable stack trace. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1838">LOG4J2-1838</a>)</p>
</li>
<li>
<p>Add support for appending common suffix to each line of throwable stack trace. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1843">LOG4J2-1843</a>)</p>
</li>
<li>
<p>Add JSON encoding support to EncodingPatternConverter %encode{}. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1848">LOG4J2-1848</a>)</p>
</li>
<li>
<p>Add support for filtering input in TcpSocketServer and UdpSocketServer. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1863">LOG4J2-1863</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-8-2-changed"><a class="anchor" href="#release-notes-2-8-2-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Move integration tests to their own module to speed up build. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1827">LOG4J2-1827</a>)</p>
</li>
<li>
<p>Update Jackson from 2.8.6 to 2.8.7. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1856">LOG4J2-1856</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-8-2-fixed"><a class="anchor" href="#release-notes-2-8-2-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Log4j 2.8 can lose exceptions when a security manager is present. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1820">LOG4J2-1820</a>)</p>
</li>
<li>
<p>NullPointerException in HtmlLayout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1831">LOG4J2-1831</a>)</p>
</li>
<li>
<p>Fix documentation about the licensing for JeroMQ. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1835">LOG4J2-1835</a>)</p>
</li>
<li>
<p>Update the API version to 2.6.0. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1836">LOG4J2-1836</a>)</p>
</li>
<li>
<p>Fix typo in %replace converter documentation. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1840">LOG4J2-1840</a>)</p>
</li>
<li>
<p>Handle when LogEvent.getLoggerName() returns null in KafkaAppender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1845">LOG4J2-1845</a>)</p>
</li>
<li>
<p>Handle when LogEvent.getLoggerName() returns null in LoggerNameLevelRewritePolicy. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1846">LOG4J2-1846</a>)</p>
</li>
<li>
<p>Fixed daylight savings time (DST) issue with FixedDateFormat. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1849">LOG4J2-1849</a>)</p>
</li>
<li>
<p>Fix CassandraRule and unit tests on Windows. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1850">LOG4J2-1850</a>)</p>
</li>
<li>
<p>The default value of RandomAccessFileAppender.Builder append field is wrong. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1853">LOG4J2-1853</a>)</p>
</li>
<li>
<p>Fix JavaDoc on org.apache.logging.log4j.ThreadContext about inheritance. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1861">LOG4J2-1861</a>)</p>
</li>
<li>
<p>Fix JavaDoc about @Order and OrderComparator ordering. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1862">LOG4J2-1862</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-8-1"><a class="anchor" href="#release-notes-2-8-1"></a>2.8.1</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2017-02-26</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This release primarily contains bugfixes and minor enhancements.
More details on the new features and fixes are itemized below.</p>
</div>
<div class="paragraph">
<p>Note that subsequent to the 2.6 release a minor source incompatibility was found due to the addition of new methods to the <code>Logger</code> interface.
If you have code that does:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">logger.error(null, “This is the log message”, throwable);</code></pre>
</div>
</div>
<div class="paragraph">
<p>or similar with any log level you will get a compiler error saying the reference is ambiguous.
To correct this either do:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">logger.error(“This is the log message”, throwable);</code></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">logger.error((Marker) null, “This is the log message”, throwable);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Log4j 2.8.1 API, as well as many core components, maintains binary compatibility with previous releases.</p>
</div>
<div class="paragraph">
<p>Log4j 2.8.1 requires a minimum of Java 7 to build and run.
Log4j 2.3 was the last release that supported Java 6.</p>
</div>
<div class="paragraph">
<p>Basic compatibility with Log4j 1.x is provided through the <code>log4j-1.2-api</code> component, however it does
not implement some of the very implementation specific classes and methods.
The package names and Maven <code>groupId</code> have been changed to <code>org.apache.logging.log4j</code> to avoid any conflicts with Log4j 1.x.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-8-1-added"><a class="anchor" href="#release-notes-2-8-1-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>[core] Add and implement LogEvent.toImmutable(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1807">LOG4J2-1807</a>)</p>
</li>
<li>
<p>Remove deprecation on MessageSupplier lambda functions in Logger API. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1823">LOG4J2-1823</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-8-1-changed"><a class="anchor" href="#release-notes-2-8-1-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Update to use Logback 1.1.10 and then Logback 1.2 for tests. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1810">LOG4J2-1810</a>)</p>
</li>
<li>
<p>Improved error message when log4j 2 configuration file not found. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1812">LOG4J2-1812</a>)</p>
</li>
<li>
<p>Update Jackson from 2.8.5 to 2.8.6. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1819">LOG4J2-1819</a>)</p>
</li>
<li>
<p>Update SLF4J to 1.7.24. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1822">LOG4J2-1822</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-8-1-fixed"><a class="anchor" href="#release-notes-2-8-1-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Fix ClassNotFoundException org.apache.logging.log4j.core.util.ExecutorServices in OSGi tests. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1753">LOG4J2-1753</a>)</p>
</li>
<li>
<p>Fixed bug in PropertiesUtil::getCharsetProperty that caused UnsupportedCharsetException for ConsoleAppender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1799">LOG4J2-1799</a>)</p>
</li>
<li>
<p>Report errors when sending to Kafka when using syncSend=false. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1800">LOG4J2-1800</a>)</p>
</li>
<li>
<p>Fix Maven POM to ensure JMH generated classes in log4j-perf are included in benchmarks jar. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1803">LOG4J2-1803</a>)</p>
</li>
<li>
<p>Allow %i in file pattern to be preceded with characters other than just '-'. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1804">LOG4J2-1804</a>)</p>
</li>
<li>
<p>Fixed rare race condition in FixedDateFormat, made FixedDateFormat::millisSinceMidnight method public. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1805">LOG4J2-1805</a>)</p>
</li>
<li>
<p>Fix Javadoc for DefaultRolloverStrategy::purgeAscending (<a href="https://issues.apache.org/jira/browse/LOG4J2-1806">LOG4J2-1806</a>)</p>
</li>
<li>
<p>Change minOccur to minOccurs in Log4j-config.xsd. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1816">LOG4J2-1816</a>)</p>
</li>
<li>
<p>Fix rollover to work when filePattern contains no directory components. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1818">LOG4J2-1818</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-8"><a class="anchor" href="#release-notes-2-8"></a>2.8</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2017-01-21</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This release contains several bugfixes and new features.
The new features include the ability to have the <code>RollingFileAppender</code> log directly to the archive files.
More details on the new features and fixes are itemized below.</p>
</div>
<div class="paragraph">
<p>Note that subsequent to the 2.6 release a minor source incompatibility was found due to the addition of new methods to the <code>Logger</code> interface.
If you have code that does:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">logger.error(null, “This is the log message”, throwable);</code></pre>
</div>
</div>
<div class="paragraph">
<p>or similar with any log level you will get a compiler error saying the reference is ambiguous.
To correct this either do:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">logger.error(“This is the log message”, throwable);</code></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">logger.error((Marker) null, “This is the log message”, throwable);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Log4j 2.8 API, as well as many core components, maintains binary compatibility with previous releases.</p>
</div>
<div class="paragraph">
<p>Log4j 2.8 requires a minimum of Java 7 to build and run.
Log4j 2.3 was the last release that supported Java 6.</p>
</div>
<div class="paragraph">
<p>Basic compatibility with Log4j 1.x is provided through the <code>log4j-1.2-api</code> component, however it does
not implement some of the very implementation specific classes and methods.
The package names and Maven <code>groupId</code> have been changed to <code>org.apache.logging.log4j</code> to avoid any conflicts with Log4j 1.x.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-8-added"><a class="anchor" href="#release-notes-2-8-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Make DefaultRolloverStrategy more efficient when renaming files. Add nomax option to the fileIndex attribute. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1032">LOG4J2-1032</a>)</p>
</li>
<li>
<p>RollingFileAppender now supports omitting the file name and writing directly to the archive files. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1101">LOG4J2-1101</a>)</p>
</li>
<li>
<p>Allow default value in property to be a Lookup. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1243">LOG4J2-1243</a>)</p>
</li>
<li>
<p>Add documentation regarding YAML configuration format. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1379">LOG4J2-1379</a>)</p>
</li>
<li>
<p>Added public method ThreadContext::getThreadContextMap; removed class ThreadContextAccess. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1660">LOG4J2-1660</a>)</p>
</li>
<li>
<p>Introduce interfaces IndexedStringMap and IndexedReadOnlyStringMap, supporting garbage-free iteration over sorted map. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1681">LOG4J2-1681</a>)</p>
</li>
<li>
<p>Add a Builder to ScriptPatternSelector and deprecate ScriptPatternSelector.createSelector(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1695">LOG4J2-1695</a>)</p>
</li>
<li>
<p>Add a Builder to MarkerPatternSelector and deprecate MarkerPatternSelector.createSelector(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1696">LOG4J2-1696</a>)</p>
</li>
<li>
<p>Add a SerializerBuilder to PatternLayout and deprecate PatternLayout.createSerializer(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1697">LOG4J2-1697</a>)</p>
</li>
<li>
<p>Add a Builder to RandomAccessFileAppender and deprecate RandomAccessFileAppender.createAppender(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1701">LOG4J2-1701</a>)</p>
</li>
<li>
<p>Add a Builder to MemoryMappedFileAppender and deprecate MemoryMappedFileAppender.createAppender(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1703">LOG4J2-1703</a>)</p>
</li>
<li>
<p>Add a Builder to RollingRandomAccessFileAppender and deprecate RollingRandomAccessFileAppender.createAppender(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1704">LOG4J2-1704</a>)</p>
</li>
<li>
<p>Allow TCP Socket Appender to set socket options. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1707">LOG4J2-1707</a>)</p>
</li>
<li>
<p>Allow Secure Socket Appender to set socket options. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1708">LOG4J2-1708</a>)</p>
</li>
<li>
<p>Add a Builder to SyslogAppender and deprecate SyslogAppender.createAppender(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1709">LOG4J2-1709</a>)</p>
</li>
<li>
<p>Introduce marker interface AsynchronouslyFormattable. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1718">LOG4J2-1718</a>)</p>
</li>
<li>
<p>Add Apache Cassandra appender and ColumnMapping plugin. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1730">LOG4J2-1730</a>)</p>
</li>
<li>
<p>Add SyncSend attribute to KafkaAppender (as in KafkaLog4jAppender). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1733">LOG4J2-1733</a>)</p>
</li>
<li>
<p>Add a Builder to SyslogLayout and deprecate SyslogLayout.createLayout(Facility, boolean, String, Charset). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1737">LOG4J2-1737</a>)</p>
</li>
<li>
<p>Add a Builder to JsonLayout and deprecate org.apache.logging.log4j.core.layout.JsonLayout.createLayout(Configuration, boolean, boolean, boolean, boolean, boolean, boolean, String, String, Charset, boolean). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1738">LOG4J2-1738</a>)</p>
</li>
<li>
<p>Add Builder to KafkaAppender and deprecate KafkaAppender.createAppender(Layout, Filter, String, boolean, String, Property[], Configuration). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1739">LOG4J2-1739</a>)</p>
</li>
<li>
<p>Add TypeConverter and constraint validators for java.net.InetAddress and port numbers. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1755">LOG4J2-1755</a>)</p>
</li>
<li>
<p>Add TypeConverter for java.nio.file.Path. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1758">LOG4J2-1758</a>)</p>
</li>
<li>
<p>Add TypeConverter for java.util.UUID. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1759">LOG4J2-1759</a>)</p>
</li>
<li>
<p>Use MethodHandle in ContextDataFactory cached constructor. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1764">LOG4J2-1764</a>)</p>
</li>
<li>
<p>Add a Builder to JdbcAppender and deprecate JdbcAppender.createAppender(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1770">LOG4J2-1770</a>)</p>
</li>
<li>
<p>Add a Builder to ColumnConfig and deprecate ColumnConfig.createColumnConfig(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1771">LOG4J2-1771</a>)</p>
</li>
<li>
<p>Add StatusLoggerRule to allow unit tests to set a status level. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1773">LOG4J2-1773</a>)</p>
</li>
<li>
<p>Document how to exclude transitive conflicting dependencies in Maven and Gradle. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1787">LOG4J2-1787</a>)</p>
</li>
<li>
<p>Add non-string data type support to JdbcAppender via new ColumnMapping plugin. (<a href="https://issues.apache.org/jira/browse/LOG4J2-424">LOG4J2-424</a>)</p>
</li>
<li>
<p>Refactor SyslogAppender so that Layout is a Plugin element. (<a href="https://issues.apache.org/jira/browse/LOG4J2-969">LOG4J2-969</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-8-changed"><a class="anchor" href="#release-notes-2-8-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>The log4j-slf4j-impl module now declares a runtime dependency on log4j-core. While not technically required, this makes the log4j-slf4j-impl module behave similarly to slf4j-log4j12, and facilitates migration to Log4j 2. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1302">LOG4J2-1302</a>)</p>
</li>
<li>
<p>Update JeroMQ from 0.3.5 to 0.3.6. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1641">LOG4J2-1641</a>)</p>
</li>
<li>
<p>Inefficient locking in AbstractLoggerAdapter. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1644">LOG4J2-1644</a>)</p>
</li>
<li>
<p>Migrate to Mockito 2.x in unit tests. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1646">LOG4J2-1646</a>)</p>
</li>
<li>
<p>Update Commons Lang from 3.4 to 3.5. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1647">LOG4J2-1647</a>)</p>
</li>
<li>
<p>Update Jackson from 2.8.3 to 2.8.4. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1655">LOG4J2-1655</a>)</p>
</li>
<li>
<p>Update Apache Flume from 1.6.0 to 1.7.0. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1656">LOG4J2-1656</a>)</p>
</li>
<li>
<p>Update LMAX Disruptor from 3.3.5 to 3.3.6. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1698">LOG4J2-1698</a>)</p>
</li>
<li>
<p>Update Jansi from 1.13 to 1.14. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1700">LOG4J2-1700</a>)</p>
</li>
<li>
<p>Update Jackson from 2.8.4 to 2.8.5. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1735">LOG4J2-1735</a>)</p>
</li>
<li>
<p>Update Kafka from 0.10.0.1 to 0.10.1.1. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1750">LOG4J2-1750</a>)</p>
</li>
<li>
<p>Update liquibase-core from 3.5.1 to 3.5.3. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1751">LOG4J2-1751</a>)</p>
</li>
<li>
<p>Replace MockEJB dependency in unit tests with Spring Test and Mockito. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1774">LOG4J2-1774</a>)</p>
</li>
<li>
<p>Update Conversant Disruptor from 1.2.7 to 1.2.10 (<a href="https://issues.apache.org/jira/browse/LOG4J2-1781">LOG4J2-1781</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-8-fixed"><a class="anchor" href="#release-notes-2-8-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Improve LogEvent serialization to handle non-serializable Messages and deserializing when required classes are missing. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1226">LOG4J2-1226</a>)</p>
</li>
<li>
<p>CronTriggeringPolicy raise exception and fail to rollover log file when evaluateOnStartup is true. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1474">LOG4J2-1474</a>)</p>
</li>
<li>
<p>Configurable JVM shutdown hook timeout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1623">LOG4J2-1623</a>)</p>
</li>
<li>
<p>Fixed file locking regression in FileAppender introduced in 2.6. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1628">LOG4J2-1628</a>)</p>
</li>
<li>
<p>Console Appender does not pick up Oracle Java 8&#8217;s sun.stdout.encoding and sun.stderr.encoding. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1636">LOG4J2-1636</a>)</p>
</li>
<li>
<p>Fixed problems when used in OSGi containers (IllegalAccessError, NoClassDefFoundError). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1637">LOG4J2-1637</a>)</p>
</li>
<li>
<p>Fix MemoryMappedFileAppender.createAppender() Javadoc for immediateFlush. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1639">LOG4J2-1639</a>)</p>
</li>
<li>
<p>DefaultShutdownCallbackRegistry can throw a NoClassDefFoundError. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1642">LOG4J2-1642</a>)</p>
</li>
<li>
<p>Immutable empty StringMap. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1645">LOG4J2-1645</a>)</p>
</li>
<li>
<p>Insure the ConfigurationScheduler shuts down without blocking. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1649">LOG4J2-1649</a>)</p>
</li>
<li>
<p>CronTriggeringPolicy would use the wrong date/time when rolling over and create multiple triggering policies on reconfiguration. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1653">LOG4J2-1653</a>)</p>
</li>
<li>
<p>Prevent NPE in ThreadContextMapFactory::createThreadContextMap when initializing Log4j with Configurator::initialize and the BasicContextSelector is used. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1658">LOG4J2-1658</a>)</p>
</li>
<li>
<p>Ensure SortedArrayStringMap can be serialized and deserialized without errors regardless of content. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1663">LOG4J2-1663</a>)</p>
</li>
<li>
<p>Improve OSGi unit tests. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1664">LOG4J2-1664</a>)</p>
</li>
<li>
<p>(GC) Avoid allocating temporary objects in IntegerPatternConverter. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1665">LOG4J2-1665</a>)</p>
</li>
<li>
<p>(GC) Avoid allocating temporary objects in RelativeTimePatternConverter. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1666">LOG4J2-1666</a>)</p>
</li>
<li>
<p>(GC) Avoid allocating temporary objects in SequenceNumberPatternConverter. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1667">LOG4J2-1667</a>)</p>
</li>
<li>
<p>(GC) Avoid allocating temporary objects in MarkerPatternConverter. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1668">LOG4J2-1668</a>)</p>
</li>
<li>
<p>(GC) Avoid allocating temporary objects in MaxLengthConverter. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1669">LOG4J2-1669</a>)</p>
</li>
<li>
<p>(GC) Avoid allocating temporary objects in EqualsReplacementConverter. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1670">LOG4J2-1670</a>)</p>
</li>
<li>
<p>(GC) Avoid allocating temporary objects in EqualsIgnoreCaseReplacementConverter. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1671">LOG4J2-1671</a>)</p>
</li>
<li>
<p>(GC) Avoid allocating temporary objects in LevelRangeFilter. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1672">LOG4J2-1672</a>)</p>
</li>
<li>
<p>(GC) Avoid allocating temporary objects in MarkerFilter. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1673">LOG4J2-1673</a>)</p>
</li>
<li>
<p>(GC) Avoid allocating temporary objects in ThresholdFilter. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1674">LOG4J2-1674</a>)</p>
</li>
<li>
<p>Some LogEvents may not carry a Throwable (Use Message.getThrowable() in log(Message) methods.) (<a href="https://issues.apache.org/jira/browse/LOG4J2-1676">LOG4J2-1676</a>)</p>
</li>
<li>
<p>(GC) Avoid allocating temporary objects in MapFilter. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1677">LOG4J2-1677</a>)</p>
</li>
<li>
<p>(GC) Avoid allocating temporary objects in ThreadContextMapFilter. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1678">LOG4J2-1678</a>)</p>
</li>
<li>
<p>(GC) Avoid allocating temporary objects in StructuredDataFilter. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1679">LOG4J2-1679</a>)</p>
</li>
<li>
<p>(GC) Avoid allocating temporary objects in TimeFilter. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1680">LOG4J2-1680</a>)</p>
</li>
<li>
<p>Logger using LocalizedMessageFactory prints key instead of message. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1682">LOG4J2-1682</a>)</p>
</li>
<li>
<p>(GC) Avoid allocating temporary objects in MapMessage. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1683">LOG4J2-1683</a>)</p>
</li>
<li>
<p>Option 'disableAnsi' in PatternLayout to unconditionally disable ANSI escape codes. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1685">LOG4J2-1685</a>)</p>
</li>
<li>
<p>NPE in ThrowableProxy when resolving stack in Java EE/OSGi environment. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1687">LOG4J2-1687</a>)</p>
</li>
<li>
<p>Fixed bug where elements of a log message parameter array were nulled out in garbage-free mode. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1688">LOG4J2-1688</a>)</p>
</li>
<li>
<p>Add CleanableThreadContextMap interface supporting method removeAll(Iterable&lt;String&gt;). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1689">LOG4J2-1689</a>)</p>
</li>
<li>
<p>Add putAll() method to CloseableThreadContext. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1692">LOG4J2-1692</a>)</p>
</li>
<li>
<p>Make TimeFilter usable as global filter and as logger filter. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1706">LOG4J2-1706</a>)</p>
</li>
<li>
<p>Pick up bug fixes from Apache Commons Lang&#8217;s org.apache.commons.lang3.time package. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1712">LOG4J2-1712</a>)</p>
</li>
<li>
<p>(GC) Avoid allocating temporary objects in AbstractStyleNameConverter. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1714">LOG4J2-1714</a>)</p>
</li>
<li>
<p>(GC) Avoid allocating temporary objects in NdcPatternConverter. (Note that use of the ThreadContext stack is not garbage-free.) (<a href="https://issues.apache.org/jira/browse/LOG4J2-1715">LOG4J2-1715</a>)</p>
</li>
<li>
<p>(GC) Avoid allocating temporary objects in MapPatternConverter. (Note that constructing a MapMessage is not garbage-free.) (<a href="https://issues.apache.org/jira/browse/LOG4J2-1716">LOG4J2-1716</a>)</p>
</li>
<li>
<p>(GC) Avoid allocating temporary objects in EncodingPatternConverter. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1717">LOG4J2-1717</a>)</p>
</li>
<li>
<p>Fixed race condition in ObjectMessage and SimpleMessage, ensuring that the log message contains the value the object has during the logging call. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1719">LOG4J2-1719</a>)</p>
</li>
<li>
<p>Make GelfLayout independent of Jackson. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1720">LOG4J2-1720</a>)</p>
</li>
<li>
<p>(GC) Avoid allocating temporary objects in VariablesNotEmptyReplacementConverter. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1722">LOG4J2-1722</a>)</p>
</li>
<li>
<p>Unwanted transitive dependency on geronimo-jms_1.1_spec causes OSGi tests to fail. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1723">LOG4J2-1723</a>)</p>
</li>
<li>
<p>Using variables in GelfLayout&#8217;s additional fields at runtime. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1724">LOG4J2-1724</a>)</p>
</li>
<li>
<p>SslSocketManager now respects connectTimeoutMillis. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1731">LOG4J2-1731</a>)</p>
</li>
<li>
<p>SslSocketManagerFactory might leak Sockets when certain startup errors occur. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1734">LOG4J2-1734</a>)</p>
</li>
<li>
<p>TcpSocketManagerFactory might leak Sockets when certain startup errors occur. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1736">LOG4J2-1736</a>)</p>
</li>
<li>
<p>Add CronTriggeringPolicy programmatically leads to NPE. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1740">LOG4J2-1740</a>)</p>
</li>
<li>
<p>CompositeConfiguration does not add filters to appenderRefs. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1743">LOG4J2-1743</a>)</p>
</li>
<li>
<p>The custom logger Generate tool no longer requires the log4j-api module on the classpath. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1744">LOG4J2-1744</a>)</p>
</li>
<li>
<p>Do not use non-daemon thread pool for rollover tasks. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1748">LOG4J2-1748</a>)</p>
</li>
<li>
<p>Adds xmlns in schema and some other tags. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1756">LOG4J2-1756</a>)</p>
</li>
<li>
<p>Add Builder to GelfLayout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1762">LOG4J2-1762</a>)</p>
</li>
<li>
<p>Fixed concurrency issue affecting all layouts except PatternLayout and GelfLayout, which caused scrambled output and exceptions when logging synchronously from multiple threads. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1769">LOG4J2-1769</a>)</p>
</li>
<li>
<p>Fixed bug where AsyncLogger did not resolve configuration properties. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1779">LOG4J2-1779</a>)</p>
</li>
<li>
<p>Eliminate the use of the ExecutorServices in the LoggerContext. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1780">LOG4J2-1780</a>)</p>
</li>
<li>
<p>ConfigurationScheduler now preserves interrupt flag during stop. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1786">LOG4J2-1786</a>)</p>
</li>
<li>
<p>Cannot define both <code>filters</code> and <code>separator</code> for PatternLayout %xEx. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2195">LOG4J2-2195</a>)</p>
</li>
<li>
<p>RootThrowablePatternConverter does not use TextRenderer or line separator options. (<a href="https://issues.apache.org/jira/browse/LOG4J2-2221">LOG4J2-2221</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-7"><a class="anchor" href="#release-notes-2-7"></a>2.7</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2016-10-02</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This release contains several bugfixes and new features.
The new features include new logging API modules for Scala 2.10 and 2.11, and support for various non-blocking queue implementations in <code>AsyncAppender</code>.
Furthermore the <code>ThreadContext</code> map can now be configured to be garbage-free, and users can now inject context data from other sources than <code>ThreadContext</code>.
Context data values can be any <code>Object</code>, not just <code>String</code>s.
More details on the fixes are itemized below.</p>
</div>
<div class="paragraph">
<p>Note that subsequent to the 2.6 release a minor source incompatibility was found due to the addition of new methods to the <code>Logger</code> interface.
If you have code that does:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">logger.error(null, “This is the log message”, throwable);</code></pre>
</div>
</div>
<div class="paragraph">
<p>or similar with any log level you will get a compiler error saying the reference is ambiguous.
To correct this either do:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">logger.error(“This is the log message”, throwable);</code></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">logger.error((Marker) null, “This is the log message”, throwable);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Log4j 2.7 API, as well as many core components, maintains binary compatibility with previous releases.</p>
</div>
<div class="paragraph">
<p>Log4j 2.7 requires a minimum of Java 7 to build and run.
Log4j 2.3 was the last release that supported Java 6.</p>
</div>
<div class="paragraph">
<p>Basic compatibility with Log4j 1.x is provided through the <code>log4j-1.2-api</code> component, however it does
not implement some of the very implementation specific classes and methods.
The package names and Maven <code>groupId</code> have been changed to <code>org.apache.logging.log4j</code> to avoid any conflicts with Log4j 1.x.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-7-added"><a class="anchor" href="#release-notes-2-7-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Users can now inject context data from other sources than ThreadContext. Values can be any Object, not just Strings. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1010">LOG4J2-1010</a>)</p>
</li>
<li>
<p>Added Logging API for Scala 2.10 and 2.11. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1181">LOG4J2-1181</a>)</p>
</li>
<li>
<p>(GC) Added support for garbage-free ThreadContext map. Disabled by default, users need to enable this explicitly. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1349">LOG4J2-1349</a>)</p>
</li>
<li>
<p>Added optional support for Conversant DisruptorBlockingQueue in AsyncAppender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1430">LOG4J2-1430</a>)</p>
</li>
<li>
<p>Added optional support for JCTools MPSC bounded lock-free queue in AsyncAppender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1439">LOG4J2-1439</a>)</p>
</li>
<li>
<p>(GC) Changed LogEvent&#8217;s internal data structure for context data to be garbage-free. Added method LogEvent#getContextData(), deprecated method #getContextMap(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1447">LOG4J2-1447</a>)</p>
</li>
<li>
<p>[PatternLayout] Add an ANSI option to %message. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1458">LOG4J2-1458</a>)</p>
</li>
<li>
<p>[PatternLayout] Add an ANSI option to %xThrowable. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1471">LOG4J2-1471</a>)</p>
</li>
<li>
<p>org.apache.logging.log4j.core.LoggerContext now implements Closeable. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1472">LOG4J2-1472</a>)</p>
</li>
<li>
<p>FileAppender is now able to create files on-demand. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1501">LOG4J2-1501</a>)</p>
</li>
<li>
<p>RollingFileAppender is now able to create files on-demand. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1504">LOG4J2-1504</a>)</p>
</li>
<li>
<p>Create a Builder for the FileAppender plugin to facilitate adding attributes in the future. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1505">LOG4J2-1505</a>)</p>
</li>
<li>
<p>Allow Builders to be completely generic. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1507">LOG4J2-1507</a>)</p>
</li>
<li>
<p>Allow a Builder to subclass another Builder. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1508">LOG4J2-1508</a>)</p>
</li>
<li>
<p>Added options to exclude stack trace from JSON, XML and YAML layouts. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1512">LOG4J2-1512</a>)</p>
</li>
<li>
<p>Add ThreadContextMap2 interface supporting method putAll(Map&lt;String, String&gt;). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1516">LOG4J2-1516</a>)</p>
</li>
<li>
<p>Add ThreadContext.putAll(Map&lt;String, String&gt;). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1519">LOG4J2-1519</a>)</p>
</li>
<li>
<p>Add JUnit Rule implementations to manage the thread context. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1520">LOG4J2-1520</a>)</p>
</li>
<li>
<p>Added ability to generate Log4j 2-style XML configuration file from ConfigurationBuilder. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1528">LOG4J2-1528</a>)</p>
</li>
<li>
<p>Added Core API Configurator.shutdown(LoggerContext, long, TimeUnit). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1539">LOG4J2-1539</a>)</p>
</li>
<li>
<p>The Core AbstractManager now tracks its LoggerContext. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1540">LOG4J2-1540</a>)</p>
</li>
<li>
<p>The Core AbstractConfiguration now tracks its LoggerContext and add Configuration.getLoggerContext(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1547">LOG4J2-1547</a>)</p>
</li>
<li>
<p>AbstractManager now implements AutoCloseable. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1553">LOG4J2-1553</a>)</p>
</li>
<li>
<p>Add a Builder for the SocketAppender (deprecates factory method). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1557">LOG4J2-1557</a>)</p>
</li>
<li>
<p>SocketAppender now supports IO buffering. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1558">LOG4J2-1558</a>)</p>
</li>
<li>
<p>Added support for java.util.concurrent.LinkedTransferQueue to AsyncAppender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1568">LOG4J2-1568</a>)</p>
</li>
<li>
<p>Add a Builder to the RoutingAppender and deprecate factory method. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1577">LOG4J2-1577</a>)</p>
</li>
<li>
<p>RoutingAppender can be configured with scripts. Add Script in a Routes element. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1578">LOG4J2-1578</a>)</p>
</li>
<li>
<p>Add a ScriptAppenderSelector to create an Appender specified by a Script. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1597">LOG4J2-1597</a>)</p>
</li>
<li>
<p>Add a Builder to ServletAppender and deprecate factory method. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1609">LOG4J2-1609</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-7-changed"><a class="anchor" href="#release-notes-2-7-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Updated Jackson from 2.7.5 to 2.8.0. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1458">LOG4J2-1458</a>)</p>
</li>
<li>
<p>Updated JMS test from ActiveMQ 5.13.3 to 5.13.4. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1487">LOG4J2-1487</a>)</p>
</li>
<li>
<p>Updated Jackson from 2.8.0 to 2.8.1. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1494">LOG4J2-1494</a>)</p>
</li>
<li>
<p>Updated LMAX Disruptor from 3.3.4 to 3.3.5. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1495">LOG4J2-1495</a>)</p>
</li>
<li>
<p>Updated Kafka client from 0.9.1.0 to 0.10.0.0. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1496">LOG4J2-1496</a>)</p>
</li>
<li>
<p>Updated Kafka client from 0.10.0.0 to 0.10.0.1. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1533">LOG4J2-1533</a>)</p>
</li>
<li>
<p>Removed deprecated Core API org.apache.logging.log4j.core.util.Constants.UTF_8. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1543">LOG4J2-1543</a>)</p>
</li>
<li>
<p>Removed deprecated Core API org.apache.logging.log4j.core.util.Assert.requireNonNull(T, String). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1544">LOG4J2-1544</a>)</p>
</li>
<li>
<p>Removed deprecated Web API org.apache.logging.log4j.web.WebLookup.getServletContext(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1545">LOG4J2-1545</a>)</p>
</li>
<li>
<p>Updated JMS test from ActiveMQ 5.13.4 to 5.14.0. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1551">LOG4J2-1551</a>)</p>
</li>
<li>
<p>Custom Log4j threads now extend Log4jThread. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1556">LOG4J2-1556</a>)</p>
</li>
<li>
<p>Updated Jackson from 2.8.1 to 2.8.2. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1569">LOG4J2-1569</a>)</p>
</li>
<li>
<p>Allow the RollingFileAppender to use default pattern layout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1574">LOG4J2-1574</a>)</p>
</li>
<li>
<p>Updated Jackson from 2.8.2 to 2.8.3. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1598">LOG4J2-1598</a>)</p>
</li>
<li>
<p>Log4j2 TcpSocketServer in background. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1604">LOG4J2-1604</a>)</p>
</li>
<li>
<p>Improve error messages for TcpSocketServer and UdpSocketServer. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1605">LOG4J2-1605</a>)</p>
</li>
<li>
<p>Update Apache Commons Compress from 1.12 to 1.13. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1757">LOG4J2-1757</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-7-fixed"><a class="anchor" href="#release-notes-2-7-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>When starting on Google App Engine, Interpolator now suppresses the NoClassDefFoundError stack trace for the jvmrunargs lookup. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1051">LOG4J2-1051</a>)</p>
</li>
<li>
<p>Documented that JVM Input Arguments Lookup (JMX) is not available on Google App Engine. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1199">LOG4J2-1199</a>)</p>
</li>
<li>
<p>org.apache.logging.log4j.core.appender.routing.IdlePurgePolicy was not working correctly. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1235">LOG4J2-1235</a>)</p>
</li>
<li>
<p>Log4j threads are no longer leaking on Tomcat shutdown. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1259">LOG4J2-1259</a>)</p>
</li>
<li>
<p>Prevent NullPointerException in FastDateParser$TimeZoneStrategy. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1279">LOG4J2-1279</a>)</p>
</li>
<li>
<p>Properties declared in configuration can now have their value either in the element body or in an attribute named "value". (<a href="https://issues.apache.org/jira/browse/LOG4J2-1313">LOG4J2-1313</a>)</p>
</li>
<li>
<p>Support Property values to be specified in configuration as a value attribute as well as an element. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1313">LOG4J2-1313</a>)</p>
</li>
<li>
<p>Support loading custom plugins from jar files and directories whose classpath entries use the "vfs" URL protocol. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1320">LOG4J2-1320</a>)</p>
</li>
<li>
<p>(GC) HighlightConverter and StyleConverter are now GC-free. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1341">LOG4J2-1341</a>)</p>
</li>
<li>
<p>(GC) Added method getParameter() to ObjectMessage (and ReusableObjectMessage). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1438">LOG4J2-1438</a>)</p>
</li>
<li>
<p>Allow comma separated agents, host list to be passed to FlumeAppender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1448">LOG4J2-1448</a>)</p>
</li>
<li>
<p>Fixed class loader deadlock when using async logging and extended stack trace pattern. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1457">LOG4J2-1457</a>)</p>
</li>
<li>
<p>[OSGi] Fixed missing import package. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1467">LOG4J2-1467</a>)</p>
</li>
<li>
<p>Fixed improper header in CsvParameterLayout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1482">LOG4J2-1482</a>)</p>
</li>
<li>
<p>(GC) Fixed ISO8601 %date conversion pattern with a period '.' separator for milliseconds is now garbage free. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1488">LOG4J2-1488</a>)</p>
</li>
<li>
<p>(GC) Fixed %date conversion patterns with a timezone parameter are now garbage free. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1489">LOG4J2-1489</a>)</p>
</li>
<li>
<p>Log4j2 should postpone creating log file until the appender actually receives an event. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1490">LOG4J2-1490</a>)</p>
</li>
<li>
<p>Merging configurations failed with an NPE when comparing Nodes with different attributes. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1500">LOG4J2-1500</a>)</p>
</li>
<li>
<p>Fixed issue where CsvParameterLayout and CsvLogEventLayout inserted NUL characters if data starts with {, (, [ or " (<a href="https://issues.apache.org/jira/browse/LOG4J2-1502">LOG4J2-1502</a>)</p>
</li>
<li>
<p>Log4j should not unregister JMX MBeans when log4j2.disable.jmx property is true. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1506">LOG4J2-1506</a>)</p>
</li>
<li>
<p>DynamicThresholdFilter filtered incorrectly when params were passed as individual arguments instead of varargs. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1511">LOG4J2-1511</a>)</p>
</li>
<li>
<p>Prevent deadlock in Async Loggers when queue is full and logged Object&#8217;s toString() logs another message. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1518">LOG4J2-1518</a>)</p>
</li>
<li>
<p>Added support for setting StatusLogger destination in ConfigurationBuilder. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1526">LOG4J2-1526</a>)</p>
</li>
<li>
<p>Prevent NPE in RingBufferLogEvent.getFormattedMessage() when used in web applications. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1527">LOG4J2-1527</a>)</p>
</li>
<li>
<p>Attributes were not merged properly in composite configurations. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1529">LOG4J2-1529</a>)</p>
</li>
<li>
<p>Fixed issue where LogEvent.getContextStack() returned null. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1530">LOG4J2-1530</a>)</p>
</li>
<li>
<p>Attributes were not merged properly in composite configurations. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1532">LOG4J2-1532</a>)</p>
</li>
<li>
<p>Prevent NPE when dynamically removing filters. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1538">LOG4J2-1538</a>)</p>
</li>
<li>
<p>Fix file handle resource leak in XmlConfiguration.XmlConfiguration(ConfigurationSource). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1541">LOG4J2-1541</a>)</p>
</li>
<li>
<p>Prevent ArrayIndexOutOfBoundsException in ParameterizedMessage.formatTo for single-char or empty messages. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1542">LOG4J2-1542</a>)</p>
</li>
<li>
<p>[CronTriggeringPolicy] ConfigurationScheduler scheduled the task infinitely after first fire. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1548">LOG4J2-1548</a>)</p>
</li>
<li>
<p>Fixed issue where AsyncLoggerContextSelector+PropertiesConfigurationBuilder defaulted to includeLocation=true. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1549">LOG4J2-1549</a>)</p>
</li>
<li>
<p>Prevent NPE in Level.isInRange. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1559">LOG4J2-1559</a>)</p>
</li>
<li>
<p>Prevent SocketAppender memory usage from growing unbounded if it cannot connect to a server. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1562">LOG4J2-1562</a>)</p>
</li>
<li>
<p>Fix to prevent Log4j 2.6.2 and higher from losing exceptions when a security manager is present. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1563">LOG4J2-1563</a>)</p>
</li>
<li>
<p>Layout is no longer optional. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1573">LOG4J2-1573</a>)</p>
</li>
<li>
<p>(GC) LoggerConfig now stores configuration properties in a List, not a Map to prevent creating temporary Iterator objects. Added method LoggerConfig#getPropertyList(), deprecated method #getProperties(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1575">LOG4J2-1575</a>)</p>
</li>
<li>
<p>Unregistering JMX components no longer prints a stack trace when the MBean has already been unregistered. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1581">LOG4J2-1581</a>)</p>
</li>
<li>
<p>When initializing on platforms where JMX is not available, Interpolator component no longer prints stack trace for warning messages. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1582">LOG4J2-1582</a>)</p>
</li>
<li>
<p>Fixed scrambled log messages triggered by nested logging from toString() method of a logging parameter object. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1583">LOG4J2-1583</a>)</p>
</li>
<li>
<p>Fixed issue with filters extending AbstractFilter that did not override methods with unrolled varargs. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1590">LOG4J2-1590</a>)</p>
</li>
<li>
<p>Introduced new interface LifeCycle2 with stop(long,TimeUnit) method to avoid breaking backwards compatibility with new Configurator.shutdown(LoggerContext, long, TimeUnit) API. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1591">LOG4J2-1591</a>)</p>
</li>
<li>
<p>Prevent potential NPE in org.apache.logging.log4j.message.ParameterFormatter.formatMessage3(StringBuilder, char[], int, Object[], int, int[]). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1599">LOG4J2-1599</a>)</p>
</li>
<li>
<p>Prevent potential NPE due to org.apache.logging.log4j.core.layout.MarkerPatternSelector.createSelector(PatternMatch[], String, boolean, boolean, Configuration). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1600">LOG4J2-1600</a>)</p>
</li>
<li>
<p>Prevent potential NPE due to org.apache.logging.log4j.core.layout.ScriptPatternSelector.createSelector(AbstractScript, PatternMatch[], String, boolean, boolean, Configuration). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1601">LOG4J2-1601</a>)</p>
</li>
<li>
<p>Prevent potential NPE in org.apache.logging.log4j.core.util.datetime.FormatCache.MultipartKey.equals(Object) when object is null. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1602">LOG4J2-1602</a>)</p>
</li>
<li>
<p>Redo hashCode() and equals() methods in org.apache.logging.log4j.core.net.ssl classes. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1603">LOG4J2-1603</a>)</p>
</li>
<li>
<p>ServletAppender does not provide throwable object to ServletContext. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1608">LOG4J2-1608</a>)</p>
</li>
<li>
<p>Add targetNamespace to log4j-config.xsd. GitHub #43. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1610">LOG4J2-1610</a>)</p>
</li>
<li>
<p>Improved performance of context data injector for web applications to be on par with standalone applications. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1611">LOG4J2-1611</a>)</p>
</li>
<li>
<p>Fixed ClassCastException when using JUL logging during shutdown. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1618">LOG4J2-1618</a>)</p>
</li>
<li>
<p>new Log4jLogEvent().toString() throws an NPE. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1619">LOG4J2-1619</a>)</p>
</li>
<li>
<p>2.7-rc1: RollingFileAppender immediateFlush default value should be true, not false. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1620">LOG4J2-1620</a>)</p>
</li>
<li>
<p>[OSGi] Fixed wrong Fragment-Host in manifest files. (<a href="https://issues.apache.org/jira/browse/LOG4J2-351">LOG4J2-351</a>)</p>
</li>
<li>
<p>Added ability to disable (date) lookup completely for compatibility with other libraries like Camel. (<a href="https://issues.apache.org/jira/browse/LOG4J2-905">LOG4J2-905</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-6-2"><a class="anchor" href="#release-notes-2-6-2"></a>2.6.2</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2016-07-05</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This is the twelfth GA release.
It is primarily a bugfix release.
More details on the fixes are itemized below.</p>
</div>
<div class="paragraph">
<p>Note that subsequent to the 2.6 release a minor source incompatibility was found due to the addition of new methods to the <code>Logger</code> interface.
If you have code that does:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">logger.error(null, “This is the log message”, throwable);</code></pre>
</div>
</div>
<div class="paragraph">
<p>or similar with any log level you will get a compiler error saying the reference is ambiguous.
To correct this either do:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">logger.error(“This is the log message”, throwable);</code></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">logger.error((Marker) null, “This is the log message”, throwable);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Log4j 2.6.2 maintains binary compatibility with previous releases.</p>
</div>
<div class="paragraph">
<p>Log4j 2.6.2 requires a minimum of Java 7 to build and run.
Log4j 2.3 was the last release that supported Java 6.</p>
</div>
<div class="paragraph">
<p>Basic compatibility with Log4j 1.x is provided through the <code>log4j-1.2-api</code> component, however it does
not implement some of the very implementation specific classes and methods.
The package names and Maven <code>groupId</code> have been changed to <code>org.apache.logging.log4j</code> to avoid any conflicts with Log4j 1.x.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-6-2-added"><a class="anchor" href="#release-notes-2-6-2-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Add "direct" option to ConsoleAppender for increased performance. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1395">LOG4J2-1395</a>)</p>
</li>
<li>
<p>Unbox utility&#8217;s ringbuffer of StringBuilders is now configurable. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1412">LOG4J2-1412</a>)</p>
</li>
<li>
<p>(GC) ParameterFormatter now avoids calling toString() on auto-boxed primitive message parameters. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1415">LOG4J2-1415</a>)</p>
</li>
<li>
<p>(GC) ObjectMessage and ReusableObjectMessage now avoid calling toString() on auto-boxed primitive parameters. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1437">LOG4J2-1437</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-6-2-changed"><a class="anchor" href="#release-notes-2-6-2-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Update Jackson from 2.7.4 to 2.7.5. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1432">LOG4J2-1432</a>)</p>
</li>
<li>
<p>Update Jansi from 1.11 to 1.13. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1433">LOG4J2-1433</a>)</p>
</li>
<li>
<p>Update Apache Commons Compress from 1.11 to 1.12. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1444">LOG4J2-1444</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-6-2-fixed"><a class="anchor" href="#release-notes-2-6-2-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>CronTriggeringPolicy was not properly setting the prevFileTime value for the PatternProcessor so file dates and times on rolled files were incorrect. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1250">LOG4J2-1250</a>)</p>
</li>
<li>
<p>Fixed minor issues with the 2.6.1 website. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1414">LOG4J2-1414</a>)</p>
</li>
<li>
<p>Fixed issue where Unbox utility ignored the value Constants.ENABLE_THREADLOCALS and always stored non-JDK classes in ThreadLocals. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1417">LOG4J2-1417</a>)</p>
</li>
<li>
<p>Provide MessageFactory2 to custom Logger implementations. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1418">LOG4J2-1418</a>)</p>
</li>
<li>
<p>RollingRandomAccessFileManager was not properly rolling over on startup and was getting a NullPointerException. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1420">LOG4J2-1420</a>)</p>
</li>
<li>
<p>Fixed issue where AsyncAppenderQueueFullPolicyTest sometimes hangs. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1422">LOG4J2-1422</a>)</p>
</li>
<li>
<p>Ensure that the thread-local StringBuilders used by Layouts to format log events to text will not retain excessive memory after a large message was logged. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1434">LOG4J2-1434</a>)</p>
</li>
<li>
<p>Fix bug in OnStartupTriggeringPolicy that allowed it to roll over on every reconfiguration. Added minSize attribute. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1440">LOG4J2-1440</a>)</p>
</li>
<li>
<p>OnStartupTriggeringPolicyTest fails on Windows saying the file is used by another process. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1445">LOG4J2-1445</a>)</p>
</li>
<li>
<p>Fixed issue where reusable messages broke flow tracing logic. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1452">LOG4J2-1452</a>)</p>
</li>
<li>
<p>If copy and delete fails in rename action then resort to truncating the source file after copying it. (<a href="https://issues.apache.org/jira/browse/LOG4J2-904">LOG4J2-904</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-6-1"><a class="anchor" href="#release-notes-2-6-1"></a>2.6.1</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2016-06-05</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This is the eleventh GA release.
It is primarily a bugfix release.
More details on the fixes are itemized below.</p>
</div>
<div class="paragraph">
<p>Note that subsequent to the 2.6 release a minor source incompatibility was found due to the addition of new methods to the <code>Logger</code> interface.
If you have code that does:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">logger.error(null, “This is the log message”, throwable);</code></pre>
</div>
</div>
<div class="paragraph">
<p>or similar with any log level you will get a compiler error saying the reference is ambiguous.
To correct this either do:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">logger.error(“This is the log message”, throwable);</code></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">logger.error((Marker) null, “This is the log message”, throwable);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Log4j 2.6.1 maintains binary compatibility with previous releases.</p>
</div>
<div class="paragraph">
<p>Log4j 2.6.1 requires a minimum of Java 7 to build and run.
Log4j 2.3 was the last release that supported Java 6.</p>
</div>
<div class="paragraph">
<p>Basic compatibility with Log4j 1.x is provided through the <code>log4j-1.2-api</code> component, however it does
not implement some of the very implementation specific classes and methods.
The package names and Maven <code>groupId</code> have been changed to <code>org.apache.logging.log4j</code> to avoid any conflicts with Log4j 1.x.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-6-1-added"><a class="anchor" href="#release-notes-2-6-1-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Added documentation about plugin builders compared to factories. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1411">LOG4J2-1411</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-6-1-changed"><a class="anchor" href="#release-notes-2-6-1-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>(GC) CSV layouts should not create a new CSVPrinter for each log event. Requires Apache Commons CSV 1.4. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1385">LOG4J2-1385</a>)</p>
</li>
<li>
<p>Update liquibase-core from 3.4.2 to 3.5.1. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1398">LOG4J2-1398</a>)</p>
</li>
<li>
<p>Update Apache Commons CSV from 1.3 to 1.4. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1399">LOG4J2-1399</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-6-1-fixed"><a class="anchor" href="#release-notes-2-6-1-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Changed RenameAction to use java.nio to better report rename failures. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1032">LOG4J2-1032</a>)</p>
</li>
<li>
<p>Logger cache now accounts for message factory. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1180">LOG4J2-1180</a>)</p>
</li>
<li>
<p>Fixed minor issues with the 2.6 website. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1394">LOG4J2-1394</a>)</p>
</li>
<li>
<p>Fix regression in properties configuration to support arbitrary component ids. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1402">LOG4J2-1402</a>)</p>
</li>
<li>
<p>OnStartupTriggeringPolicy was forcing a rollover of empty files at startup and would append a second footer that was added by the prior shutdown. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1405">LOG4J2-1405</a>)</p>
</li>
<li>
<p>Fixed bug in ReusableParameterizedMessage where Throwable was never updated so first error was logged over and over again and subsequent errors were not logged. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1406">LOG4J2-1406</a>)</p>
</li>
<li>
<p>Fixed misleading WARN log events from Log4j about message factories and unexpected formatting. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1407">LOG4J2-1407</a>)</p>
</li>
<li>
<p>Added the module log4j-liquibase to BOM POM. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1408">LOG4J2-1408</a>)</p>
</li>
<li>
<p>Fixed ArrayIndexOutOfBoundsException that may occur in ReusableParameterizedMessage. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1409">LOG4J2-1409</a>)</p>
</li>
<li>
<p>Add filter and remove filter were not working properly in AbstractFilterable. (<a href="https://issues.apache.org/jira/browse/LOG4J2-997">LOG4J2-997</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-6"><a class="anchor" href="#release-notes-2-6"></a>2.6</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2016-05-25</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This is the tenth GA release.
It contains several bugfixes and new features.
The new features include the ability to be <em>garbage-free</em> (avoid allocating temporary objects) while logging if certain conditions are met, a new YAML Layout, the ability to merge configuration files, and documenting Log4j&#8217;s performance against other logging frameworks and in various logging configurations.
More details on the features and bugfixes are itemized below.</p>
</div>
<div class="paragraph">
<p>Note that subsequent to the release a minor source incompatibility was found due to the addition of new methods to the <code>Logger</code> interface.
If you have code that does:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">logger.error(null, “This is the log message”, throwable);</code></pre>
</div>
</div>
<div class="paragraph">
<p>or similar with any log level you will get a compiler error saying the reference is ambiguous.
To correct this either do:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">logger.error(“This is the log message”, throwable);</code></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">logger.error((Marker) null, “This is the log message”, throwable);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Log4j 2.6 maintains binary compatibility with previous releases.</p>
</div>
<div class="paragraph">
<p>Log4j 2.6 requires a minimum of Java 7 to build and run.
Log4j 2.3 was the last release that supported Java 6.</p>
</div>
<div class="paragraph">
<p>Basic compatibility with Log4j 1.x is provided through the <code>log4j-1.2-api</code> component, however it does
not implement some of the very implementation specific classes and methods.
The package names and Maven <code>groupId</code> have been changed to <code>org.apache.logging.log4j</code> to avoid any conflicts with Log4j 1.x.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-6-added"><a class="anchor" href="#release-notes-2-6-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Document dependencies for layouts. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1011">LOG4J2-1011</a>)</p>
</li>
<li>
<p>Added option to discard events below a certain log level if the async logger ring buffer or async appender queue is full. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1080">LOG4J2-1080</a>)</p>
</li>
<li>
<p>Add JNDI lookup documentation. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1133">LOG4J2-1133</a>)</p>
</li>
<li>
<p>PatternLayout: Possible variable substitution in equals substitution parameter. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1169">LOG4J2-1169</a>)</p>
</li>
<li>
<p>Documented benchmark results comparing Log4j 2 performance to other logging libraries. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1179">LOG4J2-1179</a>)</p>
</li>
<li>
<p>Dynamic Subject for SMTP Appender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1192">LOG4J2-1192</a>)</p>
</li>
<li>
<p>PatternLayout option to limit length of text. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1217">LOG4J2-1217</a>)</p>
</li>
<li>
<p>Added async logger Timeout wait strategy and made this the default wait strategy for async loggers. This prevents a rare deadlock that may occur on Solaris. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1221">LOG4J2-1221</a>)</p>
</li>
<li>
<p>Make PatternLayout header and footer accept a pattern. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1237">LOG4J2-1237</a>)</p>
</li>
<li>
<p>Make header and footer values customizable in JSONLayout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1244">LOG4J2-1244</a>)</p>
</li>
<li>
<p>Make CSV Layout header and footers accept patterns. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1245">LOG4J2-1245</a>)</p>
</li>
<li>
<p>Add shutdown methods to LogManager. (<a href="https://issues.apache.org/jira/browse/LOG4J2-124">LOG4J2-124</a>)</p>
</li>
<li>
<p>JeroMqAppender should support layouts. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1252">LOG4J2-1252</a>)</p>
</li>
<li>
<p>(GC) Added support for garbage-free logging in steady state. This includes Async Loggers and logging synchronously to the console and to a file, but does not include the AsyncAppender. This release makes the GelfLayout and the main patterns in the PatternLayout garbage-free. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1270">LOG4J2-1270</a>)</p>
</li>
<li>
<p>(GC) Add MessageFactory that avoid allocation by reusing a cached ParameterizedMessage instance. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1271">LOG4J2-1271</a>)</p>
</li>
<li>
<p>(GC) Add encode(LogEvent, ByteBufferDestination) method to Layout API to enable converting LogEvents to bytes without creating temporary objects. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1274">LOG4J2-1274</a>)</p>
</li>
<li>
<p>FormattedMessage, MessageFormatMessage and StringFormattedMessage should support passing in a Locale to ensure appropriate formatting. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1277">LOG4J2-1277</a>)</p>
</li>
<li>
<p>(GC) Added unrolled varargs methods to Logger API, added Unbox utility to avoid auto-boxing when logging primitive values. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1278">LOG4J2-1278</a>)</p>
</li>
<li>
<p>(GC) Add interface StringBuilderFormattable to enable converting Messages and parameters to text without allocating temporary objects. ParameterizedMessage, ObjectMessage, SimpleMessage and ThreadDumpMessage now implement StringBuilderFormattable. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1293">LOG4J2-1293</a>)</p>
</li>
<li>
<p>(GC) Added manual page on garbage-free logging. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1297">LOG4J2-1297</a>)</p>
</li>
<li>
<p>Add pattern converter for thread id and priority in PatternLayout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1299">LOG4J2-1299</a>)</p>
</li>
<li>
<p>Add documentation links to runtime dependencies in each component intro page. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1303">LOG4J2-1303</a>)</p>
</li>
<li>
<p>(GC) Added methods to the Logger interface for logging CharSequence messages. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1326">LOG4J2-1326</a>)</p>
</li>
<li>
<p>(GC) FileAppender, RollingFileAppender and MemoryMappedFileAppender are now also garbage-free by default. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1344">LOG4J2-1344</a>)</p>
</li>
<li>
<p>Add an AutoCloseable ThreadContext class: CloseableThreadContext. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1348">LOG4J2-1348</a>)</p>
</li>
<li>
<p>Option to not log stack traces for logged Throwables in GelfLayout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1357">LOG4J2-1357</a>)</p>
</li>
<li>
<p>Added a YAML layout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1362">LOG4J2-1362</a>)</p>
</li>
<li>
<p>(GC) Update Logger wrapper Generator tool to generate methods for the new Logger methods. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1373">LOG4J2-1373</a>)</p>
</li>
<li>
<p>Support merging configurations to for a composite configuration. (<a href="https://issues.apache.org/jira/browse/LOG4J2-494">LOG4J2-494</a>)</p>
</li>
<li>
<p>Pattern to drop first N package parts. (<a href="https://issues.apache.org/jira/browse/LOG4J2-621">LOG4J2-621</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-6-changed"><a class="anchor" href="#release-notes-2-6-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>org.apache.logging.log4j.core.LoggerContext#updateLoggers should call firePropertyChangeEvent. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1206">LOG4J2-1206</a>)</p>
</li>
<li>
<p>Update SLF4J from 1.7.12 to 1.7.13. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1219">LOG4J2-1219</a>)</p>
</li>
<li>
<p>Misleading Value In Properties Example. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1233">LOG4J2-1233</a>)</p>
</li>
<li>
<p>Update Jackson from 2.6.3 to 2.6.4. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1239">LOG4J2-1239</a>)</p>
</li>
<li>
<p>Update Liquibase from 3.3.5 to 3.4.2. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1240">LOG4J2-1240</a>)</p>
</li>
<li>
<p>Update Jackson from 2.6.4 to 2.7.0. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1249">LOG4J2-1249</a>)</p>
</li>
<li>
<p>Update LMAX Disruptor from 3.3.2 to 3.3.4. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1253">LOG4J2-1253</a>)</p>
</li>
<li>
<p>Add enhanced entry and exit methods. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1255">LOG4J2-1255</a>)</p>
</li>
<li>
<p>(GC) ParameterizedMessage optimizations to avoid or at least postpone allocating temporary objects. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1271">LOG4J2-1271</a>)</p>
</li>
<li>
<p>(GC) Improve LoggerConfig&#8217;s data structure for AppenderControl objects to avoid allocating temporary objects during traversal for each log event. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1272">LOG4J2-1272</a>)</p>
</li>
<li>
<p>(GC) Provide ThreadLocal-based gc-free caching mechanism in DatePatternConverter for non-webapps. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1283">LOG4J2-1283</a>)</p>
</li>
<li>
<p>(GC) Update PatternLayout to utilize gc-free mechanism for LogEvent processing. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1291">LOG4J2-1291</a>)</p>
</li>
<li>
<p>(GC) Update RandomAccessFileAppender and RollingRandomAccessFileAppender to utilize gc-free Layout.encode() method. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1292">LOG4J2-1292</a>)</p>
</li>
<li>
<p>Update Kafka client from 0.9.0.0 to 0.9.0.1. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1294">LOG4J2-1294</a>)</p>
</li>
<li>
<p>Remove serializability from classes that don&#8217;t need it. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1300">LOG4J2-1300</a>)</p>
</li>
<li>
<p>Update Jackson from 2.7.0 to 2.7.2. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1304">LOG4J2-1304</a>)</p>
</li>
<li>
<p>JeroMqAppender should use ShutdownCallbackRegistry instead of runtime hooks. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1306">LOG4J2-1306</a>)</p>
</li>
<li>
<p>Remove need to pre-specify appender et al. identifiers in property file config format. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1308">LOG4J2-1308</a>)</p>
</li>
<li>
<p>(GC) Avoid allocating unnecessary temporary objects in LoggerContext&#8217;s getLogger methods. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1318">LOG4J2-1318</a>)</p>
</li>
<li>
<p>(GC) Avoid allocating unnecessary temporary objects in PatternLayout&#8217;s NamePatternConverter and ClassNamePatternConverter. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1321">LOG4J2-1321</a>)</p>
</li>
<li>
<p>Update Log4j 1.x migration guide to include information about system property lookup syntax changes. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1322">LOG4J2-1322</a>)</p>
</li>
<li>
<p>(GC) Avoid allocating unnecessary temporary objects in MarkerManager&#8217;s getMarker methods. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1333">LOG4J2-1333</a>)</p>
</li>
<li>
<p>(GC) ConsoleAppender is now garbage-free by default. This logic is reusable for all AbstractOutputStreamAppender subclasses. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1343">LOG4J2-1343</a>)</p>
</li>
<li>
<p>(Doc) Clarify documentation for properties that control Log4j behaviour. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1345">LOG4J2-1345</a>)</p>
</li>
<li>
<p>Update Jackson from 2.7.2 to 2.7.3. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1351">LOG4J2-1351</a>)</p>
</li>
<li>
<p>Update javax.mail from 1.5.4 to 1.5.5. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1352">LOG4J2-1352</a>)</p>
</li>
<li>
<p>(GC) GelfLayout does now support garbage-free logging (with compressionType=OFF). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1356">LOG4J2-1356</a>)</p>
</li>
<li>
<p>Update Apache Commons Compress from 1.10 to 1.11. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1358">LOG4J2-1358</a>)</p>
</li>
<li>
<p>(Log4j-internal) Provide message text as CharSequence for some message types to optimize some layouts. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1365">LOG4J2-1365</a>)</p>
</li>
<li>
<p>Migrate tests from Logback 1.1.3 to 1.1.7. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1374">LOG4J2-1374</a>)</p>
</li>
<li>
<p>Update SLF4J from 1.7.13 to 1.7.21. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1375">LOG4J2-1375</a>)</p>
</li>
<li>
<p>Update Jackson from 2.7.3 to 2.7.4. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1380">LOG4J2-1380</a>)</p>
</li>
<li>
<p>Update Apache Commons CSV from 1.2 to 1.3. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1384">LOG4J2-1384</a>)</p>
</li>
<li>
<p>Update Google java-allocation-instrumenter from 3.0 to 3.0.1. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1388">LOG4J2-1388</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-6-fixed"><a class="anchor" href="#release-notes-2-6-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Add a Log4jLookup class to help write log files relative to log4j2.xml. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1050">LOG4J2-1050</a>)</p>
</li>
<li>
<p>Fix documentation to specify the correct default wait strategy used by async loggers. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1212">LOG4J2-1212</a>)</p>
</li>
<li>
<p>Documentation/XSD inconsistencies. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1215">LOG4J2-1215</a>)</p>
</li>
<li>
<p>Creation of a LoggerContext will fail if shutdown is in progress. LogManager will default to SimpleLogger instead. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1222">LOG4J2-1222</a>)</p>
</li>
<li>
<p>NullPointerException in MapLookup.lookup if the event is null. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1227">LOG4J2-1227</a>)</p>
</li>
<li>
<p>Don&#8217;t concatenate SYSLOG Messages. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1230">LOG4J2-1230</a>)</p>
</li>
<li>
<p>Incorrect log rotation in last week of year. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1232">LOG4J2-1232</a>)</p>
</li>
<li>
<p>org.apache.logging.log4j.core.net.TcpSocketManager and other classes does not report internal exceptions to the status logger. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1238">LOG4J2-1238</a>)</p>
</li>
<li>
<p>Fixed broken nanotime in pattern layout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1248">LOG4J2-1248</a>)</p>
</li>
<li>
<p>Fix JUL bridge issue where LogRecord.getParameters() is used when null. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1251">LOG4J2-1251</a>)</p>
</li>
<li>
<p>Fix typo in Flow Tracing documentation. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1254">LOG4J2-1254</a>)</p>
</li>
<li>
<p>Async DynamicThresholdFilter does not use the log event&#8217;s context map. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1258">LOG4J2-1258</a>)</p>
</li>
<li>
<p>TlsSyslogFrame calculates message length incorrectly. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1260">LOG4J2-1260</a>)</p>
</li>
<li>
<p>Stop throwing unnecessary exception in Log4jServletContextListener.contextDestroyed(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1262">LOG4J2-1262</a>)</p>
</li>
<li>
<p>The ConfigurationSource was not saved for BuiltConfigurations so monitor interval had no effect. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1263">LOG4J2-1263</a>)</p>
</li>
<li>
<p>FixedDateFormat was incorrect for formats having MMM with the French locale. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1268">LOG4J2-1268</a>)</p>
</li>
<li>
<p>(GC) AsyncLogger should use thread-local translator by default. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1269">LOG4J2-1269</a>)</p>
</li>
<li>
<p>Fix RollingAppenderNoUnconditionalDeleteTest repeat test runs from failing. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1275">LOG4J2-1275</a>)</p>
</li>
<li>
<p>LoggerMessageSupplierTest and LoggerSupplierTest are Locale sensitive. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1276">LOG4J2-1276</a>)</p>
</li>
<li>
<p>Deprecate org.apache.logging.log4j.util.MessageSupplier. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1280">LOG4J2-1280</a>)</p>
</li>
<li>
<p>Logger methods taking Supplier parameters now correctly handle cases where the supplied value is a Message. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1280">LOG4J2-1280</a>)</p>
</li>
<li>
<p>(GC) LoggerConfig.getProperties() should not allocate on each call. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1281">LOG4J2-1281</a>)</p>
</li>
<li>
<p>Made default MessageFactory configurable. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1284">LOG4J2-1284</a>)</p>
</li>
<li>
<p>Change flow logging text from "entry' to "Enter" and "exit" to "Exit". (<a href="https://issues.apache.org/jira/browse/LOG4J2-1289">LOG4J2-1289</a>)</p>
</li>
<li>
<p>Configuration file error does not show cause exception. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1309">LOG4J2-1309</a>)</p>
</li>
<li>
<p>JndiLookup mindlessly casts to String and should use String.valueOf(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1310">LOG4J2-1310</a>)</p>
</li>
<li>
<p>Improve error handling in the Async Logger background thread: the new default exception handler no longer rethrows the error. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1324">LOG4J2-1324</a>)</p>
</li>
<li>
<p>Fix NoClassDefFoundError in ReflectionUtil on Google App Engine. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1330">LOG4J2-1330</a>)</p>
</li>
<li>
<p>LoggerFactory in 1.2 API module is not compatible with 1.2. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1336">LOG4J2-1336</a>)</p>
</li>
<li>
<p>(Perf) AsyncLogger performance optimization: avoid calling instanceof TimestampMessage in hot path. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1339">LOG4J2-1339</a>)</p>
</li>
<li>
<p>Exception from Log4jServletContextListener prevents jetty-maven-plugin run-forked. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1346">LOG4J2-1346</a>)</p>
</li>
<li>
<p>No configuration reload is triggered under Windows when replacing the configuration file with one that has older last modified date. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1354">LOG4J2-1354</a>)</p>
</li>
<li>
<p>Properties Configuration did not support includeLocation attribute on Loggers. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1363">LOG4J2-1363</a>)</p>
</li>
<li>
<p>(Log4j-internal) StatusLogger dropped exceptions when logging parameterized messages. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1368">LOG4J2-1368</a>)</p>
</li>
<li>
<p>"xz" compression results in plaintext, uncompressed files. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1369">LOG4J2-1369</a>)</p>
</li>
<li>
<p>XMLLayout indents, but not the first child tag (Event). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1372">LOG4J2-1372</a>)</p>
</li>
<li>
<p>Copying a MutableLogEvent using Log4jLogEvent.Builder should not unnecessarily obtain caller location information. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1382">LOG4J2-1382</a>)</p>
</li>
<li>
<p>Fixed memory leak related to shutdown hook. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1387">LOG4J2-1387</a>)</p>
</li>
<li>
<p>Log4jWebInitializerImpl: Use Thread instead of Class for fallback classloader. (<a href="https://issues.apache.org/jira/browse/LOG4J2-248">LOG4J2-248</a>)</p>
</li>
<li>
<p>Generate MDC properties as a JSON map in JSONLayout, with option to output as list of map entries. (<a href="https://issues.apache.org/jira/browse/LOG4J2-623">LOG4J2-623</a>)</p>
</li>
<li>
<p>JSONLayout doesn&#8217;t add a comma between log events. (<a href="https://issues.apache.org/jira/browse/LOG4J2-908">LOG4J2-908</a>)</p>
</li>
<li>
<p>ClassNotFoundException for BundleContextSelector when initialising in an OSGi environment. (<a href="https://issues.apache.org/jira/browse/LOG4J2-920">LOG4J2-920</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-5"><a class="anchor" href="#release-notes-2-5"></a>2.5</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2015-12-06</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This is the ninth GA release.
It contains several bugfixes and new features.
The new features include the ability to specify delete actions during file rollover, a CRON-based
triggering policy for file rollover, support for JSR 223 scripts in filters, pattern selectors and delete actions, and a policy for removing idle appenders from the <code>RoutingAppender</code>.
More details on the features and bugfixes are itemized below.</p>
</div>
<div class="paragraph">
<p>Log4j 2.5 requires a minimum of Java 7 to build and run.
Log4j 2.3 was the last release that supported Java 6.</p>
</div>
<div class="paragraph">
<p>Basic compatibility with Log4j 1.x is provided through the <code>log4j-1.2-api</code> component, however it does
not implement some of the very implementation specific classes and methods.
The package names and Maven <code>groupId</code> have been changed to <code>org.apache.logging.log4j</code> to avoid any conflicts with Log4j 1.x.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-5-added"><a class="anchor" href="#release-notes-2-5-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Add support for JSR 223 scripts in filters and the PatternSelector. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1136">LOG4J2-1136</a>)</p>
</li>
<li>
<p>Add getters for source and destination file in file rename action. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1168">LOG4J2-1168</a>)</p>
</li>
<li>
<p>Add getters for classes in org.apache.logging.log4j.core.appender.rolling.action. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1175">LOG4J2-1175</a>)</p>
</li>
<li>
<p>Support use-case for JDBC&#8217;s CommonDataSource.setLogWriter(PrintWriter) and java.sql.DriverManager.setLogWriter(PrintWriter). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1178">LOG4J2-1178</a>)</p>
</li>
<li>
<p>Support use case for java.sql.DriverManager.setLogStream(PrintStream). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1187">LOG4J2-1187</a>)</p>
</li>
<li>
<p>Added support for custom delete actions triggered by a rollover. (<a href="https://issues.apache.org/jira/browse/LOG4J2-435">LOG4J2-435</a>)</p>
</li>
<li>
<p>Added system property to allow users to control whether messages should be formatted in the background. (<a href="https://issues.apache.org/jira/browse/LOG4J2-898">LOG4J2-898</a>)</p>
</li>
<li>
<p>Allow rollover to occur at any time. Add CronTriggeringPolicy. (<a href="https://issues.apache.org/jira/browse/LOG4J2-89">LOG4J2-89</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-5-changed"><a class="anchor" href="#release-notes-2-5-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Update Jackson from 2.6.2 to 2.6.3. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1174">LOG4J2-1174</a>)</p>
</li>
<li>
<p>Remove ConfigurationMonitor. The WatchManager is now used to check for configuration changes. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1202">LOG4J2-1202</a>)</p>
</li>
<li>
<p>Update kafka-clients from 0.8.2.2 to 0.9.0.0. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1207">LOG4J2-1207</a>)</p>
</li>
<li>
<p>Add PurgePolicy and IdlePurgePolicy to RoutingAppender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-649">LOG4J2-649</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-5-fixed"><a class="anchor" href="#release-notes-2-5-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Performance improvement when gathering location information. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1029">LOG4J2-1029</a>)</p>
</li>
<li>
<p>Web site corrections and updates. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1156">LOG4J2-1156</a>)</p>
</li>
<li>
<p>Fix compilation error for classes annotated with @Plugin. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1157">LOG4J2-1157</a>)</p>
</li>
<li>
<p>Log4J JUL adapter is using MessageFormat on String passed by java.util.function.Supplier&lt;String&gt;. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1158">LOG4J2-1158</a>)</p>
</li>
<li>
<p>Fixed a ThreadLocal memory leak in Tomcat8 that mentions AsyncLoggers when Async Loggers are not used. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1159">LOG4J2-1159</a>)</p>
</li>
<li>
<p>Improve Log4j initialization status messages. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1165">LOG4J2-1165</a>)</p>
</li>
<li>
<p>AbstractConfiguration executor should use a DaemonThreadFactory. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1166">LOG4J2-1166</a>)</p>
</li>
<li>
<p>Use servlet context name for logger context name when available. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1171">LOG4J2-1171</a>)</p>
</li>
<li>
<p>Fixed ThreadLocal leak [AsyncLogger$Info] on Tomcat when using AsyncLoggerContextSelector. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1172">LOG4J2-1172</a>)</p>
</li>
<li>
<p>Fixed rollover error when copying to a directory mapped to a remote Linux host. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1173">LOG4J2-1173</a>)</p>
</li>
<li>
<p>Fixed memory leak when log4j jars are in Tomcat&#8217;s lib folder. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1176">LOG4J2-1176</a>)</p>
</li>
<li>
<p>Logger cache does not account for message factory. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1180">LOG4J2-1180</a>)</p>
</li>
<li>
<p>Prefix all thread names Log4j creates with "Log4j2-". (<a href="https://issues.apache.org/jira/browse/LOG4J2-1193">LOG4J2-1193</a>)</p>
</li>
<li>
<p>Documentation does not match parameters for LoggerNameLevelRewritePolicy. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1194">LOG4J2-1194</a>)</p>
</li>
<li>
<p>Make KafkaAppender support SerializedLayout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1195">LOG4J2-1195</a>)</p>
</li>
<li>
<p>MongoDbConnection does not close MongoClient. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1196">LOG4J2-1196</a>)</p>
</li>
<li>
<p>Better web app support for async loggers: Fixed a memory leak that occurred when the logging jars are placed in the container&#8217;s classpath and the configuration file uses AsyncRoot/AsyncLogger. The problem was that the first web application started the Disruptor background thread [AsyncLoggerConfig-1] but did not stop it until all web apps are stopped. Each web application now has its own Disruptor which is stopped/started together with the web app. (<a href="https://issues.apache.org/jira/browse/LOG4J2-323">LOG4J2-323</a>)</p>
</li>
<li>
<p>Reduced memory usage of status messages in bounded queue; support zero-length queue that stores no messages. (<a href="https://issues.apache.org/jira/browse/LOG4J2-324">LOG4J2-324</a>)</p>
</li>
<li>
<p>Allow triggering policy and rollover strategy to be modified during reconfiguration. (<a href="https://issues.apache.org/jira/browse/LOG4J2-381">LOG4J2-381</a>)</p>
</li>
<li>
<p>Better web app support for async loggers: it is now possible to place the logging jars in the container&#8217;s classpath when making all loggers asynchronous by using AsyncLoggerContextSelector. This fixes a problem where logging would stop working after stopping and restarting a web application. (<a href="https://issues.apache.org/jira/browse/LOG4J2-493">LOG4J2-493</a>)</p>
</li>
<li>
<p>org.apache.logging.log4j.core.Logger should be serializable. (<a href="https://issues.apache.org/jira/browse/LOG4J2-801">LOG4J2-801</a>)</p>
</li>
<li>
<p>Fixed bug where omitting the &lt;display-name&gt; element in web.xml caused incorrect log4j initialization, resulting in memory leaks when the web application was stopped or reloaded. (<a href="https://issues.apache.org/jira/browse/LOG4J2-873">LOG4J2-873</a>)</p>
</li>
<li>
<p>Documentation: fixed minor issues with the site and manual pages. (<a href="https://issues.apache.org/jira/browse/LOG4J2-879">LOG4J2-879</a>)</p>
</li>
<li>
<p>Fix plugin documentation error about Converters. (<a href="https://issues.apache.org/jira/browse/LOG4J2-948">LOG4J2-948</a>)</p>
</li>
<li>
<p>RollingFileAppender should also roll over when log event time is equal to rollover time, not only when later. (<a href="https://issues.apache.org/jira/browse/LOG4J2-999">LOG4J2-999</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-4-1"><a class="anchor" href="#release-notes-2-4-1"></a>2.4.1</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2015-10-08</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This is the ninth GA release.
It contains several bugfixes and new features.
Log4j 2 requires a minimum of Java 7.</p>
</div>
<div class="paragraph">
<p>Log4j 2.4.1 requires a minimum of Java 7 to build and run.
Log4j 2.4 and greater requires Java 7, version 2.3 required Java 6.</p>
</div>
<div class="paragraph">
<p>Basic compatibility with Log4j 1.x is provided through the <code>log4j-1.2-api</code> component, however it does
not implement some of the very implementation specific classes and methods.
The package names and Maven <code>groupId</code> have been changed to <code>org.apache.logging.log4j</code> to avoid any conflicts with Log4j 1.x.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-4-1-added"><a class="anchor" href="#release-notes-2-4-1-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Add possibility to set shutdown timeout on AsyncAppender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1020">LOG4J2-1020</a>)</p>
</li>
<li>
<p>Allow PatternLayout to select a pattern to use based on some selection criteria. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1129">LOG4J2-1129</a>)</p>
</li>
<li>
<p>Add %equals to PatternLayout to test and replace patterns with strings. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1145">LOG4J2-1145</a>)</p>
</li>
<li>
<p>Add %notEmpty to PatternLayout to avoid output of patterns where all variables are empty. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1146">LOG4J2-1146</a>)</p>
</li>
<li>
<p>Add %equalsIgnoreCase to PatternLayout to test and replace patterns with strings. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1147">LOG4J2-1147</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-4-1-changed"><a class="anchor" href="#release-notes-2-4-1-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Update MongoDB driver from 2.13.3 to 3.0.4. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1040">LOG4J2-1040</a>)</p>
</li>
<li>
<p>Reuse StringBuilder to improve performance for String-based layouts: CSV, GELF, HTML, RFC524, Syslog. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1128">LOG4J2-1128</a>)</p>
</li>
<li>
<p>Update mongo-java-driver from 2.13.2 to 2.13.3. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1131">LOG4J2-1131</a>)</p>
</li>
<li>
<p>Do not use Jackson deprecated methods. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1138">LOG4J2-1138</a>)</p>
</li>
<li>
<p>Update Jackson from 2.6.1 to 2.6.2. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1139">LOG4J2-1139</a>)</p>
</li>
<li>
<p>Update kafka-clients from 0.8.2.1 to 0.8.2.2. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1150">LOG4J2-1150</a>)</p>
</li>
<li>
<p>Performance improvement: backport Java 8 fast ISO-8859-1 String to byte[] encoder to AbstractStringLayout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1151">LOG4J2-1151</a>)</p>
</li>
<li>
<p>Performance improvement when converting Strings to byte[] arrays. (<a href="https://issues.apache.org/jira/browse/LOG4J2-935">LOG4J2-935</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-4-1-fixed"><a class="anchor" href="#release-notes-2-4-1-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Fixed Log4jLookup. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1050">LOG4J2-1050</a>)</p>
</li>
<li>
<p>Web site corrections and updates. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1126">LOG4J2-1126</a>)</p>
</li>
<li>
<p>log4j2.xml cannot be parsed on Oracle Weblogic 12c. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1127">LOG4J2-1127</a>)</p>
</li>
<li>
<p>Do not use MongoDB driver 2.13.3 deprecated methods. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1132">LOG4J2-1132</a>)</p>
</li>
<li>
<p>Compression on rollover was broken: log file was renamed to .zip but not compressed. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1135">LOG4J2-1135</a>)</p>
</li>
<li>
<p>Fixed bug where headers were not being written to first file with RollingFileAppender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1140">LOG4J2-1140</a>)</p>
</li>
<li>
<p>Fix potential memory leak in web applications by using a straight ThreadLocal field instead of subclassing ThreadLocal. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1142">LOG4J2-1142</a>)</p>
</li>
<li>
<p>Add %markerSimpleName in pattern layout should evaluate to marker name (not toString()). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1144">LOG4J2-1144</a>)</p>
</li>
<li>
<p>Fixed bug where PatternLayout predefined date pattern with time zone always renders default date format. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1149">LOG4J2-1149</a>)</p>
</li>
<li>
<p>Fixed NullPointerException when only root logger is defined (and no named loggers) in configuration properties file. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1153">LOG4J2-1153</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-4"><a class="anchor" href="#release-notes-2-4"></a>2.4</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is the eighth GA release.
It contains several bugfixes and new features.
As of this release Log4j now requires a minimum of Java 7.</p>
</div>
<div class="paragraph">
<p>Log4j 2.4 requires a minimum of Java 7 to build and run.
Log4j 2.4 and greater requires Java 7, version 2.3 required Java 6.</p>
</div>
<div class="paragraph">
<p>Basic compatibility with Log4j 1.x is provided through the <code>log4j-1.2-api</code> component, however it does
not implement some of the very implementation specific classes and methods.
The package names and Maven <code>groupId</code> have been changed to <code>org.apache.logging.log4j</code> to avoid any conflicts with Log4j 1.x.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-4-added"><a class="anchor" href="#release-notes-2-4-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Add a way to route messages based on the %marker in Layout for RoutingAppender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1015">LOG4J2-1015</a>)</p>
</li>
<li>
<p>New RewritePolicy for changing level of a log event. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1023">LOG4J2-1023</a>)</p>
</li>
<li>
<p>Add a Log4jLookup class to help write log files relative to log4j2.xml. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1050">LOG4J2-1050</a>)</p>
</li>
<li>
<p>Add API org.apache.logging.log4j.LogManager.getFormatterLogger(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1057">LOG4J2-1057</a>)</p>
</li>
<li>
<p>Expose Log4jContextFactory&#8217;s ShutdownCallbackRegistry. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1066">LOG4J2-1066</a>)</p>
</li>
<li>
<p>Added support for system nanosecond time in pattern layout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1074">LOG4J2-1074</a>)</p>
</li>
<li>
<p>Added support for compressing to bzip2 format on file rollover. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1075">LOG4J2-1075</a>)</p>
</li>
<li>
<p>Support additional Apache Commons Compress compression formats on rollover: Deflate, Pack200, XY. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1077">LOG4J2-1077</a>)</p>
</li>
<li>
<p>Add Comma Separated Value (CSV) layouts for parameter and event logging. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1088">LOG4J2-1088</a>)</p>
</li>
<li>
<p>Add Core Configurator APIs to change a logger&#8217;s level. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1090">LOG4J2-1090</a>)</p>
</li>
<li>
<p>Add API org.apache.logging.log4j.Level.isInRange(Level, Level). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1105">LOG4J2-1105</a>)</p>
</li>
<li>
<p>Add a LevelRangeFilter class. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1106">LOG4J2-1106</a>)</p>
</li>
<li>
<p>New Appender for Apache Kafka. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1107">LOG4J2-1107</a>)</p>
</li>
<li>
<p>New publisher Appender for ZeroMQ (using JeroMQ). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1113">LOG4J2-1113</a>)</p>
</li>
<li>
<p>Updated Logger wrapper generator tool to add Java 8 lambda support for custom log levels. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1118">LOG4J2-1118</a>)</p>
</li>
<li>
<p>Added support for Java 8 lambda expressions to lazily construct a log message only if the requested log level is enabled. (<a href="https://issues.apache.org/jira/browse/LOG4J2-599">LOG4J2-599</a>)</p>
</li>
<li>
<p>Add support for configuration via Properties. (<a href="https://issues.apache.org/jira/browse/LOG4J2-635">LOG4J2-635</a>)</p>
</li>
<li>
<p>New module for Liquibase integration. (<a href="https://issues.apache.org/jira/browse/LOG4J2-767">LOG4J2-767</a>)</p>
</li>
<li>
<p>Add ConfigurationBuilder for programmatic configuration. (<a href="https://issues.apache.org/jira/browse/LOG4J2-952">LOG4J2-952</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-4-changed"><a class="anchor" href="#release-notes-2-4-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Pass log event when interpolating logger properties. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1010">LOG4J2-1010</a>)</p>
</li>
<li>
<p>Update Java platform from Java 6 to 7. From this version onwards, log4j 2 requires Java 7. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1017">LOG4J2-1017</a>)</p>
</li>
<li>
<p>Update database tests from H2 1.3.175 to 1.3.176. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1018">LOG4J2-1018</a>)</p>
</li>
<li>
<p>Allow a list of keys to be specified in the MDC pattern converter. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1022">LOG4J2-1022</a>)</p>
</li>
<li>
<p>Log4j2 tries to SystemClassLoader when running on Google AppEngine. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1035">LOG4J2-1035</a>)</p>
</li>
<li>
<p>Update Apache Flume from 1.5.2 to 1.6.0. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1036">LOG4J2-1036</a>)</p>
</li>
<li>
<p>Update MongoDB driver from 2.11.2 to 2.13.2. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1041">LOG4J2-1041</a>)</p>
</li>
<li>
<p>Support batchSize in FlumeAvroManager. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1044">LOG4J2-1044</a>)</p>
</li>
<li>
<p>Avoid creating temporary array object in org.apache.logging.slf4j.Log4jMarker.iterator(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1063">LOG4J2-1063</a>)</p>
</li>
<li>
<p>Define org.apache.logging.log4j.Marker.equals(Object) and org.apache.logging.log4j.Marker.hashCode(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1065">LOG4J2-1065</a>)</p>
</li>
<li>
<p>Update Java Mail from 1.5.2 to 1.5.4. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1070">LOG4J2-1070</a>)</p>
</li>
<li>
<p>Update Jackson from 2.5.3 to 2.5.4. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1079">LOG4J2-1079</a>)</p>
</li>
<li>
<p>Update Jackson from 2.6.0 to 2.6.1. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1092">LOG4J2-1092</a>)</p>
</li>
<li>
<p>Improved performance of ParameterizedMessage::getFormattedMessage by ~2X. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1096">LOG4J2-1096</a>)</p>
</li>
<li>
<p>PatternLayout timestamp formatting performance improvement: predefined date formats (and variants using a period '.' millisecond separator instead of ',') are now formatted ~2-10X faster than other date formats. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1097">LOG4J2-1097</a>)</p>
</li>
<li>
<p>Update Apache Commons Compress from 1.9 to 1.10. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1104">LOG4J2-1104</a>)</p>
</li>
<li>
<p>Add thread name to status logger layout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1114">LOG4J2-1114</a>)</p>
</li>
<li>
<p>LoggerConfig performance improvements: avoid unnecessary lock acquisition, use more efficient data structure. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1120">LOG4J2-1120</a>)</p>
</li>
<li>
<p>PatternLayout performance improvement by caching and reusing a ThreadLocal StringBuilder. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1125">LOG4J2-1125</a>)</p>
</li>
<li>
<p>Update Jackson from 2.5.4 to 2.6.0. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1879">LOG4J2-1879</a>)</p>
</li>
<li>
<p>MongoDB appender, username and password should be optional. (<a href="https://issues.apache.org/jira/browse/LOG4J2-403">LOG4J2-403</a>)</p>
</li>
<li>
<p>PatternLayout timestamp formatting performance improvement: replaced synchronized SimpleDateFormat with Apache Commons FastDateFormat. This and better caching resulted in a ~3-30X faster timestamp formatting. (<a href="https://issues.apache.org/jira/browse/LOG4J2-812">LOG4J2-812</a>)</p>
</li>
<li>
<p>log4j-web-2.1 should work around a bug in JBOSS EAP 6.2. (<a href="https://issues.apache.org/jira/browse/LOG4J2-890">LOG4J2-890</a>)</p>
</li>
<li>
<p>Fix FindBugs DM_DEFAULT_ENCODING bug in SimpleLogger.logMessage() and simplify code. (<a href="https://issues.apache.org/jira/browse/LOG4J2-959">LOG4J2-959</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-4-fixed"><a class="anchor" href="#release-notes-2-4-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>ZipCompressAction leaves files open until GC when an IO error takes place. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1019">LOG4J2-1019</a>)</p>
</li>
<li>
<p>GzCompressAction leaves files open until GC when an IO error takes place. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1020">LOG4J2-1020</a>)</p>
</li>
<li>
<p>Custom java.util.logging.Level gives null Log4j Level and causes NPE. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1025">LOG4J2-1025</a>)</p>
</li>
<li>
<p>HighlightConverter does not obey noConsoleNoAnsi. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1026">LOG4J2-1026</a>)</p>
</li>
<li>
<p>SimpleLogger creates unnecessary Map objects by calling ThreadContext.getContext() instead of getImmutableContext(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1033">LOG4J2-1033</a>)</p>
</li>
<li>
<p>Backward compatibility issue in log4j-1.2-api NDC pop() and peek(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1037">LOG4J2-1037</a>)</p>
</li>
<li>
<p>Incorrect documentation for layout default charset. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1038">LOG4J2-1038</a>)</p>
</li>
<li>
<p>Socket and Syslog appenders don&#8217;t take timeout into account at startup. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1042">LOG4J2-1042</a>)</p>
</li>
<li>
<p>Write pending events to Flume when the appender is stopped. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1044">LOG4J2-1044</a>)</p>
</li>
<li>
<p>Externalize log4j2.xml via URL resource. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1045">LOG4J2-1045</a>)</p>
</li>
<li>
<p>Circular Exception cause throws StackOverflowError. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1046">LOG4J2-1046</a>)</p>
</li>
<li>
<p>FileConfigurationMonitor unnecessarily calls System.currentTimeMillis() causing high CPU usage. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1048">LOG4J2-1048</a>)</p>
</li>
<li>
<p>AsyncAppender now resets the thread interrupted flag after catching InterruptedException. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1049">LOG4J2-1049</a>)</p>
</li>
<li>
<p>NoClassDefFoundError when starting app on Google App Engine. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1051">LOG4J2-1051</a>)</p>
</li>
<li>
<p>Log4jMarker#contains(String) does not respect org.slf4j.Marker contract. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1058">LOG4J2-1058</a>)</p>
</li>
<li>
<p>Log4jMarker#contains(Marker) does not respect org.slf4j.Marker contract. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1060">LOG4J2-1060</a>)</p>
</li>
<li>
<p>Log4jMarker#remove(Marker) does not respect org.slf4j.Marker contract. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1061">LOG4J2-1061</a>)</p>
</li>
<li>
<p>Log4jMarker#add(Marker) does not respect org.slf4j.Marker contract. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1062">LOG4J2-1062</a>)</p>
</li>
<li>
<p>org.apache.logging.slf4j.Log4jMarker does not implement org.slf4j.Marker.equals(Object) org.slf4j.Marker.hashCode(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1064">LOG4J2-1064</a>)</p>
</li>
<li>
<p>ThrowableProxy getExtendedStackTraceAsString throws NPE on deserialized nested exceptions. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1067">LOG4J2-1067</a>)</p>
</li>
<li>
<p>Exceptions not logged when using TcpSocketServer + SerializedLayout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1068">LOG4J2-1068</a>)</p>
</li>
<li>
<p>Improper handling of JSON escape chars when deserializing JSON log events. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1069">LOG4J2-1069</a>)</p>
</li>
<li>
<p>GelfLayout throws exception if some log event fields are null. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1078">LOG4J2-1078</a>)</p>
</li>
<li>
<p>Misleading StatusLogger WARN event in LogManager with java.util.Map. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1084">LOG4J2-1084</a>)</p>
</li>
<li>
<p>NullPointerException when passing null to java.util.logging.Logger.setLevel(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-1108">LOG4J2-1108</a>)</p>
</li>
<li>
<p>org.apache.logging.log4j.jul.CoreLogger.setLevel() checks for security permission too late. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1110">LOG4J2-1110</a>)</p>
</li>
<li>
<p>OutputStreamManager in ConsoleAppender leaking managers. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1117">LOG4J2-1117</a>)</p>
</li>
<li>
<p>Fixed potential race condition on reconfiguration. Introduced ReliabilityStrategy to facilitate switching between different mechanisms for preventing log events from being dropped on reconfiguration. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1121">LOG4J2-1121</a>)</p>
</li>
<li>
<p>Core Configurator.initialize(String, ClassLoader, String) fails to work when config location is a file path. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1123">LOG4J2-1123</a>)</p>
</li>
<li>
<p>ExtendedThrowablePatternConverter does not print suppressed exceptions. (<a href="https://issues.apache.org/jira/browse/LOG4J2-684">LOG4J2-684</a>)</p>
</li>
<li>
<p>Header in layout should not be written on application startup if appending to an existing file. Fixes LOG4J2-1030. (<a href="https://issues.apache.org/jira/browse/LOG4J2-889">LOG4J2-889</a>)</p>
</li>
<li>
<p>Clarify documentation for combining async with sync loggers. (<a href="https://issues.apache.org/jira/browse/LOG4J2-918">LOG4J2-918</a>)</p>
</li>
<li>
<p>Circular suppressed Exception throws StackOverflowError. (<a href="https://issues.apache.org/jira/browse/LOG4J2-934">LOG4J2-934</a>)</p>
</li>
<li>
<p>Use System.nanoTime() to measure time intervals. (<a href="https://issues.apache.org/jira/browse/LOG4J2-982">LOG4J2-982</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-4-removed"><a class="anchor" href="#release-notes-2-4-removed"></a>Removed</h3>
<div class="ulist">
<ul>
<li>
<p>Removed experimental interface LevelLogger which got committed to master by mistake.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-3"><a class="anchor" href="#release-notes-2-3"></a>2.3</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2015-05-09</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This is the sixth GA release.
It contains several bugfixes and new features.</p>
</div>
<div class="paragraph">
<p>Log4j 2.3 requires a minimum of Java 6 to build and run.
This will be the last release of Log4j 2 to support Java 6.
Future releases will require a minimum of Java 7.</p>
</div>
<div class="paragraph">
<p>Basic compatibility with Log4j 1.x is provided through the <code>log4j-1.2-api</code> component, however it does
not implement some of the very implementation specific classes and methods.
The package names and Maven <code>groupId</code> have been changed to <code>org.apache.logging.log4j</code> to avoid any conflicts with Log4j 1.x.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-3-added"><a class="anchor" href="#release-notes-2-3-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Truncate from the end of text format modifier. (<a href="https://issues.apache.org/jira/browse/LOG4J2-926">LOG4J2-926</a>)</p>
</li>
<li>
<p>PatternLayout %highlight to support noConsoleNoAnsi like %style. (<a href="https://issues.apache.org/jira/browse/LOG4J2-984">LOG4J2-984</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-3-changed"><a class="anchor" href="#release-notes-2-3-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Update Jackson from 2.5.1 to 2.5.3. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1004">LOG4J2-1004</a>)</p>
</li>
<li>
<p>Update Slf4j from 1.7.7 to 1.7.12. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1005">LOG4J2-1005</a>)</p>
</li>
<li>
<p>Migrate tests from Logback 1.1.2 to 1.1.3. (<a href="https://issues.apache.org/jira/browse/LOG4J2-987">LOG4J2-987</a>)</p>
</li>
<li>
<p>Update LMAX Disruptor from 3.3.0 to 3.3.2. (<a href="https://issues.apache.org/jira/browse/LOG4J2-988">LOG4J2-988</a>)</p>
</li>
<li>
<p>Update tests to use ActiveMQ from 5.10 to 5.11.1. (<a href="https://issues.apache.org/jira/browse/LOG4J2-988">LOG4J2-988</a>)</p>
</li>
<li>
<p>Move UTF-8 constant from Charsets to Constants class. Remove Charsets class. (<a href="https://issues.apache.org/jira/browse/LOG4J2-995">LOG4J2-995</a>)</p>
</li>
<li>
<p>Make org.apache.logging.log4j.core.Logger#updateConfiguration protected. (<a href="https://issues.apache.org/jira/browse/LOG4J2-998">LOG4J2-998</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-3-fixed"><a class="anchor" href="#release-notes-2-3-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>JUL Logger.throwing is mis-mapped to ERROR when it should be TRACE. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1003">LOG4J2-1003</a>)</p>
</li>
<li>
<p>org.apache.logging.log4j.core.util#fileFromUri(URI uri) incorrectly converts '+' characters to spaces. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1007">LOG4J2-1007</a>)</p>
</li>
<li>
<p>org.apache.logging.log4j.core.config.plugins.util.ResolverUtil.extractPath(URL) incorrectly converts '+' characters to spaces. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1008">LOG4J2-1008</a>)</p>
</li>
<li>
<p>Incorrectly defined compressionType parameter to GelfLayout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-1009">LOG4J2-1009</a>)</p>
</li>
<li>
<p>A new StatusLoggerAdmin listener is added to StatusLogger every time the log is reconfigured. (<a href="https://issues.apache.org/jira/browse/LOG4J2-947">LOG4J2-947</a>)</p>
</li>
<li>
<p>StringFormattedMessage serialization is incorrect. (<a href="https://issues.apache.org/jira/browse/LOG4J2-964">LOG4J2-964</a>)</p>
</li>
<li>
<p>System.out no longer works after the Console appender and JANSI are initialized. (<a href="https://issues.apache.org/jira/browse/LOG4J2-965">LOG4J2-965</a>)</p>
</li>
<li>
<p>KeyStoreConfiguration.createKeyStoreConfiguration() ignores keyManagerFactoryAlgorithm. (<a href="https://issues.apache.org/jira/browse/LOG4J2-966">LOG4J2-966</a>)</p>
</li>
<li>
<p>log4j2.component.properties not read for all properties. (<a href="https://issues.apache.org/jira/browse/LOG4J2-967">LOG4J2-967</a>)</p>
</li>
<li>
<p>SyslogLayout contains extra space. (<a href="https://issues.apache.org/jira/browse/LOG4J2-968">LOG4J2-968</a>)</p>
</li>
<li>
<p>Another bad priority in Syslog messages. (<a href="https://issues.apache.org/jira/browse/LOG4J2-971">LOG4J2-971</a>)</p>
</li>
<li>
<p>org.apache.logging.log4j.core.net.ssl.TlsSyslogInputStreamReader does not need to create temp Integer objects. (<a href="https://issues.apache.org/jira/browse/LOG4J2-972">LOG4J2-972</a>)</p>
</li>
<li>
<p>Typo in EventLogger documentation. (<a href="https://issues.apache.org/jira/browse/LOG4J2-974">LOG4J2-974</a>)</p>
</li>
<li>
<p>Using monitorInterval with YAML config file format causes JSONParseException. (<a href="https://issues.apache.org/jira/browse/LOG4J2-976">LOG4J2-976</a>)</p>
</li>
<li>
<p>Numerical overflow in BurstFilter not handled correctly. (<a href="https://issues.apache.org/jira/browse/LOG4J2-980">LOG4J2-980</a>)</p>
</li>
<li>
<p>Incorrect unlock in ProviderUtil. (<a href="https://issues.apache.org/jira/browse/LOG4J2-981">LOG4J2-981</a>)</p>
</li>
<li>
<p>AbstractFilter should not implement equals() and hashCode(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-985">LOG4J2-985</a>)</p>
</li>
<li>
<p>Async root logger config should default includeLocation to false. (<a href="https://issues.apache.org/jira/browse/LOG4J2-991">LOG4J2-991</a>)</p>
</li>
<li>
<p>Deadlock would occur if appender thread creates a new Logger during reconfiguration. (<a href="https://issues.apache.org/jira/browse/LOG4J2-993">LOG4J2-993</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-2"><a class="anchor" href="#release-notes-2-2"></a>2.2</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2015-02-22</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This is the fifth GA release.
It contains several bugfixes and new features.</p>
</div>
<div class="paragraph">
<p>Log4j 2.2 requires a minimum of Java 6 to build and run.
Future releases may require a minimum of Java 7.</p>
</div>
<div class="paragraph">
<p>Basic compatibility with Log4j 1.x is provided through the <code>log4j-1.2-api</code> component, however it does
not implement some of the very implementation specific classes and methods.
The package names and Maven <code>groupId</code> have been changed to <code>org.apache.logging.log4j</code> to avoid any conflicts with Log4j 1.x.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-2-added"><a class="anchor" href="#release-notes-2-2-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Specify the SyslogAppender connect timeout value as part of the configuration. The SyslogAppender takes a new parameter connectTimeoutMillis. (<a href="https://issues.apache.org/jira/browse/LOG4J2-895">LOG4J2-895</a>)</p>
</li>
<li>
<p>Specify the SocketAppender connect timeout value as part of the configuration. The SyslogAppender takes a new parameter connectTimeoutMillis. (<a href="https://issues.apache.org/jira/browse/LOG4J2-899">LOG4J2-899</a>)</p>
</li>
<li>
<p>HTML layout should not use attribute minimalization for hr noshade. (<a href="https://issues.apache.org/jira/browse/LOG4J2-933">LOG4J2-933</a>)</p>
</li>
<li>
<p>Allow JSON layout to create one compact log record per line. (<a href="https://issues.apache.org/jira/browse/LOG4J2-941">LOG4J2-941</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-2-changed"><a class="anchor" href="#release-notes-2-2-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Update Jackson from 2.4.2 to 2.4.3. (<a href="https://issues.apache.org/jira/browse/LOG4J2-881">LOG4J2-881</a>)</p>
</li>
<li>
<p>Update maven-core from 3.1.0 to 3.2.3. (<a href="https://issues.apache.org/jira/browse/LOG4J2-882">LOG4J2-882</a>)</p>
</li>
<li>
<p>Update tests from org.apache.felix.framework 4.2.1 to 4.4.1. (<a href="https://issues.apache.org/jira/browse/LOG4J2-883">LOG4J2-883</a>)</p>
</li>
<li>
<p>Update org.eclipse.osgi from 3.6.0 to 3.7.1. (<a href="https://issues.apache.org/jira/browse/LOG4J2-884">LOG4J2-884</a>)</p>
</li>
<li>
<p>Update Apache Flume from 1.5.0.1 to 1.5.2. (<a href="https://issues.apache.org/jira/browse/LOG4J2-900">LOG4J2-900</a>)</p>
</li>
<li>
<p>Update docs for SyslogAppender: "No structured id name was supplied" (<a href="https://issues.apache.org/jira/browse/LOG4J2-901">LOG4J2-901</a>)</p>
</li>
<li>
<p>Update Jackson from 2.4.3 to 2.4.4. (<a href="https://issues.apache.org/jira/browse/LOG4J2-910">LOG4J2-910</a>)</p>
</li>
<li>
<p>Update from Jackson 2.4.4 to 2.5.0. (<a href="https://issues.apache.org/jira/browse/LOG4J2-925">LOG4J2-925</a>)</p>
</li>
<li>
<p>Incorrect attribute name in PropertiesRewritePolicy example. (<a href="https://issues.apache.org/jira/browse/LOG4J2-950">LOG4J2-950</a>)</p>
</li>
<li>
<p>Documentation: clarify system properties to control status logger, improve troubleshooting FAQ entry. (<a href="https://issues.apache.org/jira/browse/LOG4J2-955">LOG4J2-955</a>)</p>
</li>
<li>
<p>Update from Jackson 2.5.0 to 2.5.1. (<a href="https://issues.apache.org/jira/browse/LOG4J2-958">LOG4J2-958</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-2-fixed"><a class="anchor" href="#release-notes-2-2-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>ThrowableProxy throws NoClassDefFoundError. (<a href="https://issues.apache.org/jira/browse/LOG4J2-834">LOG4J2-834</a>)</p>
</li>
<li>
<p>AbstractLifecycle should not implement equals() and hashCode(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-881">LOG4J2-881</a>)</p>
</li>
<li>
<p>AbstractLifecycle should not implement equals() and hashCode(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-891">LOG4J2-891</a>)</p>
</li>
<li>
<p>JUL adapter does not map Log4j'2 FATAL level to a JUL level. (<a href="https://issues.apache.org/jira/browse/LOG4J2-892">LOG4J2-892</a>)</p>
</li>
<li>
<p>NullPointerException on filter when mapping JUL to Log4j2. (<a href="https://issues.apache.org/jira/browse/LOG4J2-893">LOG4J2-893</a>)</p>
</li>
<li>
<p>Javadoc for org.apache.log4j.BasicConfigurator.configure() is incorrect. (<a href="https://issues.apache.org/jira/browse/LOG4J2-897">LOG4J2-897</a>)</p>
</li>
<li>
<p>ClassLoaderContextSelector uses ClassLoader.toString() as a key (<a href="https://issues.apache.org/jira/browse/LOG4J2-903">LOG4J2-903</a>)</p>
</li>
<li>
<p>XML configuration does not report full error message for XInclude parser configuration problems. (<a href="https://issues.apache.org/jira/browse/LOG4J2-912">LOG4J2-912</a>)</p>
</li>
<li>
<p>ThrowableProxy.getExtendedStackTraceAsString causes NullPointerException. (<a href="https://issues.apache.org/jira/browse/LOG4J2-914">LOG4J2-914</a>)</p>
</li>
<li>
<p>Logging system fails to initialize if XInclude API is not available. (<a href="https://issues.apache.org/jira/browse/LOG4J2-919">LOG4J2-919</a>)</p>
</li>
<li>
<p>Log4j 1.2 Bridge doesn&#8217;t map level ALL correctly in Category.getEffectiveLevel(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-924">LOG4J2-924</a>)</p>
</li>
<li>
<p>ConsoleAppender is missing @PluginFactory annotation at createAppender method. (<a href="https://issues.apache.org/jira/browse/LOG4J2-931">LOG4J2-931</a>)</p>
</li>
<li>
<p>(JMX) To avoid memory leaks when web applications are restarted, JMX notifications are sent from the caller thread in web applications. For non-web applications notifications are sent from a background thread as before. (<a href="https://issues.apache.org/jira/browse/LOG4J2-938">LOG4J2-938</a>)</p>
</li>
<li>
<p>Log4j Flume appender is not adding millisecond to the event headers when the event is logged at 000 milliseconds. (<a href="https://issues.apache.org/jira/browse/LOG4J2-944">LOG4J2-944</a>)</p>
</li>
<li>
<p>[docs] Using Log4j 2 in Web Applications: Update example (Log4jWebLifeCycle is not visible). (<a href="https://issues.apache.org/jira/browse/LOG4J2-946">LOG4J2-946</a>)</p>
</li>
<li>
<p>Manual refers to Route "AppenderRef" attribute, should be "ref". (<a href="https://issues.apache.org/jira/browse/LOG4J2-956">LOG4J2-956</a>)</p>
</li>
<li>
<p>Missing toUpperCase(Locale.ENGLISH). (<a href="https://issues.apache.org/jira/browse/LOG4J2-957">LOG4J2-957</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-1"><a class="anchor" href="#release-notes-2-1"></a>2.1</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2014-10-19</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This is the fourth GA release which contains several bugfixes and new features.
There are two new Maven artifacts in this release: <code>log4j-jul</code> and <code>log4j-iostreams</code>.
Both components are API-based with optional Core features.</p>
</div>
<div class="paragraph">
<p>Log4j 2.1 requires a minimum of Java 6 to build and run.
Basic compatibility with Log4j 1.x is provided through the <code>log4j-1.2-api</code> component, however it does
not implement some of the very implementation specific classes and methods.
The package names and Maven <code>groupId</code> have been changed to <code>org.apache.logging.log4j</code> to avoid any conflicts with Log4j 1.x.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-1-added"><a class="anchor" href="#release-notes-2-1-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Implement a GELF layout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-428">LOG4J2-428</a>)</p>
</li>
<li>
<p>Added Memory-Mapped File Appender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-431">LOG4J2-431</a>)</p>
</li>
<li>
<p>Add the Log4j IOStreams component. (<a href="https://issues.apache.org/jira/browse/LOG4J2-547">LOG4J2-547</a>)</p>
</li>
<li>
<p>Supported filtering on custom log levels in configuration. (<a href="https://issues.apache.org/jira/browse/LOG4J2-589">LOG4J2-589</a>)</p>
</li>
<li>
<p>Add java.util.logging implementation based on log4j-api. See log4j-jul documentation for more details. (<a href="https://issues.apache.org/jira/browse/LOG4J2-608">LOG4J2-608</a>)</p>
</li>
<li>
<p>Add lookup for application main arguments. (<a href="https://issues.apache.org/jira/browse/LOG4J2-771">LOG4J2-771</a>)</p>
</li>
<li>
<p>Add lookup for JVM arguments. (<a href="https://issues.apache.org/jira/browse/LOG4J2-787">LOG4J2-787</a>)</p>
</li>
<li>
<p>Add support for custom SLF4J Markers in log4j-slf4j-impl module. (<a href="https://issues.apache.org/jira/browse/LOG4J2-793">LOG4J2-793</a>)</p>
</li>
<li>
<p>Move reflection utility class to API&#8217;s private utility classes. (<a href="https://issues.apache.org/jira/browse/LOG4J2-809">LOG4J2-809</a>)</p>
</li>
<li>
<p>Documentation: added section on XInclude to user manual Configuration page. (<a href="https://issues.apache.org/jira/browse/LOG4J2-816">LOG4J2-816</a>)</p>
</li>
<li>
<p>Add simple validation constraint annotations for the Plugin system. (<a href="https://issues.apache.org/jira/browse/LOG4J2-825">LOG4J2-825</a>)</p>
</li>
<li>
<p>Support use of TypeConverter classes through the standard Plugin system. (<a href="https://issues.apache.org/jira/browse/LOG4J2-827">LOG4J2-827</a>)</p>
</li>
<li>
<p>Documentation: added Runtime Dependencies link to left nav-bar on site. (<a href="https://issues.apache.org/jira/browse/LOG4J2-833">LOG4J2-833</a>)</p>
</li>
<li>
<p>Add a Java lookup to provide nicely formatted runtime version information. (<a href="https://issues.apache.org/jira/browse/LOG4J2-848">LOG4J2-848</a>)</p>
</li>
<li>
<p>Documentation: add sections on the JUL Adapter, IO Streams and NoSQL Appenders to the Maven and Ivy page. (<a href="https://issues.apache.org/jira/browse/LOG4J2-856">LOG4J2-856</a>)</p>
</li>
<li>
<p>Add ShutdownCallbackRegistry interface for customizable shutdown callback handling. This is particularly useful for application servers that wish to integrate with Log4j 2. (<a href="https://issues.apache.org/jira/browse/LOG4J2-868">LOG4J2-868</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-1-changed"><a class="anchor" href="#release-notes-2-1-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Incomplete documentation for JSONLayout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-766">LOG4J2-766</a>)</p>
</li>
<li>
<p>Update Spring Framework to 3.2.11.RELEASE from 3.2.8.RELEASE. (<a href="https://issues.apache.org/jira/browse/LOG4J2-780">LOG4J2-780</a>)</p>
</li>
<li>
<p>Update Jackson to 2.4.2 from 2.4.1 (for XML and JSON processing). (<a href="https://issues.apache.org/jira/browse/LOG4J2-790">LOG4J2-790</a>)</p>
</li>
<li>
<p>All life cycle implementations should be serializable. This is still work in progress. (<a href="https://issues.apache.org/jira/browse/LOG4J2-800">LOG4J2-800</a>)</p>
</li>
<li>
<p>org.apache.logging.log4j.core.Logger should be serializable. This is still work in progress. (<a href="https://issues.apache.org/jira/browse/LOG4J2-801">LOG4J2-801</a>)</p>
</li>
<li>
<p>Update javax.mail to 1.5.2 from 1.5.0. (<a href="https://issues.apache.org/jira/browse/LOG4J2-810">LOG4J2-810</a>)</p>
</li>
<li>
<p>Unify the two JMS appenders into a single appender. Configurations written for 2.0 will still work in 2.1+. (<a href="https://issues.apache.org/jira/browse/LOG4J2-815">LOG4J2-815</a>)</p>
</li>
<li>
<p>Update org.eclipse.persistence.jpa to 2.5.2 from 2.5.1. (<a href="https://issues.apache.org/jira/browse/LOG4J2-822">LOG4J2-822</a>)</p>
</li>
<li>
<p>Documentation: updated FAQ "which jars" diagrams for JUL bridge and 2.1 version. (<a href="https://issues.apache.org/jira/browse/LOG4J2-831">LOG4J2-831</a>)</p>
</li>
<li>
<p>Update JMH to 1.1 from 0.7.2. (<a href="https://issues.apache.org/jira/browse/LOG4J2-844">LOG4J2-844</a>)</p>
</li>
<li>
<p>Add 2.1.0 to compatible versions in Log4j API ProviderUtil and update Log4jAPIVersion to 2.1.0 in core META-INF/log4j-provider.properties. (<a href="https://issues.apache.org/jira/browse/LOG4J2-845">LOG4J2-845</a>)</p>
</li>
<li>
<p>FlumeAppender: maxDelay not in seconds, but milliseconds. Add time scale to some settings, for example maxDelayMillis instead of maxDelay. The old names are aliased for compatibility. (<a href="https://issues.apache.org/jira/browse/LOG4J2-867">LOG4J2-867</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-1-fixed"><a class="anchor" href="#release-notes-2-1-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>FlumePersistentManager now handles LockConflictExceptions in Berkeley Db when sending a batch. (<a href="https://issues.apache.org/jira/browse/LOG4J2-391">LOG4J2-391</a>)</p>
</li>
<li>
<p>Fix OSGi Import-Package problem with the JMS API. (<a href="https://issues.apache.org/jira/browse/LOG4J2-663">LOG4J2-663</a>)</p>
</li>
<li>
<p>Some typo fixes and enhancements for the site. (<a href="https://issues.apache.org/jira/browse/LOG4J2-676">LOG4J2-676</a>)</p>
</li>
<li>
<p>Documentation: fixed minor issues with Log4j2 website/documentation. (<a href="https://issues.apache.org/jira/browse/LOG4J2-678">LOG4J2-678</a>)</p>
</li>
<li>
<p>Avoid ConverterKey plugin clashes by using a more predictable plugin loading infrastructure. Plugins have been segmented into three parts: class path, user-specified packages, and OSGi bundles. (<a href="https://issues.apache.org/jira/browse/LOG4J2-745">LOG4J2-745</a>)</p>
</li>
<li>
<p>Reduced CachedClock thread contention. (<a href="https://issues.apache.org/jira/browse/LOG4J2-753">LOG4J2-753</a>)</p>
</li>
<li>
<p>Remove invalid Oracle Maven repository. (<a href="https://issues.apache.org/jira/browse/LOG4J2-782">LOG4J2-782</a>)</p>
</li>
<li>
<p>PatternLayout should use platform character encoding by default, not UTF-8. (<a href="https://issues.apache.org/jira/browse/LOG4J2-783">LOG4J2-783</a>)</p>
</li>
<li>
<p>Documentation: fixed capitalization inconsistency in user manual example config. (<a href="https://issues.apache.org/jira/browse/LOG4J2-785">LOG4J2-785</a>)</p>
</li>
<li>
<p>Fixed issue where log4j-to-slf4j did not work correctly with SLF4J Simple Logger. (<a href="https://issues.apache.org/jira/browse/LOG4J2-796">LOG4J2-796</a>)</p>
</li>
<li>
<p>Documentation: clarified why log4j-core is a compile-time dependency in Maven and Ivy page. (<a href="https://issues.apache.org/jira/browse/LOG4J2-797">LOG4J2-797</a>)</p>
</li>
<li>
<p>Fixed plugin scanning redundancy causing massive slowdowns in certain environments. (<a href="https://issues.apache.org/jira/browse/LOG4J2-798">LOG4J2-798</a>)</p>
</li>
<li>
<p>Prevent NPE when configuration with AsyncLogger/AsyncRoot is reloaded. (<a href="https://issues.apache.org/jira/browse/LOG4J2-807">LOG4J2-807</a>)</p>
</li>
<li>
<p>SimpleLogger throws ArrayIndexOutOfBoundsException for an empty array. (<a href="https://issues.apache.org/jira/browse/LOG4J2-811">LOG4J2-811</a>)</p>
</li>
<li>
<p>MarkerManager Log4jMarker.hasParents() returns opposite of correct result. (<a href="https://issues.apache.org/jira/browse/LOG4J2-813">LOG4J2-813</a>)</p>
</li>
<li>
<p>Fixed memory leak in Tomcat 6 caused by clock background threads unintentionally started by Tomcat after web application stop. (<a href="https://issues.apache.org/jira/browse/LOG4J2-819">LOG4J2-819</a>)</p>
</li>
<li>
<p>Fixed issue in RollingFile filePattern: backslashes are path separators, not escape characters. (<a href="https://issues.apache.org/jira/browse/LOG4J2-829">LOG4J2-829</a>)</p>
</li>
<li>
<p>Respect external interrupt signal to allow application shutdown after joining AsyncAppender thread. (<a href="https://issues.apache.org/jira/browse/LOG4J2-830">LOG4J2-830</a>)</p>
</li>
<li>
<p>ThrowableProxy fails if a class in logged stack trace throws java.lang.Error from initializer (<a href="https://issues.apache.org/jira/browse/LOG4J2-832">LOG4J2-832</a>)</p>
</li>
<li>
<p>Migrate JdbcH2AppenderTest JUnit performance test to log4j-perf. (<a href="https://issues.apache.org/jira/browse/LOG4J2-840">LOG4J2-840</a>)</p>
</li>
<li>
<p>Migrate JdbcHyperSqlAppenderTest JUnit performance test to log4j-perf. (<a href="https://issues.apache.org/jira/browse/LOG4J2-841">LOG4J2-841</a>)</p>
</li>
<li>
<p>Migrate JpaH2AppenderTest JUnit performance test to log4j-perf. (<a href="https://issues.apache.org/jira/browse/LOG4J2-842">LOG4J2-842</a>)</p>
</li>
<li>
<p>Migrate JpaHyperSqlAppenderTest JUnit performance test to log4j-perf. (<a href="https://issues.apache.org/jira/browse/LOG4J2-843">LOG4J2-843</a>)</p>
</li>
<li>
<p>Documentation: fix broken links on Appenders manual page. (<a href="https://issues.apache.org/jira/browse/LOG4J2-855">LOG4J2-855</a>)</p>
</li>
<li>
<p>Documentation: fix broken links on left navigation Extending Log4j Configuration sub-menu. (<a href="https://issues.apache.org/jira/browse/LOG4J2-861">LOG4J2-861</a>)</p>
</li>
<li>
<p>Fixed classloader issue that prevented Log4j from finding the implementation when used in a custom Ant task. (<a href="https://issues.apache.org/jira/browse/LOG4J2-862">LOG4J2-862</a>)</p>
</li>
<li>
<p>Documentation: fixed missing closing parenthesis in code example. (<a href="https://issues.apache.org/jira/browse/LOG4J2-866">LOG4J2-866</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-0-2"><a class="anchor" href="#release-notes-2-0-2"></a>2.0.2</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2014-08-16</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This is the third GA release which contains several bugfixes from the previous release.</p>
</div>
<div class="paragraph">
<p>Log4j 2.0.2 requires a minimum of Java 6 to build and run.
Basic compatibility with Log4j 1.x is provided through the <code>log4j-1.2-api</code> component, however it does
not implement some of the very implementation specific classes and methods.
The package names and Maven <code>groupId</code> have been changed to <code>org.apache.logging.log4j</code> to avoid any conflicts with Log4j 1.x.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-2-changed"><a class="anchor" href="#release-notes-2-0-2-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Allow Log4jContextFactory subclasses to specify a custom ContextSelector. (<a href="https://issues.apache.org/jira/browse/LOG4J2-730">LOG4J2-730</a>)</p>
</li>
<li>
<p>Update Apache Flume to 1.5.0.1 from 1.5.0. (<a href="https://issues.apache.org/jira/browse/LOG4J2-775">LOG4J2-775</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-2-fixed"><a class="anchor" href="#release-notes-2-0-2-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Resolved race condition that caused log file rotation to fail with error: "Unable to create directory &#8230;&#8203;" (<a href="https://issues.apache.org/jira/browse/LOG4J2-679">LOG4J2-679</a>)</p>
</li>
<li>
<p>Clarified in documentation that Commons Logging jar is required when using log4j-jcl. (<a href="https://issues.apache.org/jira/browse/LOG4J2-722">LOG4J2-722</a>)</p>
</li>
<li>
<p>Clarified in documentation that SLF4J API jar is required when using log4j-slf4j-impl. (<a href="https://issues.apache.org/jira/browse/LOG4J2-723">LOG4J2-723</a>)</p>
</li>
<li>
<p>Prevent application from hanging when PatternLayout configuration has opening '{' but no closing '}'. (<a href="https://issues.apache.org/jira/browse/LOG4J2-726">LOG4J2-726</a>)</p>
</li>
<li>
<p>Emit warning message to console if no configuration file found. (<a href="https://issues.apache.org/jira/browse/LOG4J2-729">LOG4J2-729</a>)</p>
</li>
<li>
<p>Prevent JUnit test from creating unnecessary Log4j2Plugins.dat during build. (<a href="https://issues.apache.org/jira/browse/LOG4J2-756">LOG4J2-756</a>)</p>
</li>
<li>
<p>Fixed various minor site/documentation issues, mostly versioning related. (<a href="https://issues.apache.org/jira/browse/LOG4J2-759">LOG4J2-759</a>)</p>
</li>
<li>
<p>Documentation improvement: link to dependency tree from log4j-core component page, link to log4j-core component page from FAQ page. (<a href="https://issues.apache.org/jira/browse/LOG4J2-760">LOG4J2-760</a>)</p>
</li>
<li>
<p>Improved asynchronous loggers and appenders to ensure the formatted message does not change even if parameters are modified by the application. (ParameterizedMessage was already safe.) Improved documentation. (<a href="https://issues.apache.org/jira/browse/LOG4J2-763">LOG4J2-763</a>)</p>
</li>
<li>
<p>Improve warning message when missing log4j-core in the classpath. (<a href="https://issues.apache.org/jira/browse/LOG4J2-765">LOG4J2-765</a>)</p>
</li>
<li>
<p>Startup takes a long time if you have empty packages attribute. (<a href="https://issues.apache.org/jira/browse/LOG4J2-769">LOG4J2-769</a>)</p>
</li>
<li>
<p>Site: log4j-core component pages were still using the old logo. (<a href="https://issues.apache.org/jira/browse/LOG4J2-773">LOG4J2-773</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-0-1"><a class="anchor" href="#release-notes-2-0-1"></a>2.0.1</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2014-07-29</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This is the first patch release of Log4j 2.0 which contains numerous bug fixes.</p>
</div>
<div class="paragraph">
<p>Log4j 2.0.1 requires a minimum of Java 6 to build and run.
Basic compatibility with Log4j 1.x is provided through the <code>log4j-1.2-api</code> component, however it does
not implement some of the very implementation specific classes and methods.
The package names and Maven <code>groupId</code> have been changed to <code>org.apache.logging.log4j</code> to avoid any conflicts with Log4j 1.x.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-1-added"><a class="anchor" href="#release-notes-2-0-1-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Added documentation for Custom Levels and Custom Loggers. (<a href="https://issues.apache.org/jira/browse/LOG4J2-710">LOG4J2-710</a>)</p>
</li>
<li>
<p>Added WebLoggerContextUtils class to log4j-web for helper methods useful for asynchronous servlets. (<a href="https://issues.apache.org/jira/browse/LOG4J2-725">LOG4J2-725</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-1-changed"><a class="anchor" href="#release-notes-2-0-1-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Update to LMAX Disruptor 3.3.0 from 3.2.1. (<a href="https://issues.apache.org/jira/browse/LOG4J2-732">LOG4J2-732</a>)</p>
</li>
<li>
<p>Update to latest Jackson jars from the 2.4.1.X line. (<a href="https://issues.apache.org/jira/browse/LOG4J2-733">LOG4J2-733</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-1-fixed"><a class="anchor" href="#release-notes-2-0-1-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Fixed ClassLoader issues in loading Log4j providers in an OSGi environment. (<a href="https://issues.apache.org/jira/browse/LOG4J2-373">LOG4J2-373</a>)</p>
</li>
<li>
<p>Fixed AbstractDatabaseManager to close connection on writeInternal error. (<a href="https://issues.apache.org/jira/browse/LOG4J2-657">LOG4J2-657</a>)</p>
</li>
<li>
<p>DatePatternConverter ISO8601_PATTERN now conforms to ISO8601. (<a href="https://issues.apache.org/jira/browse/LOG4J2-670">LOG4J2-670</a>)</p>
</li>
<li>
<p>Android: Could not find class 'javax.naming.InitialContext', referenced from method org.apache.logging.log4j.core.lookup.JndiLookup.lookup. (<a href="https://issues.apache.org/jira/browse/LOG4J2-703">LOG4J2-703</a>)</p>
</li>
<li>
<p>Improved error message if configuration file not found. (<a href="https://issues.apache.org/jira/browse/LOG4J2-704">LOG4J2-704</a>)</p>
</li>
<li>
<p>Android: java.lang.VerifyError: org/apache/logging/log4j/core/util/Closer (<a href="https://issues.apache.org/jira/browse/LOG4J2-713">LOG4J2-713</a>)</p>
</li>
<li>
<p>Automatically disable log4j JMX when detecting we are running on Android. (<a href="https://issues.apache.org/jira/browse/LOG4J2-716">LOG4J2-716</a>)</p>
</li>
<li>
<p>Correctly handle NetworkOnMainThreadException thrown on Android during Log4j2 initialization. (<a href="https://issues.apache.org/jira/browse/LOG4J2-719">LOG4J2-719</a>)</p>
</li>
<li>
<p>Updated documentation regarding extensions to LoggerContextFactory and Log4j 2 providers. (<a href="https://issues.apache.org/jira/browse/LOG4J2-731">LOG4J2-731</a>)</p>
</li>
<li>
<p>Fixed log4j-bom so that it won&#8217;t interfere with spring-bom and others. (<a href="https://issues.apache.org/jira/browse/LOG4J2-735">LOG4J2-735</a>)</p>
</li>
<li>
<p>Fixed log4j-bom so that it won&#8217;t specify a default scope on any third party dependencies. (<a href="https://issues.apache.org/jira/browse/LOG4J2-736">LOG4J2-736</a>)</p>
</li>
<li>
<p>RollingFileManager deadlock if async action thread fails to start. (<a href="https://issues.apache.org/jira/browse/LOG4J2-738">LOG4J2-738</a>)</p>
</li>
<li>
<p>Fixed typo in webapp manual regarding sample web.xml file. (<a href="https://issues.apache.org/jira/browse/LOG4J2-740">LOG4J2-740</a>)</p>
</li>
<li>
<p>Reinstate the package configuration attribute for discovering custom plugins. (<a href="https://issues.apache.org/jira/browse/LOG4J2-741">LOG4J2-741</a>)</p>
</li>
<li>
<p>XInclude not working with relative path. (<a href="https://issues.apache.org/jira/browse/LOG4J2-742">LOG4J2-742</a>)</p>
</li>
<li>
<p>Avoid unnecessary Clock calls when TimestampMessage is logged. (<a href="https://issues.apache.org/jira/browse/LOG4J2-744">LOG4J2-744</a>)</p>
</li>
<li>
<p>Retain the default date pattern after fixing the ISO8601 pattern. (<a href="https://issues.apache.org/jira/browse/LOG4J2-749">LOG4J2-749</a>)</p>
</li>
<li>
<p>Webapp configuration page has incorrect class name. (<a href="https://issues.apache.org/jira/browse/LOG4J2-750">LOG4J2-750</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-0"><a class="anchor" href="#release-notes-2-0"></a>2.0</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2014-07-12</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This is the first GA release, after thirteen prior releases over the last 4 years.</p>
</div>
<div class="paragraph">
<p>Log4j 2.0 requires a minimum of Java 6 to build and run.
Basic compatibility with Log4j 1.x is provided through the <code>log4j-1.2-api</code> component, however it does not implement some of the very implementation specific classes and methods.
The package names and Maven <code>groupId</code> have been changed to <code>org.apache.logging.log4j</code> to avoid any conflicts with Log4j 1.x.</p>
</div>
<div class="paragraph">
<p>For complete information on Log4j 2, including instructions on how to submit bug reports,
patches, or suggestions for improvement, see
<a href="https://logging.apache.org/log4j/2.x/index.html">the Log4j 2 website</a>.</p>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-added"><a class="anchor" href="#release-notes-2-0-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Added support for generating custom logger wrappers that replace the existing log levels and extended logger wrappers that add custom log levels to the existing ones. (<a href="https://issues.apache.org/jira/browse/LOG4J2-519">LOG4J2-519</a>)</p>
</li>
<li>
<p>RegexFilter does not match multiline log messages. (<a href="https://issues.apache.org/jira/browse/LOG4J2-696">LOG4J2-696</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-changed"><a class="anchor" href="#release-notes-2-0-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Make org.apache.logging.log4j.core.layout.AbstractLayout immutable. (<a href="https://issues.apache.org/jira/browse/LOG4J2-685">LOG4J2-685</a>)</p>
</li>
<li>
<p>Update Jackson to 2.4.1. (<a href="https://issues.apache.org/jira/browse/LOG4J2-689">LOG4J2-689</a>)</p>
</li>
<li>
<p>Update Apache Commons Logging to 1.2 from 1.1.3. (<a href="https://issues.apache.org/jira/browse/LOG4J2-709">LOG4J2-709</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-fixed"><a class="anchor" href="#release-notes-2-0-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>LoggerConfigs with no Level now inherit the Level from their parent. (<a href="https://issues.apache.org/jira/browse/LOG4J2-441">LOG4J2-441</a>)</p>
</li>
<li>
<p>JMX GUI: fixed occasional ArrayIndexOutOfBoundsException after pressing "reconfigure with XML below". (Fixed in RC2, but wasn&#8217;t included in release notes.) (<a href="https://issues.apache.org/jira/browse/LOG4J2-538">LOG4J2-538</a>)</p>
</li>
<li>
<p>Fixed Serialization error with SocketAppender and Async Loggers. (Fixed in RC2, but wasn&#8217;t included in release notes.) (<a href="https://issues.apache.org/jira/browse/LOG4J2-625">LOG4J2-625</a>)</p>
</li>
<li>
<p>Update docs to clarify how to use formatter logger and standard logger together. (<a href="https://issues.apache.org/jira/browse/LOG4J2-631">LOG4J2-631</a>)</p>
</li>
<li>
<p>AsyncLoggerContextSelector should ensure that different AsyncLoggerContext objects created by web app classloaders have unique names. (<a href="https://issues.apache.org/jira/browse/LOG4J2-666">LOG4J2-666</a>)</p>
</li>
<li>
<p>Special characters (tab and so on) in PatternLayout do not work. (<a href="https://issues.apache.org/jira/browse/LOG4J2-682">LOG4J2-682</a>)</p>
</li>
<li>
<p>Fix annotation processor warnings on JDK 1.7+. (<a href="https://issues.apache.org/jira/browse/LOG4J2-683">LOG4J2-683</a>)</p>
</li>
<li>
<p>Core&#8217;s OptionConverter support for \b is broken (affects PatternLayout). (<a href="https://issues.apache.org/jira/browse/LOG4J2-686">LOG4J2-686</a>)</p>
</li>
<li>
<p>Rename org.apache.logging.log4j.core.util.Closer.closeSilent() to closeSilently(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-687">LOG4J2-687</a>)</p>
</li>
<li>
<p>Make org.apache.logging.log4j.core.layout.PatternLayout immutable. (<a href="https://issues.apache.org/jira/browse/LOG4J2-688">LOG4J2-688</a>)</p>
</li>
<li>
<p>Log4j Web test dependencies should be in scope "test" in the pom. (<a href="https://issues.apache.org/jira/browse/LOG4J2-690">LOG4J2-690</a>)</p>
</li>
<li>
<p>Update documentation to specify only Maven 3 is supported. (<a href="https://issues.apache.org/jira/browse/LOG4J2-692">LOG4J2-692</a>)</p>
</li>
<li>
<p>Fix strange compilation error that popped up in a test class. (<a href="https://issues.apache.org/jira/browse/LOG4J2-694">LOG4J2-694</a>)</p>
</li>
<li>
<p>PatternLayout manual page missing documentation on header/footer. (<a href="https://issues.apache.org/jira/browse/LOG4J2-699">LOG4J2-699</a>)</p>
</li>
<li>
<p>Fixed issue where Async Logger does not log thread context stack data. API change: added method getImmutableStackOrNull() to ThreadContext.ContextStack interface. (<a href="https://issues.apache.org/jira/browse/LOG4J2-705">LOG4J2-705</a>)</p>
</li>
<li>
<p>Some exceptions are not logged when configuration problems are detected. (<a href="https://issues.apache.org/jira/browse/LOG4J2-707">LOG4J2-707</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-0-rc2"><a class="anchor" href="#release-notes-2-0-rc2"></a>2.0-rc2</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2014-06-21</p>
</dd>
</dl>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-rc2-added"><a class="anchor" href="#release-notes-2-0-rc2-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Add support for configuration via YAML. (<a href="https://issues.apache.org/jira/browse/LOG4J2-427">LOG4J2-427</a>)</p>
</li>
<li>
<p>Create an appender to route log events to the ServletContext log. (<a href="https://issues.apache.org/jira/browse/LOG4J2-42">LOG4J2-42</a>)</p>
</li>
<li>
<p>Add EncodingPatternConverter to escape newlines and HTML special characters. (<a href="https://issues.apache.org/jira/browse/LOG4J2-439">LOG4J2-439</a>)</p>
</li>
<li>
<p>Add org.apache.logging.log4j.Logger.getLevel(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-576">LOG4J2-576</a>)</p>
</li>
<li>
<p>Introduce Java annotation processor as the new plugin pre-caching mechanism. This is available in log4j-core. All custom plugins created before this should be re-built against the current log4j-core. (<a href="https://issues.apache.org/jira/browse/LOG4J2-595">LOG4J2-595</a>)</p>
</li>
<li>
<p>Add support for types other than String for plugin factory values/attributes. (<a href="https://issues.apache.org/jira/browse/LOG4J2-598">LOG4J2-598</a>)</p>
</li>
<li>
<p>Document the system properties used in Log4J 2. (<a href="https://issues.apache.org/jira/browse/LOG4J2-629">LOG4J2-629</a>)</p>
</li>
<li>
<p>Implement a SecureSocketAppender and secure server (SSL/TLS). (<a href="https://issues.apache.org/jira/browse/LOG4J2-644">LOG4J2-644</a>)</p>
</li>
<li>
<p>Add support for default plugin values and attributes. (<a href="https://issues.apache.org/jira/browse/LOG4J2-652">LOG4J2-652</a>)</p>
</li>
<li>
<p>Add log4j-perf module to provide a home for all log4j performance tests. Add support for JMH microbenchmark performance tests. (<a href="https://issues.apache.org/jira/browse/LOG4J2-654">LOG4J2-654</a>)</p>
</li>
<li>
<p>Add Vagrantfile for testing in GNU+Linux. (<a href="https://issues.apache.org/jira/browse/LOG4J2-655">LOG4J2-655</a>)</p>
</li>
<li>
<p>Made RollingFileAppender buffer size configurable. (<a href="https://issues.apache.org/jira/browse/LOG4J2-674">LOG4J2-674</a>)</p>
</li>
<li>
<p>RollingFile and RollingRandomAccessFile now write the layout footer before rollover. (<a href="https://issues.apache.org/jira/browse/LOG4J2-675">LOG4J2-675</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-rc2-changed"><a class="anchor" href="#release-notes-2-0-rc2-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Refactor Log4jLogEvent to lazily create ThrowableProxy. (<a href="https://issues.apache.org/jira/browse/LOG4J2-250">LOG4J2-250</a>)</p>
</li>
<li>
<p>SLf4JLogger is now Serializable. (<a href="https://issues.apache.org/jira/browse/LOG4J2-410">LOG4J2-410</a>)</p>
</li>
<li>
<p>Support default value for missing key in look-ups with fallback to looking in the properties map. (<a href="https://issues.apache.org/jira/browse/LOG4J2-419">LOG4J2-419</a>)</p>
</li>
<li>
<p>Add support to add a LoggerConfig. Document two ways to modify the configuration. (<a href="https://issues.apache.org/jira/browse/LOG4J2-468">LOG4J2-468</a>)</p>
</li>
<li>
<p>Allow header and footer to be specified as lookup patterns in PatternLayout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-496">LOG4J2-496</a>)</p>
</li>
<li>
<p>Have Logger API expose a PrintWriter instead of custom LoggerStream. (<a href="https://issues.apache.org/jira/browse/LOG4J2-547">LOG4J2-547</a>)</p>
</li>
<li>
<p>Allow configuration files to be located as Servlet Context resources. (<a href="https://issues.apache.org/jira/browse/LOG4J2-554">LOG4J2-554</a>)</p>
</li>
<li>
<p>Introduce ExtendedLogger interface to facilitate implementing and extending Loggers. (<a href="https://issues.apache.org/jira/browse/LOG4J2-555">LOG4J2-555</a>)</p>
</li>
<li>
<p>Allow spaces around commas in Configuration&#8217;s package attribute. (<a href="https://issues.apache.org/jira/browse/LOG4J2-561">LOG4J2-561</a>)</p>
</li>
<li>
<p>Made RollingRandomAccessFileAppender buffer size configurable. (<a href="https://issues.apache.org/jira/browse/LOG4J2-566">LOG4J2-566</a>)</p>
</li>
<li>
<p>Make Blocking the default WaitStrategy for Async Loggers. (<a href="https://issues.apache.org/jira/browse/LOG4J2-574">LOG4J2-574</a>)</p>
</li>
<li>
<p>Rename org.apache.logging.log4j.core.net.SocketServer to TCPSocketServer and refactor with UDP. (<a href="https://issues.apache.org/jira/browse/LOG4J2-582">LOG4J2-582</a>)</p>
</li>
<li>
<p>Add support for multiple parents to Markers. (<a href="https://issues.apache.org/jira/browse/LOG4J2-585">LOG4J2-585</a>)</p>
</li>
<li>
<p>Update Jackson to 2.3.2 from 2.2.2. (<a href="https://issues.apache.org/jira/browse/LOG4J2-592">LOG4J2-592</a>)</p>
</li>
<li>
<p>Update Jackson to 2.3.3. (<a href="https://issues.apache.org/jira/browse/LOG4J2-616">LOG4J2-616</a>)</p>
</li>
<li>
<p>Update SLF4J to 1.7.7. (<a href="https://issues.apache.org/jira/browse/LOG4J2-617">LOG4J2-617</a>)</p>
</li>
<li>
<p>Use Clock to generate all log event timestamps, not just for Async Loggers. (<a href="https://issues.apache.org/jira/browse/LOG4J2-628">LOG4J2-628</a>)</p>
</li>
<li>
<p>Override commons-logging dependency version in tests. (<a href="https://issues.apache.org/jira/browse/LOG4J2-641">LOG4J2-641</a>)</p>
</li>
<li>
<p>Merge the TLS Syslog appender into the Syslog appender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-646">LOG4J2-646</a>)</p>
</li>
<li>
<p>Upgrade to Flume 1.5.0. (<a href="https://issues.apache.org/jira/browse/LOG4J2-647">LOG4J2-647</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-rc2-fixed"><a class="anchor" href="#release-notes-2-0-rc2-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Improved documentation regarding log4j status logger. (<a href="https://issues.apache.org/jira/browse/LOG4J2-141">LOG4J2-141</a>)</p>
</li>
<li>
<p>The log4j-1.2-api module didn&#8217;t export any packages to OSGi. (<a href="https://issues.apache.org/jira/browse/LOG4J2-345">LOG4J2-345</a>)</p>
</li>
<li>
<p>Cyclic dependency with log4j-slf4j-impl in OSGi. (<a href="https://issues.apache.org/jira/browse/LOG4J2-346">LOG4J2-346</a>)</p>
</li>
<li>
<p>Add DateLookup and ThreadContextLookup to default lookups. (<a href="https://issues.apache.org/jira/browse/LOG4J2-378">LOG4J2-378</a>)</p>
</li>
<li>
<p>Resolved a problem with the previous solution for LOG4J2-392 that resulted in dropped events when using AsyncLoggerConfig with slow appenders when application is stopped. (<a href="https://issues.apache.org/jira/browse/LOG4J2-392">LOG4J2-392</a>)</p>
</li>
<li>
<p>During shutdown, a NullPointerException could be thrown due to the NullConfiguration class no longer being available to the ClassLoader. (<a href="https://issues.apache.org/jira/browse/LOG4J2-440">LOG4J2-440</a>)</p>
</li>
<li>
<p>A StringIndexOutOfBounds exception could occur during property substitution. (<a href="https://issues.apache.org/jira/browse/LOG4J2-448">LOG4J2-448</a>)</p>
</li>
<li>
<p>FailoverAppender was not resetting its status after the primary appender recovered. (<a href="https://issues.apache.org/jira/browse/LOG4J2-469">LOG4J2-469</a>)</p>
</li>
<li>
<p>Add equals and hashcode to Log4jLogEvent. (<a href="https://issues.apache.org/jira/browse/LOG4J2-499">LOG4J2-499</a>)</p>
</li>
<li>
<p>Resolved issue where AsyncAppender dropped events if queue still contained events when application is stopped. (<a href="https://issues.apache.org/jira/browse/LOG4J2-520">LOG4J2-520</a>)</p>
</li>
<li>
<p>Reset rollover time when size rollover is triggered. (<a href="https://issues.apache.org/jira/browse/LOG4J2-535">LOG4J2-535</a>)</p>
</li>
<li>
<p>Fixed issue with "Reconfigure using XML below" function in JMX Client GUI. ConfigurationSource is now a top-level class and can be obtained with Configuration.getConfigurationSource(). LoggerContext.getConfiguration().getConfigurationSource() provides a reliable public method for obtaining a logger context&#8217;s configuration location and content. (<a href="https://issues.apache.org/jira/browse/LOG4J2-539">LOG4J2-539</a>)</p>
</li>
<li>
<p>Make Throwable transient in ThrowableProxy. (<a href="https://issues.apache.org/jira/browse/LOG4J2-542">LOG4J2-542</a>)</p>
</li>
<li>
<p>SyslogAppenderTest and RFC5424LayoutTest were failing in Java 8. (<a href="https://issues.apache.org/jira/browse/LOG4J2-560">LOG4J2-560</a>)</p>
</li>
<li>
<p>FlumeAvroManager now always uses a client type of default_failover. (<a href="https://issues.apache.org/jira/browse/LOG4J2-563">LOG4J2-563</a>)</p>
</li>
<li>
<p>Renamed SLF4J logger class to Log4jLogger. (<a href="https://issues.apache.org/jira/browse/LOG4J2-564">LOG4J2-564</a>)</p>
</li>
<li>
<p>Fix shutdown thread memory leak in servlet containers. (<a href="https://issues.apache.org/jira/browse/LOG4J2-570">LOG4J2-570</a>)</p>
</li>
<li>
<p>Rework Level comparison APIs. (<a href="https://issues.apache.org/jira/browse/LOG4J2-579">LOG4J2-579</a>)</p>
</li>
<li>
<p>RollingRandomAccessFile now writes the layout header after rollover. (<a href="https://issues.apache.org/jira/browse/LOG4J2-581">LOG4J2-581</a>)</p>
</li>
<li>
<p>StatusLogger was not skipping multiple instances of the FQCN class, causing messages from classes in the Verbose list to be printed. (<a href="https://issues.apache.org/jira/browse/LOG4J2-597">LOG4J2-597</a>)</p>
</li>
<li>
<p>Unit tests are now less verbose during the build process. (<a href="https://issues.apache.org/jira/browse/LOG4J2-602">LOG4J2-602</a>)</p>
</li>
<li>
<p>Password data from the NoSQL plugins no longer shows up in cleartext in debug logging. (<a href="https://issues.apache.org/jira/browse/LOG4J2-605">LOG4J2-605</a>)</p>
</li>
<li>
<p>The OSGi version of log4j-web imports Servlet 2.5 at minimum instead of 3.0. (<a href="https://issues.apache.org/jira/browse/LOG4J2-613">LOG4J2-613</a>)</p>
</li>
<li>
<p>Invalid XML configuration files do not prevent the config file from being checked again. (<a href="https://issues.apache.org/jira/browse/LOG4J2-619">LOG4J2-619</a>)</p>
</li>
<li>
<p>Perform reconfiguration in a separate thread to prevent deadlocks. (<a href="https://issues.apache.org/jira/browse/LOG4J2-620">LOG4J2-620</a>)</p>
</li>
<li>
<p>RollingFileManager now correctly honours the bufferedIO configuration after rollover. (<a href="https://issues.apache.org/jira/browse/LOG4J2-622">LOG4J2-622</a>)</p>
</li>
<li>
<p>Generate MDC properties as a JSON map in JSONLayout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-623">LOG4J2-623</a>)</p>
</li>
<li>
<p>JMX: Updating a Logger&#8217;s level via jConsole now correctly takes effect. (<a href="https://issues.apache.org/jira/browse/LOG4J2-637">LOG4J2-637</a>)</p>
</li>
<li>
<p>Prevent NPE in AsyncLogger and AsyncLoggerConfig if logger is used after log4j has been shut down. (<a href="https://issues.apache.org/jira/browse/LOG4J2-639">LOG4J2-639</a>)</p>
</li>
<li>
<p>Fix NPE that can be caused by a null ThreadContextClassLoader. (<a href="https://issues.apache.org/jira/browse/LOG4J2-640">LOG4J2-640</a>)</p>
</li>
<li>
<p>Log4j 2 throws ArrayIndexOutOfBoundsException. (<a href="https://issues.apache.org/jira/browse/LOG4J2-651">LOG4J2-651</a>)</p>
</li>
<li>
<p>Moved plugin cache file to META-INF for OSGi compatibility. (<a href="https://issues.apache.org/jira/browse/LOG4J2-664">LOG4J2-664</a>)</p>
</li>
<li>
<p>Correctly process log events when combining AsyncLoggers with AsyncAppender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-668">LOG4J2-668</a>)</p>
</li>
<li>
<p>Prevent NPE when combining AsyncLoggers with AsyncLoggerConfigs. (<a href="https://issues.apache.org/jira/browse/LOG4J2-669">LOG4J2-669</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-0-rc1"><a class="anchor" href="#release-notes-2-0-rc1"></a>2.0-rc1</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2014-02-16</p>
</dd>
</dl>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-rc1-added"><a class="anchor" href="#release-notes-2-0-rc1-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Configure FileAppender buffer size. (<a href="https://issues.apache.org/jira/browse/LOG4J2-401">LOG4J2-401</a>)</p>
</li>
<li>
<p>Configure RandomAccessFileAppender buffer size. (<a href="https://issues.apache.org/jira/browse/LOG4J2-402">LOG4J2-402</a>)</p>
</li>
<li>
<p>Format log event time as UNIX time (seconds or milliseconds). (<a href="https://issues.apache.org/jira/browse/LOG4J2-415">LOG4J2-415</a>)</p>
</li>
<li>
<p>Create a lookup for resource bundle substitution. (<a href="https://issues.apache.org/jira/browse/LOG4J2-420">LOG4J2-420</a>)</p>
</li>
<li>
<p>(JMX) Added MBeans for instrumenting AsyncAppenders and AsyncLogger RingBuffers, exposing queue size, remaining capacity and other attributes. (<a href="https://issues.apache.org/jira/browse/LOG4J2-423">LOG4J2-423</a>)</p>
</li>
<li>
<p>Added option to toggle Thread name caching in AsyncLogger. (<a href="https://issues.apache.org/jira/browse/LOG4J2-467">LOG4J2-467</a>)</p>
</li>
<li>
<p>ThreadContext now uses plain ThreadLocal by default, unless system property isThreadContextMapInheritable has value "true". (<a href="https://issues.apache.org/jira/browse/LOG4J2-479">LOG4J2-479</a>)</p>
</li>
<li>
<p>Add Stream interface to Loggers. (<a href="https://issues.apache.org/jira/browse/LOG4J2-481">LOG4J2-481</a>)</p>
</li>
<li>
<p>Documentation fix: The attribute of Route to refer to an appender is "ref" not "AppenderRef". (<a href="https://issues.apache.org/jira/browse/LOG4J2-482">LOG4J2-482</a>)</p>
</li>
<li>
<p>(JMX) JMX Client GUI should dynamically update when LoggerContext MBeans are registered/unregistered in MBean server. (<a href="https://issues.apache.org/jira/browse/LOG4J2-530">LOG4J2-530</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-rc1-changed"><a class="anchor" href="#release-notes-2-0-rc1-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>PatternLayout option to not output ANSI escape codes if no Console is available. (<a href="https://issues.apache.org/jira/browse/LOG4J2-413">LOG4J2-413</a>)</p>
</li>
<li>
<p>Add support for custom logging levels. (<a href="https://issues.apache.org/jira/browse/LOG4J2-41">LOG4J2-41</a>)</p>
</li>
<li>
<p>Update Flume Appender to use Flume 1.4.0. (<a href="https://issues.apache.org/jira/browse/LOG4J2-453">LOG4J2-453</a>)</p>
</li>
<li>
<p>Update EasyMock to version 3.2. (<a href="https://issues.apache.org/jira/browse/LOG4J2-490">LOG4J2-490</a>)</p>
</li>
<li>
<p>Space Level numbers by 100 instead of 1. (<a href="https://issues.apache.org/jira/browse/LOG4J2-507">LOG4J2-507</a>)</p>
</li>
<li>
<p>Rename package org.apache.logging.log4j.core.appender.rolling.helper to org.apache.logging.log4j.core.appender.rolling.action. (<a href="https://issues.apache.org/jira/browse/LOG4J2-528">LOG4J2-528</a>)</p>
</li>
<li>
<p>Resource leak in Flume appender when it cannot create a BerkeleyDB db. (<a href="https://issues.apache.org/jira/browse/LOG4J2-532">LOG4J2-532</a>)</p>
</li>
<li>
<p>Renamed the org.apache.logging.log4j.core.appender.db.nosql.couch package to org.apache.logging.log4j.core.appender.db.nosql.couchdb.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-rc1-fixed"><a class="anchor" href="#release-notes-2-0-rc1-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Resolved memory leak by releasing reference to ThreadLocal when AsyncLogger is stopped. (<a href="https://issues.apache.org/jira/browse/LOG4J2-323">LOG4J2-323</a>)</p>
</li>
<li>
<p>Changed the Servlet 3.0 auto-initializer to add the filter by class to get around a WebLogic bug. (<a href="https://issues.apache.org/jira/browse/LOG4J2-344">LOG4J2-344</a>)</p>
</li>
<li>
<p>(OSGi) logging.log4j-1.2-api doesn&#8217;t export the log4j API 1.2. Dependent bundles can not be resolved. (<a href="https://issues.apache.org/jira/browse/LOG4J2-345">LOG4J2-345</a>)</p>
</li>
<li>
<p>Changed the Servlet 3.0 auto-initializer so that it does nothing in a Servlet 2.5 or older application. This ensures behavioral consistency across containers. This includes additional fixes to abort initialization if a duplicate filter already exists and to check the actual Servlet EFFECTIVE version. (<a href="https://issues.apache.org/jira/browse/LOG4J2-359">LOG4J2-359</a>)</p>
</li>
<li>
<p>(OSGi) Fix NPE during shutdown. (<a href="https://issues.apache.org/jira/browse/LOG4J2-377">LOG4J2-377</a>)</p>
</li>
<li>
<p>Fixed issue that prevented Log4J from working in Google App Engine. (<a href="https://issues.apache.org/jira/browse/LOG4J2-379">LOG4J2-379</a>)</p>
</li>
<li>
<p>Fixed issues with time-based file rollover (monthly, weekly, hourly and every minute). (<a href="https://issues.apache.org/jira/browse/LOG4J2-385">LOG4J2-385</a>)</p>
</li>
<li>
<p>Stop AsyncLoggerConfig Disruptor thread(s), then AsyncAppender thread(s) first before stopping other appenders. (<a href="https://issues.apache.org/jira/browse/LOG4J2-392">LOG4J2-392</a>)</p>
</li>
<li>
<p>Configure properties and setup Interpolator before processing rest of configuration. (<a href="https://issues.apache.org/jira/browse/LOG4J2-398">LOG4J2-398</a>)</p>
</li>
<li>
<p>@EnterpriseNumber" was missing in the ID of structured data when RFC5424Layout is used (<a href="https://issues.apache.org/jira/browse/LOG4J2-404">LOG4J2-404</a>)</p>
</li>
<li>
<p>Configuration was being processed twice at startup. (<a href="https://issues.apache.org/jira/browse/LOG4J2-405">LOG4J2-405</a>)</p>
</li>
<li>
<p>(JMX) Unregister all log4j JMX MBeans when the LoggerContext is stopped to allow web application classes to be GC-ed on undeploy. (<a href="https://issues.apache.org/jira/browse/LOG4J2-406">LOG4J2-406</a>)</p>
</li>
<li>
<p>Fixed inability to recover from lost database connection in database appenders by connecting (borrowing from pool) on new write internal or on flush. (<a href="https://issues.apache.org/jira/browse/LOG4J2-407">LOG4J2-407</a>)</p>
</li>
<li>
<p>Fixed error in documentation code example in manual/eventlogging.html (<a href="https://issues.apache.org/jira/browse/LOG4J2-408">LOG4J2-408</a>)</p>
</li>
<li>
<p>Created a utility to properly escape backslashes before creating URIs, and changed URI creation to use the utility instead of instantiating URI directly. (<a href="https://issues.apache.org/jira/browse/LOG4J2-409">LOG4J2-409</a>)</p>
</li>
<li>
<p>Fix Event Level / LoggerConfig Level table at the architecture documentation page. (<a href="https://issues.apache.org/jira/browse/LOG4J2-417">LOG4J2-417</a>)</p>
</li>
<li>
<p>Resolved memory leak by populating AsyncLoggerConfigHelper ring buffer via EventTranslatorTwoArg, eliminating the need for a ThreadLocal. (<a href="https://issues.apache.org/jira/browse/LOG4J2-425">LOG4J2-425</a>)</p>
</li>
<li>
<p>Use the formatted Message in RFC5424Layout for non-StructuredDataMessages. (<a href="https://issues.apache.org/jira/browse/LOG4J2-430">LOG4J2-430</a>)</p>
</li>
<li>
<p>Ensured the JDBCAppender commits transactions after a single write or a flush of multiple writes. (<a href="https://issues.apache.org/jira/browse/LOG4J2-438">LOG4J2-438</a>)</p>
</li>
<li>
<p>Fixed problem with JDBC and JPA appender connectivity in WebSphere by connecting (borrowing from pool) on new write internal or on flush. (<a href="https://issues.apache.org/jira/browse/LOG4J2-442">LOG4J2-442</a>)</p>
</li>
<li>
<p>(JMX) Fixed issue where log4j2 LoggerContext did not show up in JMX GUI or JConsole. (<a href="https://issues.apache.org/jira/browse/LOG4J2-443">LOG4J2-443</a>)</p>
</li>
<li>
<p>ResolverUtil cannot find packages in file URLs which include the '+' character. (<a href="https://issues.apache.org/jira/browse/LOG4J2-445">LOG4J2-445</a>)</p>
</li>
<li>
<p>XMLLayout does not include marker name. (<a href="https://issues.apache.org/jira/browse/LOG4J2-447">LOG4J2-447</a>)</p>
</li>
<li>
<p>Fixed typo in documentation: system property should be log4j2.loggerContextFactory (<a href="https://issues.apache.org/jira/browse/LOG4J2-451">LOG4J2-451</a>)</p>
</li>
<li>
<p>Added a ServletContext attribute that, when set to "true", disables Log4j&#8217;s auto-initialization in Servlet 3.0+ web applications. (<a href="https://issues.apache.org/jira/browse/LOG4J2-452">LOG4J2-452</a>)</p>
</li>
<li>
<p>TimeBasedTriggeringPolicy should use event time millis. (<a href="https://issues.apache.org/jira/browse/LOG4J2-454">LOG4J2-454</a>)</p>
</li>
<li>
<p>RingBufferLogEvent should return Message timestamp for TimestampMessage messages. (<a href="https://issues.apache.org/jira/browse/LOG4J2-455">LOG4J2-455</a>)</p>
</li>
<li>
<p>Fixed failure of JDBC and JPA appender to properly release database connections by connecting (borrowing from pool) on new write internal or on flush. (<a href="https://issues.apache.org/jira/browse/LOG4J2-457">LOG4J2-457</a>)</p>
</li>
<li>
<p>Set external context when constructing the LoggerContext. (<a href="https://issues.apache.org/jira/browse/LOG4J2-459">LOG4J2-459</a>)</p>
</li>
<li>
<p>Fix LogEvent to never return null Level, fixes LevelPatternConverter.format may throw NPE. (<a href="https://issues.apache.org/jira/browse/LOG4J2-462">LOG4J2-462</a>)</p>
</li>
<li>
<p>Fixed documentation for MyApp example application in the Automatic Configuration section (<a href="https://issues.apache.org/jira/browse/LOG4J2-463">LOG4J2-463</a>)</p>
</li>
<li>
<p>Support arrays as sub-elements of a JSON configuration. (<a href="https://issues.apache.org/jira/browse/LOG4J2-464">LOG4J2-464</a>)</p>
</li>
<li>
<p>Fix LogEvent to never return null Level, fixes ThresholdFilter throws NPE. (<a href="https://issues.apache.org/jira/browse/LOG4J2-465">LOG4J2-465</a>)</p>
</li>
<li>
<p>Cannot load log4j2 config file if path contains plus '+' characters. (<a href="https://issues.apache.org/jira/browse/LOG4J2-466">LOG4J2-466</a>)</p>
</li>
<li>
<p>hostName property was not being set until after the first configuration element. (<a href="https://issues.apache.org/jira/browse/LOG4J2-470">LOG4J2-470</a>)</p>
</li>
<li>
<p>Fixed issue where toString methods that perform logging could deadlock AsyncLogger. (<a href="https://issues.apache.org/jira/browse/LOG4J2-471">LOG4J2-471</a>)</p>
</li>
<li>
<p>BaseConfiguration class does not properly implement Configuration interface. (<a href="https://issues.apache.org/jira/browse/LOG4J2-472">LOG4J2-472</a>)</p>
</li>
<li>
<p>Changed the MongoDBConnection to add a MongoDB encoding hook instead of a decoding hook. (<a href="https://issues.apache.org/jira/browse/LOG4J2-475">LOG4J2-475</a>)</p>
</li>
<li>
<p>NPE in ClassLoaderContextSelector. (<a href="https://issues.apache.org/jira/browse/LOG4J2-477">LOG4J2-477</a>)</p>
</li>
<li>
<p>The message and ndc fields are not JavaScript escaped in JSONLayout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-478">LOG4J2-478</a>)</p>
</li>
<li>
<p>Fixed issue where toString methods that perform logging could deadlock AsyncAppender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-485">LOG4J2-485</a>)</p>
</li>
<li>
<p>Fixed the JPAAppender&#8217;s overuse of transactions by connecting (borrowing from pool) on new write internal or on flush. (<a href="https://issues.apache.org/jira/browse/LOG4J2-489">LOG4J2-489</a>)</p>
</li>
<li>
<p>(JMX) Fixed MalformedObjectNameException if context name contains '=' or newline characters. (<a href="https://issues.apache.org/jira/browse/LOG4J2-492">LOG4J2-492</a>)</p>
</li>
<li>
<p>(JMX - ObjectNames changed!) Unloading one web application unloads JMX MBeans for all web applications. (<a href="https://issues.apache.org/jira/browse/LOG4J2-500">LOG4J2-500</a>)</p>
</li>
<li>
<p>Stop AsyncLoggerConfig Disruptor thread(s), then AsyncAppender thread(s) first before stopping other appenders. (<a href="https://issues.apache.org/jira/browse/LOG4J2-511">LOG4J2-511</a>)</p>
</li>
<li>
<p>Exposed Log4j web support interface and methods and the LoggerContext through ServletContext attributes so that threads not affected by filters (such as asynchronous threads) can utilize the LoggerContext. Also updated the Log4j filter so that it supports async. (<a href="https://issues.apache.org/jira/browse/LOG4J2-512">LOG4J2-512</a>)</p>
</li>
<li>
<p>Switch in log4j-1.2-api Category.getEffectiveLevel has no cases for FATAL, OFF. (<a href="https://issues.apache.org/jira/browse/LOG4J2-517">LOG4J2-517</a>)</p>
</li>
<li>
<p>LocalizedMessage serialization is broken. (<a href="https://issues.apache.org/jira/browse/LOG4J2-523">LOG4J2-523</a>)</p>
</li>
<li>
<p>Fixed bugs where rolled log files were overwritten by RollingFile appender with composite time and size based policies. (<a href="https://issues.apache.org/jira/browse/LOG4J2-531">LOG4J2-531</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-rc1-removed"><a class="anchor" href="#release-notes-2-0-rc1-removed"></a>Removed</h3>
<div class="ulist">
<ul>
<li>
<p>Removed the DataSourceConnectionSource and the &lt;DriverManager&gt; plugin for the JDBC Appender. It is not safe to use. Please use the DataSource or factory connection sources backed by a connection pool.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-0-beta9"><a class="anchor" href="#release-notes-2-0-beta9"></a>2.0-beta9</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2013-09-14</p>
</dd>
</dl>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-beta9-added"><a class="anchor" href="#release-notes-2-0-beta9-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Added FAQ page to the site. (<a href="https://issues.apache.org/jira/browse/LOG4J2-253">LOG4J2-253</a>)</p>
</li>
<li>
<p>Ease porting from 1.x Logger.getRootLogger(): add LogManager.getRootLogger(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-305">LOG4J2-305</a>)</p>
</li>
<li>
<p>Add JNDILookup plugin. (<a href="https://issues.apache.org/jira/browse/LOG4J2-313">LOG4J2-313</a>)</p>
</li>
<li>
<p>Add TLSAppender. Also added missing license headers to several files. (<a href="https://issues.apache.org/jira/browse/LOG4J2-338">LOG4J2-338</a>)</p>
</li>
<li>
<p>Enable XInclude for XML configurations. (<a href="https://issues.apache.org/jira/browse/LOG4J2-341">LOG4J2-341</a>)</p>
</li>
<li>
<p>Create a JSON Layout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-356">LOG4J2-356</a>)</p>
</li>
<li>
<p>Allow Plugins to have aliases. (<a href="https://issues.apache.org/jira/browse/LOG4J2-360">LOG4J2-360</a>)</p>
</li>
<li>
<p>Add a diagram to the site (FAQ page) that explains when to use which jar. (<a href="https://issues.apache.org/jira/browse/LOG4J2-362">LOG4J2-362</a>)</p>
</li>
<li>
<p>Add WebLookup to retrieve information from the ServletContext. (<a href="https://issues.apache.org/jira/browse/LOG4J2-364">LOG4J2-364</a>)</p>
</li>
<li>
<p>Add more options to PatternLayout to display more detailed information about a Throwable. (<a href="https://issues.apache.org/jira/browse/LOG4J2-374">LOG4J2-374</a>)</p>
</li>
<li>
<p>[Pattern Layout] Customize level names by length. (<a href="https://issues.apache.org/jira/browse/LOG4J2-383">LOG4J2-383</a>)</p>
</li>
<li>
<p>[Pattern Layout] Customize level names to lower-case. (<a href="https://issues.apache.org/jira/browse/LOG4J2-384">LOG4J2-384</a>)</p>
</li>
<li>
<p>Allow the default file rollover strategy to define the compression level. (<a href="https://issues.apache.org/jira/browse/LOG4J2-399">LOG4J2-399</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-beta9-changed"><a class="anchor" href="#release-notes-2-0-beta9-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Changed the (relatively new) PatternLayout configuration attribute "suppressExceptions" to "alwaysWriteExceptions" to more correctly indicate what it does. As such, the meaning of this attribute has reversed (previous "true"s should become "false"s, and vice versa). Since this was an undocumented attribute up until now, it&#8217;s unlikely this change will affect any users.</p>
</li>
<li>
<p>Changed the "suppressExceptions" configuration attribute for all Appenders to "ignoreExceptions" to avoid confusion with Java 7 suppressed exceptions. Also renamed the Appender#isExceptionSuppressed() method to Appender#ignoreExceptions() to avoid the same confusion. All Appenders by default internally log and then ignore exceptions encountered while logging. Setting "ignoreExceptions" to "false" on an Appender causes it to allow exceptions to propagate to the caller. You must set "ignoreExceptions" to "false" for Appenders you are wrapping in the Failover Appender.</p>
</li>
<li>
<p>Cleaned up tests and cleared up documentation for the JPA appender following the resolution of EclipseLink issue #412454.</p>
</li>
<li>
<p>Improved site by adding quick jump-off page and menu for Javadoc links for all components.</p>
</li>
<li>
<p>Update JSON Jackson library to 2.2.2 from 2.2.1. (<a href="https://issues.apache.org/jira/browse/LOG4J2-306">LOG4J2-306</a>)</p>
</li>
<li>
<p>Updated Async Loggers' LMAX Disruptor library from 3.0.1 to 3.2.0. (<a href="https://issues.apache.org/jira/browse/LOG4J2-307">LOG4J2-307</a>)</p>
</li>
<li>
<p>Clarified which library versions were used in Async Loggers performance test. (<a href="https://issues.apache.org/jira/browse/LOG4J2-308">LOG4J2-308</a>)</p>
</li>
<li>
<p>XML layout improvements (compact vs. pretty, namespace, namespace prefix, root element). (<a href="https://issues.apache.org/jira/browse/LOG4J2-312">LOG4J2-312</a>)</p>
</li>
<li>
<p>Renamed FastFileAppender and FastRollingFileAppender to RandomAccessFileAppender and RollingRandomAccessFileAppender. Configurations using the Fast(Rolling)File element no longer work and should be modified to use the (Rolling)RandomAccessFile element. (<a href="https://issues.apache.org/jira/browse/LOG4J2-317">LOG4J2-317</a>)</p>
</li>
<li>
<p>Allow shutdown hook to be disabled in the configuration. (<a href="https://issues.apache.org/jira/browse/LOG4J2-318">LOG4J2-318</a>)</p>
</li>
<li>
<p>Update JDBC tests to use H2 database 1.3.173 from 1.3.172. (<a href="https://issues.apache.org/jira/browse/LOG4J2-325">LOG4J2-325</a>)</p>
</li>
<li>
<p>Add support for multiple SD-ELEMENTs in an RFC 5424 syslog message. (<a href="https://issues.apache.org/jira/browse/LOG4J2-355">LOG4J2-355</a>)</p>
</li>
<li>
<p>Update commons-logging to 1.1.3 from 1.1.1. (<a href="https://issues.apache.org/jira/browse/LOG4J2-366">LOG4J2-366</a>)</p>
</li>
<li>
<p>Update Jackson dependency to 1.9.13 from 1.9.11. (<a href="https://issues.apache.org/jira/browse/LOG4J2-387">LOG4J2-387</a>)</p>
</li>
<li>
<p>Update Java Mail dependency to 1.5.0 from 1.4.7. (<a href="https://issues.apache.org/jira/browse/LOG4J2-388">LOG4J2-388</a>)</p>
</li>
<li>
<p>Update HSQLDB dependency to 2.3.0 from 2.2.9. (<a href="https://issues.apache.org/jira/browse/LOG4J2-390">LOG4J2-390</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-beta9-fixed"><a class="anchor" href="#release-notes-2-0-beta9-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>The slf4j-ext jar is now an optional dependency of the SLF4J bridge. (<a href="https://issues.apache.org/jira/browse/LOG4J2-165">LOG4J2-165</a>)</p>
</li>
<li>
<p>RoutingAppender&#8217;s default Route can now be an appender reference. (<a href="https://issues.apache.org/jira/browse/LOG4J2-166">LOG4J2-166</a>)</p>
</li>
<li>
<p>ThrowableProxy no longer extends Throwable. (<a href="https://issues.apache.org/jira/browse/LOG4J2-216">LOG4J2-216</a>)</p>
</li>
<li>
<p>Fix table of contents generation in pdf. (<a href="https://issues.apache.org/jira/browse/LOG4J2-226">LOG4J2-226</a>)</p>
</li>
<li>
<p>Additional fix to make AsyncAppender threads daemon threads and improve their thread name. (<a href="https://issues.apache.org/jira/browse/LOG4J2-280">LOG4J2-280</a>)</p>
</li>
<li>
<p>Fixed JDBC, JPA, and NoSQL appenders so that the failover appender properly fails over on error. (<a href="https://issues.apache.org/jira/browse/LOG4J2-291">LOG4J2-291</a>)</p>
</li>
<li>
<p>Changed the ConfigurationFactory to recognize and properly use the classpath: URI scheme in addition to the classloader: URI scheme. (<a href="https://issues.apache.org/jira/browse/LOG4J2-293">LOG4J2-293</a>)</p>
</li>
<li>
<p>Reset the Configuration if the ClassLoaderContextSelector creates a LoggerContext without a configuration location and then is later provided one. (<a href="https://issues.apache.org/jira/browse/LOG4J2-293">LOG4J2-293</a>)</p>
</li>
<li>
<p>Add getThrowable method to ThrowableProxy. (<a href="https://issues.apache.org/jira/browse/LOG4J2-299">LOG4J2-299</a>)</p>
</li>
<li>
<p>Fixed Async Loggers memory leak. (<a href="https://issues.apache.org/jira/browse/LOG4J2-304">LOG4J2-304</a>)</p>
</li>
<li>
<p>Insure jars and distributions only have a single License and Notice file. (<a href="https://issues.apache.org/jira/browse/LOG4J2-309">LOG4J2-309</a>)</p>
</li>
<li>
<p>Fixed issue where SMTPAppender did not send mails with error or fatal level without prior info event. (<a href="https://issues.apache.org/jira/browse/LOG4J2-310">LOG4J2-310</a>)</p>
</li>
<li>
<p>Synchronized flush() and close() methods in the XxxFileManager and OutputStreamManager classes. (<a href="https://issues.apache.org/jira/browse/LOG4J2-311">LOG4J2-311</a>)</p>
</li>
<li>
<p>Double stack trace logging when using %throwable in %style and %highlight. (<a href="https://issues.apache.org/jira/browse/LOG4J2-319">LOG4J2-319</a>)</p>
</li>
<li>
<p>JPAAppender stops logging because META-INF/log4j-provider.properties is left open. (<a href="https://issues.apache.org/jira/browse/LOG4J2-320">LOG4J2-320</a>)</p>
</li>
<li>
<p>Centralized reflective use of Reflection#getCallerClass and properly handled its instability in various versions of Java. (<a href="https://issues.apache.org/jira/browse/LOG4J2-322">LOG4J2-322</a>)</p>
</li>
<li>
<p>FlumePersistentManager was calling Berkeley DB&#8217;s count method too frequently. (<a href="https://issues.apache.org/jira/browse/LOG4J2-328">LOG4J2-328</a>)</p>
</li>
<li>
<p>StatusLogger now only creates StatusData objects if they are the appropriate logging level. (<a href="https://issues.apache.org/jira/browse/LOG4J2-329">LOG4J2-329</a>)</p>
</li>
<li>
<p>Added a BSON Transformer so that MongoDB can persist Log4j events. (<a href="https://issues.apache.org/jira/browse/LOG4J2-330">LOG4J2-330</a>)</p>
</li>
<li>
<p>Removed erroneous check for affected MongoDB records, which always returns zero on inserts. (<a href="https://issues.apache.org/jira/browse/LOG4J2-331">LOG4J2-331</a>)</p>
</li>
<li>
<p>Modified documentation to refer to SLF4J Binding instead of SLF4J Bridge. (<a href="https://issues.apache.org/jira/browse/LOG4J2-332">LOG4J2-332</a>)</p>
</li>
<li>
<p>Match artifact ids with Maven module names. (<a href="https://issues.apache.org/jira/browse/LOG4J2-333">LOG4J2-333</a>)</p>
</li>
<li>
<p>FlumePersistentManager&#8217;s writer thread had high CPU usage. (<a href="https://issues.apache.org/jira/browse/LOG4J2-335">LOG4J2-335</a>)</p>
</li>
<li>
<p>AsyncLogger errors after multiple calls to LoggerContext.reconfigure(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-336">LOG4J2-336</a>)</p>
</li>
<li>
<p>Ignore xml:base attributes. (<a href="https://issues.apache.org/jira/browse/LOG4J2-342">LOG4J2-342</a>)</p>
</li>
<li>
<p>Removed unnecessary generics from Appender interface and implementing classes. (<a href="https://issues.apache.org/jira/browse/LOG4J2-343">LOG4J2-343</a>)</p>
</li>
<li>
<p>Give the AsyncAppender thread a more descriptive name for easier debugging/profiling. (<a href="https://issues.apache.org/jira/browse/LOG4J2-347">LOG4J2-347</a>)</p>
</li>
<li>
<p>[OSGi] wrong Fragment-Host in manifest files. (<a href="https://issues.apache.org/jira/browse/LOG4J2-351">LOG4J2-351</a>)</p>
</li>
<li>
<p>NoSQLAppender using MongoDB provider ignores username and password attributes (<a href="https://issues.apache.org/jira/browse/LOG4J2-358">LOG4J2-358</a>)</p>
</li>
<li>
<p>Changed the Servlet 3.0 auto-initializer so that it does nothing in a Servlet 2.5 or older application. This ensures behavioral consistency across containers. (<a href="https://issues.apache.org/jira/browse/LOG4J2-359">LOG4J2-359</a>)</p>
</li>
<li>
<p>JMS appenders send two messages for one append. (<a href="https://issues.apache.org/jira/browse/LOG4J2-367">LOG4J2-367</a>)</p>
</li>
<li>
<p>Add PatternLayout constructor to Log4j 1.2 bridge for Velocity. (<a href="https://issues.apache.org/jira/browse/LOG4J2-368">LOG4J2-368</a>)</p>
</li>
<li>
<p>Use rollover date when substituting <code>${date}</code> in the <code>filePattern</code>. (<a href="https://issues.apache.org/jira/browse/LOG4J2-380">LOG4J2-380</a>)</p>
</li>
<li>
<p>FlumePersistentManager now handles LockConflictExceptions in Berkeley Db. (<a href="https://issues.apache.org/jira/browse/LOG4J2-391">LOG4J2-391</a>)</p>
</li>
<li>
<p>Initialize PluginManager once during configuration. Move advertisement setup into BaseConfiguration. (<a href="https://issues.apache.org/jira/browse/LOG4J2-393">LOG4J2-393</a>)</p>
</li>
<li>
<p>Allow classpath scheme when specifying configuration file location as a system property. (<a href="https://issues.apache.org/jira/browse/LOG4J2-395">LOG4J2-395</a>)</p>
</li>
<li>
<p>Logger.info(Message) Javadoc is incorrect. (<a href="https://issues.apache.org/jira/browse/LOG4J2-397">LOG4J2-397</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-0-beta8"><a class="anchor" href="#release-notes-2-0-beta8"></a>2.0-beta8</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2013-07-10</p>
</dd>
</dl>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-beta8-changed"><a class="anchor" href="#release-notes-2-0-beta8-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Include arbitrary message fields in RFC-5424 structured data. (<a href="https://issues.apache.org/jira/browse/LOG4J2-168">LOG4J2-168</a>)</p>
</li>
<li>
<p>Improved logging initialization in Servlet containers, especially Servlet 3.0 and newer where Log4j now initializes and deinitializes automatically with no deployment descriptor configuration. (<a href="https://issues.apache.org/jira/browse/LOG4J2-270">LOG4J2-270</a>)</p>
</li>
<li>
<p>Wasted work in XMLLayout.toSerializable(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-273">LOG4J2-273</a>)</p>
</li>
<li>
<p>Wasted work in UUIDUtil initialization. (<a href="https://issues.apache.org/jira/browse/LOG4J2-274">LOG4J2-274</a>)</p>
</li>
<li>
<p>Wasted work in RollingAppenderSizeTest.testAppender() and others. (<a href="https://issues.apache.org/jira/browse/LOG4J2-277">LOG4J2-277</a>)</p>
</li>
<li>
<p>Allow the default status level to be specified as a system property. (<a href="https://issues.apache.org/jira/browse/LOG4J2-282">LOG4J2-282</a>)</p>
</li>
<li>
<p>Remove dependency on Apache ORO jar. (<a href="https://issues.apache.org/jira/browse/LOG4J2-283">LOG4J2-283</a>)</p>
</li>
<li>
<p>Update Log4j 1 dependency to 1.2.17 from 1.2.16. (<a href="https://issues.apache.org/jira/browse/LOG4J2-284">LOG4J2-284</a>)</p>
</li>
<li>
<p>Update Jansi jar to 1.11 from 1.9. (<a href="https://issues.apache.org/jira/browse/LOG4J2-285">LOG4J2-285</a>)</p>
</li>
<li>
<p>Update test H2 JDBC driver to 1.172 from 1.171. (<a href="https://issues.apache.org/jira/browse/LOG4J2-286">LOG4J2-286</a>)</p>
</li>
<li>
<p>Update JUnit to 4.11 from 4.7. (<a href="https://issues.apache.org/jira/browse/LOG4J2-288">LOG4J2-288</a>)</p>
</li>
<li>
<p>LogManager.getLogger can now be called without a logger name or with a null logger name. (<a href="https://issues.apache.org/jira/browse/LOG4J2-294">LOG4J2-294</a>)</p>
</li>
<li>
<p>Add printf methods to Logger API. (<a href="https://issues.apache.org/jira/browse/LOG4J2-301">LOG4J2-301</a>)</p>
</li>
<li>
<p>Update NoSQL dependencies: lightcouch 0.0.6 from 0.0.5, mongodb 2.11.2 from 2.11.1. (<a href="https://issues.apache.org/jira/browse/LOG4J2-386">LOG4J2-386</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-beta8-fixed"><a class="anchor" href="#release-notes-2-0-beta8-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Fix NullPointerException (regression due to fix for LOG4J2-228) (<a href="https://issues.apache.org/jira/browse/LOG4J2-139">LOG4J2-139</a>)</p>
</li>
<li>
<p>FastRollingFileAppender with TimeBasedTriggeringPolicy now works correctly if append=false. (<a href="https://issues.apache.org/jira/browse/LOG4J2-267">LOG4J2-267</a>)</p>
</li>
<li>
<p>FastRollingFileAppender with TimeBasedTriggeringPolicy now works correctly if append=false. (<a href="https://issues.apache.org/jira/browse/LOG4J2-271">LOG4J2-271</a>)</p>
</li>
<li>
<p>FlumeAvroManager fails to notify client of failing event if Flume RPCClient cannot be created. (<a href="https://issues.apache.org/jira/browse/LOG4J2-275">LOG4J2-275</a>)</p>
</li>
<li>
<p>Filter calls from Avro or Flume to be ignored by the FlumeAppender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-278">LOG4J2-278</a>)</p>
</li>
<li>
<p>FlumePersistentManager now calls Berkeley DB from threads to avoid encountering interrupts in the application. (<a href="https://issues.apache.org/jira/browse/LOG4J2-279">LOG4J2-279</a>)</p>
</li>
<li>
<p>AsyncLogger threads are now daemon threads and won&#8217;t prevent the JVM from shutting down anymore. (<a href="https://issues.apache.org/jira/browse/LOG4J2-280">LOG4J2-280</a>)</p>
</li>
<li>
<p>Upgrade javadoc plugin to 2.9.1 to fix javadoc security issue. (<a href="https://issues.apache.org/jira/browse/LOG4J2-289">LOG4J2-289</a>)</p>
</li>
<li>
<p>Fast(Rolling)FileAppender now correctly appends to (does not overwrite) existing file. (<a href="https://issues.apache.org/jira/browse/LOG4J2-292">LOG4J2-292</a>)</p>
</li>
<li>
<p>Fast(Rolling)FileAppender now correctly handles messages exceeding the buffer size. (<a href="https://issues.apache.org/jira/browse/LOG4J2-295">LOG4J2-295</a>)</p>
</li>
<li>
<p>Wasted work in FlumePersistentManager.createManager. (<a href="https://issues.apache.org/jira/browse/LOG4J2-296">LOG4J2-296</a>)</p>
</li>
<li>
<p>Wasted work in TestConfigurator.testEnvironment. (<a href="https://issues.apache.org/jira/browse/LOG4J2-297">LOG4J2-297</a>)</p>
</li>
<li>
<p>Wasted work in StyleConverterTest.setupClass. (<a href="https://issues.apache.org/jira/browse/LOG4J2-298">LOG4J2-298</a>)</p>
</li>
<li>
<p>WriterThread was ending when no agents are available which caused an OutOfMemoryError. (<a href="https://issues.apache.org/jira/browse/LOG4J2-300">LOG4J2-300</a>)</p>
</li>
<li>
<p>Added toString methods to ThreadContextStack/Map implementation classes. (<a href="https://issues.apache.org/jira/browse/LOG4J2-302">LOG4J2-302</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-0-beta7"><a class="anchor" href="#release-notes-2-0-beta7"></a>2.0-beta7</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2013-06-01</p>
</dd>
</dl>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-beta7-added"><a class="anchor" href="#release-notes-2-0-beta7-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Break up core into multiple osgi jars. (<a href="https://issues.apache.org/jira/browse/LOG4J2-10">LOG4J2-10</a>)</p>
</li>
<li>
<p>New JDBC, JPA, and NoSQL database Appenders. (<a href="https://issues.apache.org/jira/browse/LOG4J2-229">LOG4J2-229</a>)</p>
</li>
<li>
<p>Provide configuration information (location, content type, content if possible) via a registered Advertiser. (<a href="https://issues.apache.org/jira/browse/LOG4J2-251">LOG4J2-251</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-beta7-changed"><a class="anchor" href="#release-notes-2-0-beta7-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Improve ThreadContext performance with copy-on-write map and stack. (<a href="https://issues.apache.org/jira/browse/LOG4J2-154">LOG4J2-154</a>)</p>
</li>
<li>
<p>Allow custom LogEventFactories. (<a href="https://issues.apache.org/jira/browse/LOG4J2-243">LOG4J2-243</a>)</p>
</li>
<li>
<p>Allow context parameters in Log4jContextListener to include properties. (<a href="https://issues.apache.org/jira/browse/LOG4J2-249">LOG4J2-249</a>)</p>
</li>
<li>
<p>Add support for interceptors in the embedded Flume Appender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-262">LOG4J2-262</a>)</p>
</li>
<li>
<p>Method name changes in interface org.apache.logging.log4j.spi.ThreadContextMap: getContext() to getCopy(), get() to getImmutableMapOrNull().</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-beta7-fixed"><a class="anchor" href="#release-notes-2-0-beta7-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Remove LoggerContext when LoggerContext is stopped. (<a href="https://issues.apache.org/jira/browse/LOG4J2-223">LOG4J2-223</a>)</p>
</li>
<li>
<p>UDP now sends one event per packet. (<a href="https://issues.apache.org/jira/browse/LOG4J2-228">LOG4J2-228</a>)</p>
</li>
<li>
<p>StringFormattedMessage and MessageFormatMessage now will accept a Throwable as their last argument and pass it on. (<a href="https://issues.apache.org/jira/browse/LOG4J2-242">LOG4J2-242</a>)</p>
</li>
<li>
<p>Rewrite Appender was ignoring filters on referenced appenders. (<a href="https://issues.apache.org/jira/browse/LOG4J2-244">LOG4J2-244</a>)</p>
</li>
<li>
<p>Avoid EmptyStack exception if getCallerClass and SecurityManager are not available. (<a href="https://issues.apache.org/jira/browse/LOG4J2-245">LOG4J2-245</a>)</p>
</li>
<li>
<p>Data buffer is reset in finally clause. (<a href="https://issues.apache.org/jira/browse/LOG4J2-246">LOG4J2-246</a>)</p>
</li>
<li>
<p>SocketServer.isActive should be volatile because it is accessed from different threads. (<a href="https://issues.apache.org/jira/browse/LOG4J2-247">LOG4J2-247</a>)</p>
</li>
<li>
<p>Mark OutputStream in OutputStreamManager as volatile. Mark header and footer as final. (<a href="https://issues.apache.org/jira/browse/LOG4J2-254">LOG4J2-254</a>)</p>
</li>
<li>
<p>Multi-byte character strings are now assumed to be in the platform default encoding, not UTF-8. (<a href="https://issues.apache.org/jira/browse/LOG4J2-255">LOG4J2-255</a>)</p>
</li>
<li>
<p>XML layout ignores charset for the XML processing instruction&#8217;s encoding attribute. (<a href="https://issues.apache.org/jira/browse/LOG4J2-257">LOG4J2-257</a>)</p>
</li>
<li>
<p>HTML layout does not output meta element for charset. (<a href="https://issues.apache.org/jira/browse/LOG4J2-258">LOG4J2-258</a>)</p>
</li>
<li>
<p>HTML layout does not specify charset in content type. (<a href="https://issues.apache.org/jira/browse/LOG4J2-259">LOG4J2-259</a>)</p>
</li>
<li>
<p>XML layout does not specify charset in content type. (<a href="https://issues.apache.org/jira/browse/LOG4J2-260">LOG4J2-260</a>)</p>
</li>
<li>
<p>Add missing "not" to error message. (<a href="https://issues.apache.org/jira/browse/LOG4J2-261">LOG4J2-261</a>)</p>
</li>
<li>
<p>Do not allow a charset on RFC5424Layout - use UTF-8. (<a href="https://issues.apache.org/jira/browse/LOG4J2-263">LOG4J2-263</a>)</p>
</li>
<li>
<p>Add guid to FlumeEvent headers for non-Map Messages. (<a href="https://issues.apache.org/jira/browse/LOG4J2-268">LOG4J2-268</a>)</p>
</li>
<li>
<p>Use transaction when batch size is 1. (<a href="https://issues.apache.org/jira/browse/LOG4J2-269">LOG4J2-269</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-0-beta6"><a class="anchor" href="#release-notes-2-0-beta6"></a>2.0-beta6</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2013-05-05</p>
</dd>
</dl>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-beta6-changed"><a class="anchor" href="#release-notes-2-0-beta6-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Documentation updates to clarify use and impact of location in pattern layouts. (<a href="https://issues.apache.org/jira/browse/LOG4J2-225">LOG4J2-225</a>)</p>
</li>
<li>
<p>Improved error reporting when misconfigured. (<a href="https://issues.apache.org/jira/browse/LOG4J2-230">LOG4J2-230</a>)</p>
</li>
<li>
<p>Moved JMX Client GUI classes into separate jmx-gui submodule. (<a href="https://issues.apache.org/jira/browse/LOG4J2-237">LOG4J2-237</a>)</p>
</li>
<li>
<p>Moved Clock interface to package org.apache.logging.log4j.core.helpers.</p>
</li>
<li>
<p>Removed CheckStyle false positives for NewlineAtEndOfFile and whitespace following '*' at end of line in javadoc.</p>
</li>
<li>
<p>Renamed AsynchAppender to AsyncAppender. Plugin name became Async (was Asynch).</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-beta6-fixed"><a class="anchor" href="#release-notes-2-0-beta6-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Use OSGi version format in Fragment-Host (<a href="https://issues.apache.org/jira/browse/LOG4J2-159">LOG4J2-159</a>)</p>
</li>
<li>
<p>Add support for interpolating Environment variables when processing the configuration. (<a href="https://issues.apache.org/jira/browse/LOG4J2-192">LOG4J2-192</a>)</p>
</li>
<li>
<p>Renamed Plugin annotation attribute from "type" to "category". (<a href="https://issues.apache.org/jira/browse/LOG4J2-201">LOG4J2-201</a>)</p>
</li>
<li>
<p>Various small documentation fixes. (<a href="https://issues.apache.org/jira/browse/LOG4J2-215">LOG4J2-215</a>)</p>
</li>
<li>
<p>Ensure PluginManager streams are always closed. (<a href="https://issues.apache.org/jira/browse/LOG4J2-217">LOG4J2-217</a>)</p>
</li>
<li>
<p>Fix: install default root logger if not configured (this is unchanged), but make sure to include configured named loggers. Clarified documentation. (<a href="https://issues.apache.org/jira/browse/LOG4J2-219">LOG4J2-219</a>)</p>
</li>
<li>
<p>Remove hundreds of compiler warnings. (<a href="https://issues.apache.org/jira/browse/LOG4J2-221">LOG4J2-221</a>)</p>
</li>
<li>
<p>Disruptor will now shut down during Tomcat shutdown. (<a href="https://issues.apache.org/jira/browse/LOG4J2-222">LOG4J2-222</a>)</p>
</li>
<li>
<p>Fix LoggerContext start and stop to eliminate IllegalStateException and NoClassDefFound errors. (<a href="https://issues.apache.org/jira/browse/LOG4J2-223">LOG4J2-223</a>)</p>
</li>
<li>
<p>The FlumeAppender failed to start if the Flume RPCClient could not connect to any Flume agents. (<a href="https://issues.apache.org/jira/browse/LOG4J2-224">LOG4J2-224</a>)</p>
</li>
<li>
<p>Logger.getParent() was not returning the correct Logger. (<a href="https://issues.apache.org/jira/browse/LOG4J2-231">LOG4J2-231</a>)</p>
</li>
<li>
<p>Fixed link to log4j-user mailing list. (<a href="https://issues.apache.org/jira/browse/LOG4J2-233">LOG4J2-233</a>)</p>
</li>
<li>
<p>RegexFilter threw a NullPointerException when used as a context-wide filter. (<a href="https://issues.apache.org/jira/browse/LOG4J2-234">LOG4J2-234</a>)</p>
</li>
<li>
<p>Removed dependency on tools jar from core module, made jconsole dependency optional. (<a href="https://issues.apache.org/jira/browse/LOG4J2-235">LOG4J2-235</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-0-beta5"><a class="anchor" href="#release-notes-2-0-beta5"></a>2.0-beta5</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2013-04-20</p>
</dd>
</dl>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-beta5-added"><a class="anchor" href="#release-notes-2-0-beta5-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Added FlumePersistentManager which writes to BerkeleyDB and then writes to Flume asynchronously.</p>
</li>
<li>
<p>Expose file appender configuration details via an advertisement mechanism. (<a href="https://issues.apache.org/jira/browse/LOG4J2-155">LOG4J2-155</a>)</p>
</li>
<li>
<p>Add support for asynchronous loggers. (<a href="https://issues.apache.org/jira/browse/LOG4J2-163">LOG4J2-163</a>)</p>
</li>
<li>
<p>Add methods is/setEndOfBatch to LogEvent. (<a href="https://issues.apache.org/jira/browse/LOG4J2-164">LOG4J2-164</a>)</p>
</li>
<li>
<p>Add Logger interface APIs to log at given levels. (<a href="https://issues.apache.org/jira/browse/LOG4J2-179">LOG4J2-179</a>)</p>
</li>
<li>
<p>Add tag library. (<a href="https://issues.apache.org/jira/browse/LOG4J2-187">LOG4J2-187</a>)</p>
</li>
<li>
<p>Add JMX support. (<a href="https://issues.apache.org/jira/browse/LOG4J2-207">LOG4J2-207</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-beta5-changed"><a class="anchor" href="#release-notes-2-0-beta5-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Allow Logger and LoggerContext to be subclassed. (<a href="https://issues.apache.org/jira/browse/LOG4J2-151">LOG4J2-151</a>)</p>
</li>
<li>
<p>Added ability to include or exclude location information. (<a href="https://issues.apache.org/jira/browse/LOG4J2-153">LOG4J2-153</a>)</p>
</li>
<li>
<p>Allowed Loggers access to the properties in the LoggerConfig. (<a href="https://issues.apache.org/jira/browse/LOG4J2-157">LOG4J2-157</a>)</p>
</li>
<li>
<p>Add RFC 5424 compliant escaping rules to RFC5424Layout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-158">LOG4J2-158</a>)</p>
</li>
<li>
<p>Move Throwable pattern converter options processing to ThrowableFormatOptions class. (<a href="https://issues.apache.org/jira/browse/LOG4J2-160">LOG4J2-160</a>)</p>
</li>
<li>
<p>Move async subproject into core. (<a href="https://issues.apache.org/jira/browse/LOG4J2-208">LOG4J2-208</a>)</p>
</li>
<li>
<p>Async documentation update. (<a href="https://issues.apache.org/jira/browse/LOG4J2-214">LOG4J2-214</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-beta5-fixed"><a class="anchor" href="#release-notes-2-0-beta5-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Add Fragment-Host to MANIFEST.MF for log4j-core. (<a href="https://issues.apache.org/jira/browse/LOG4J2-159">LOG4J2-159</a>)</p>
</li>
<li>
<p>Modify ClassLoaderContextSelector to use the first ClassLoader in the child parent hierarchy that has a Context with a configuration to allow JSPs to use the WebApp&#8217;s context and configuration. (<a href="https://issues.apache.org/jira/browse/LOG4J2-161">LOG4J2-161</a>)</p>
</li>
<li>
<p>Configurator throws a ClassCastException if LogManager returns a SimpleLoggerContext. (<a href="https://issues.apache.org/jira/browse/LOG4J2-167">LOG4J2-167</a>)</p>
</li>
<li>
<p>ConfigurationFactory was adding factories on every call. (<a href="https://issues.apache.org/jira/browse/LOG4J2-169">LOG4J2-169</a>)</p>
</li>
<li>
<p>Plugin cache should be reset when addPackages is called. (<a href="https://issues.apache.org/jira/browse/LOG4J2-175">LOG4J2-175</a>)</p>
</li>
<li>
<p>Avoid IllegalArgumentException in AsynchAppender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-176">LOG4J2-176</a>)</p>
</li>
<li>
<p>Fix NullPointerException in DatagramOutputStream when flush is called from multiple threads. (<a href="https://issues.apache.org/jira/browse/LOG4J2-177">LOG4J2-177</a>)</p>
</li>
<li>
<p>OutputStreamManager now adds the layout header whenever the OutputStream is set. (<a href="https://issues.apache.org/jira/browse/LOG4J2-181">LOG4J2-181</a>)</p>
</li>
<li>
<p>AppenderRefs on AsynchAppender didn&#8217;t support the level and filter elements. (<a href="https://issues.apache.org/jira/browse/LOG4J2-188">LOG4J2-188</a>)</p>
</li>
<li>
<p>The blocking parameter did not work properly on AsynchAppender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-189">LOG4J2-189</a>)</p>
</li>
<li>
<p>BaseConfiguration addLoggerAppender saved appender using the Logger name. (<a href="https://issues.apache.org/jira/browse/LOG4J2-190">LOG4J2-190</a>)</p>
</li>
<li>
<p>RollingFastFileAppender (in log4j-async) did not roll over. (<a href="https://issues.apache.org/jira/browse/LOG4J2-193">LOG4J2-193</a>)</p>
</li>
<li>
<p>ThrowableFormatOptionsTest failed on Windows due to CR/LF issue. (<a href="https://issues.apache.org/jira/browse/LOG4J2-194">LOG4J2-194</a>)</p>
</li>
<li>
<p>Unit tests now create files in the target directory. (<a href="https://issues.apache.org/jira/browse/LOG4J2-195">LOG4J2-195</a>)</p>
</li>
<li>
<p>FlumeAvroManager now uses Flume RPCClient. (<a href="https://issues.apache.org/jira/browse/LOG4J2-196">LOG4J2-196</a>)</p>
</li>
<li>
<p>FlumeAvroManager now uses Flume RPCClient. (<a href="https://issues.apache.org/jira/browse/LOG4J2-198">LOG4J2-198</a>)</p>
</li>
<li>
<p>Highlight subprojects in sub-navigation. (<a href="https://issues.apache.org/jira/browse/LOG4J2-199">LOG4J2-199</a>)</p>
</li>
<li>
<p>LoggerContext method renamed to removeFilter from removeFiler. (<a href="https://issues.apache.org/jira/browse/LOG4J2-200">LOG4J2-200</a>)</p>
</li>
<li>
<p>Fix deadlock in SocketAppender. Added option to not wait for socket reconnect. (<a href="https://issues.apache.org/jira/browse/LOG4J2-205">LOG4J2-205</a>)</p>
</li>
<li>
<p>Use the Maven group ID org.apache.logging.log4j for all artifacts. (<a href="https://issues.apache.org/jira/browse/LOG4J2-207">LOG4J2-207</a>)</p>
</li>
<li>
<p>MapMessage was not enclosing key value in quotes when generating XML. (<a href="https://issues.apache.org/jira/browse/LOG4J2-210">LOG4J2-210</a>)</p>
</li>
<li>
<p>Removing extra spaces in entry and exit method output. (<a href="https://issues.apache.org/jira/browse/LOG4J2-211">LOG4J2-211</a>)</p>
</li>
<li>
<p>Call LoggerContext.stop when the application is shutdown. (<a href="https://issues.apache.org/jira/browse/LOG4J2-212">LOG4J2-212</a>)</p>
</li>
<li>
<p>Loggers without a "." had no parent logger. (<a href="https://issues.apache.org/jira/browse/LOG4J2-212">LOG4J2-212</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-0-beta4"><a class="anchor" href="#release-notes-2-0-beta4"></a>2.0-beta4</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2013-01-28</p>
</dd>
</dl>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-beta4-added"><a class="anchor" href="#release-notes-2-0-beta4-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Add MessageFormatMessage and FormattedMessage.</p>
</li>
<li>
<p>Added Flume Appender samples.</p>
</li>
<li>
<p>Added Log4j 2 to SLF4J adapter.</p>
</li>
<li>
<p>Added hostName and contextName to property map.</p>
</li>
<li>
<p>Add SMTPAppender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-131">LOG4J2-131</a>)</p>
</li>
<li>
<p>Allow custom message creation via a message factory. (<a href="https://issues.apache.org/jira/browse/LOG4J2-133">LOG4J2-133</a>)</p>
</li>
<li>
<p>Use %red, %white, %blue, and so on in the console appender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-134">LOG4J2-134</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-beta4-changed"><a class="anchor" href="#release-notes-2-0-beta4-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Renamed log4j12-api to log4j-1.2-api. (<a href="https://issues.apache.org/jira/browse/LOG4J2-110">LOG4J2-110</a>)</p>
</li>
<li>
<p>Add unit test to verify exceptions are thrown when the socket connection fails. (<a href="https://issues.apache.org/jira/browse/LOG4J2-122">LOG4J2-122</a>)</p>
</li>
<li>
<p>Add follow attribute to Console Appender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-128">LOG4J2-128</a>)</p>
</li>
<li>
<p>Allow newlines to be escaped in Syslog and RFC5424 layouts. Allow Throwables to be included in the output from RFC5424Layout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-136">LOG4J2-136</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-beta4-fixed"><a class="anchor" href="#release-notes-2-0-beta4-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Allow FlumeAvroManager to initialize even if it cannot connect to an agent.</p>
</li>
<li>
<p>Enhanced javadoc copyright statement. (<a href="https://issues.apache.org/jira/browse/LOG4J2-111">LOG4J2-111</a>)</p>
</li>
<li>
<p>StructuredDataFilter createFilter was annotated with PluginAttr instead of PluginElement for the KeyValuePairs. (<a href="https://issues.apache.org/jira/browse/LOG4J2-113">LOG4J2-113</a>)</p>
</li>
<li>
<p>StructuredDataMessage was validating the length of the values in the event Map instead of the lengths of the keys. (<a href="https://issues.apache.org/jira/browse/LOG4J2-114">LOG4J2-114</a>)</p>
</li>
<li>
<p>ThreadContext Map elements with null values are now ignored when constructing a Flume event and in the RFC5424 Layout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-115">LOG4J2-115</a>)</p>
</li>
<li>
<p>File renaming was using the wrong date value. Enhanced DefaultRolloverStrategy to store newest files in highest index as well as lowest. (<a href="https://issues.apache.org/jira/browse/LOG4J2-116">LOG4J2-116</a>)</p>
</li>
<li>
<p>A broken socket connection would cause the TCPSocketManager to continuously reconnect. (<a href="https://issues.apache.org/jira/browse/LOG4J2-119">LOG4J2-119</a>)</p>
</li>
<li>
<p>TCPSocketManager would fail if the initial connection could not be established. (<a href="https://issues.apache.org/jira/browse/LOG4J2-120">LOG4J2-120</a>)</p>
</li>
<li>
<p>The example for ThreadContextMapFilter was incorrect. (<a href="https://issues.apache.org/jira/browse/LOG4J2-123">LOG4J2-123</a>)</p>
</li>
<li>
<p>JMSQueue and JMSTopic Appenders did not allow name to be specified. (<a href="https://issues.apache.org/jira/browse/LOG4J2-125">LOG4J2-125</a>)</p>
</li>
<li>
<p>Allow JMS appenders to recover if the queue or topic is unavailable. (<a href="https://issues.apache.org/jira/browse/LOG4J2-126">LOG4J2-126</a>)</p>
</li>
<li>
<p>AbstractLogger methods were not passing Markers to the isEnabled methods. (<a href="https://issues.apache.org/jira/browse/LOG4J2-127">LOG4J2-127</a>)</p>
</li>
<li>
<p>RoutingAppender was only creating a single appender for the default Route. (<a href="https://issues.apache.org/jira/browse/LOG4J2-129">LOG4J2-129</a>)</p>
</li>
<li>
<p>PatternLayout should format throwables without requiring a converter. (<a href="https://issues.apache.org/jira/browse/LOG4J2-130">LOG4J2-130</a>)</p>
</li>
<li>
<p>AbstractLogger.catching(Throwable) checks for DEBUG level but logs at ERROR level. (<a href="https://issues.apache.org/jira/browse/LOG4J2-132">LOG4J2-132</a>)</p>
</li>
<li>
<p>BaseConfiguration does not close the first appender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-135">LOG4J2-135</a>)</p>
</li>
<li>
<p>Fix hang in Dumbster SMTP test server. (<a href="https://issues.apache.org/jira/browse/LOG4J2-137">LOG4J2-137</a>)</p>
</li>
<li>
<p>Fix null pointer exception in SocketAppender if no protocol is specified. The protocol will default to TCP for the SocketAppender and UDP for the SyslogAppender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-139">LOG4J2-139</a>)</p>
</li>
<li>
<p>Typo in documentation of SocketAppender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-140">LOG4J2-140</a>)</p>
</li>
<li>
<p>Serialized LogEvents were not reset in the output stream causing them to deserialize incorrectly. (<a href="https://issues.apache.org/jira/browse/LOG4J2-142">LOG4J2-142</a>)</p>
</li>
<li>
<p>MessagePatternConverter now returns "null" if the log message is null. (<a href="https://issues.apache.org/jira/browse/LOG4J2-143">LOG4J2-143</a>)</p>
</li>
<li>
<p>NullPointerException in RFC5424Layout. (<a href="https://issues.apache.org/jira/browse/LOG4J2-144">LOG4J2-144</a>)</p>
</li>
<li>
<p>Add missing serial version IDs. (<a href="https://issues.apache.org/jira/browse/LOG4J2-145">LOG4J2-145</a>)</p>
</li>
<li>
<p>ThreadContextMapFilter was matching on the key instead of the value of the key. (<a href="https://issues.apache.org/jira/browse/LOG4J2-147">LOG4J2-147</a>)</p>
</li>
<li>
<p>SMTPAppender will only cache filtered events. (<a href="https://issues.apache.org/jira/browse/LOG4J2-149">LOG4J2-149</a>)</p>
</li>
<li>
<p>Convert all System.getProperty calls to use PropertiesUtil to suppress SecurityExceptions. (<a href="https://issues.apache.org/jira/browse/LOG4J2-150">LOG4J2-150</a>)</p>
</li>
<li>
<p>RollingFileAppender&#8217;s FileRenameAction was throwing a NullPointerException if no directory was specified on the target file name. (<a href="https://issues.apache.org/jira/browse/LOG4J2-152">LOG4J2-152</a>)</p>
</li>
<li>
<p>LocalizedMessageTest fails on linux system. (<a href="https://issues.apache.org/jira/browse/LOG4J2-156">LOG4J2-156</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-0-beta3"><a class="anchor" href="#release-notes-2-0-beta3"></a>2.0-beta3</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2012-11-11</p>
</dd>
</dl>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-beta3-added"><a class="anchor" href="#release-notes-2-0-beta3-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Added PropertiesRewritePolicy and ability to define properties on a Logger. (<a href="https://issues.apache.org/jira/browse/LOG4J2-28">LOG4J2-28</a>)</p>
</li>
<li>
<p>Added ability to configure from an InputSource. (<a href="https://issues.apache.org/jira/browse/LOG4J2-55">LOG4J2-55</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-beta3-changed"><a class="anchor" href="#release-notes-2-0-beta3-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Created combined jar to combine API and Core contents for users who only want the Log4j implementation.</p>
</li>
<li>
<p>Add ability to customize the names of the Levels in the LevelPatternConverter. (<a href="https://issues.apache.org/jira/browse/LOG4J2-105">LOG4J2-105</a>)</p>
</li>
<li>
<p>Added font and fontSize parameters to HTMLLayout. Replace newlines in message with br tag. (<a href="https://issues.apache.org/jira/browse/LOG4J2-29">LOG4J2-29</a>)</p>
</li>
<li>
<p>Add ThreadContext.push(String format, Object&#8230;&#8203; args) (<a href="https://issues.apache.org/jira/browse/LOG4J2-85">LOG4J2-85</a>)</p>
</li>
<li>
<p>Build pdf of user&#8217;s guide. (<a href="https://issues.apache.org/jira/browse/LOG4J2-87">LOG4J2-87</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-beta3-fixed"><a class="anchor" href="#release-notes-2-0-beta3-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Avoid NPE when duplicate LoggerContextFactorys are present. Allow factories to specify a weight to allow real implementations to outrank test implementations. Provide a simple default LoggerContextFactory.</p>
</li>
<li>
<p>A NullPointerException would occur if no format value was passed to the SyslogAppender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-101">LOG4J2-101</a>)</p>
</li>
<li>
<p>The Facility value was being improperly calculated. (<a href="https://issues.apache.org/jira/browse/LOG4J2-102">LOG4J2-102</a>)</p>
</li>
<li>
<p>The LogEvent was wrapping a ThrowableProxy with another ThrowableProxy when deserializing. (<a href="https://issues.apache.org/jira/browse/LOG4J2-103">LOG4J2-103</a>)</p>
</li>
<li>
<p>Convert LogManager binding to use "regular" java properties instead of XML properties to work around a bug in Oracle&#8217;s xmlparserv2 jar. (<a href="https://issues.apache.org/jira/browse/LOG4J2-104">LOG4J2-104</a>)</p>
</li>
<li>
<p>PatternParser was not properly handling adjacent nested options (<a href="https://issues.apache.org/jira/browse/LOG4J2-107">LOG4J2-107</a>)</p>
</li>
<li>
<p>Fix NullPointerException in ClassLoaderContextSelector when no class is returned from the SecurityManager. (<a href="https://issues.apache.org/jira/browse/LOG4J2-108">LOG4J2-108</a>)</p>
</li>
<li>
<p>Interpolator was not stripping Lookup key separator when trying to locate the default value for a variable. (<a href="https://issues.apache.org/jira/browse/LOG4J2-94">LOG4J2-94</a>)</p>
</li>
<li>
<p>Add support for loading plugins inside the OSGi bundle. (<a href="https://issues.apache.org/jira/browse/LOG4J2-95">LOG4J2-95</a>)</p>
</li>
<li>
<p>Added several missing classes and methods for Log4j 1.x compatibility. (<a href="https://issues.apache.org/jira/browse/LOG4J2-97">LOG4J2-97</a>)</p>
</li>
<li>
<p>MapRewritePolicy had an extra call to putAll that caused updates to behave like adds. (<a href="https://issues.apache.org/jira/browse/LOG4J2-99">LOG4J2-99</a>)</p>
</li>
<li>
<p>Log4j 1.2 Category.forcedLog was wrapping the message with an ObjectMessage even if the parameter was an ObjectMessage.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-0-beta2"><a class="anchor" href="#release-notes-2-0-beta2"></a>2.0-beta2</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2012-10-07</p>
</dd>
</dl>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-beta2-added"><a class="anchor" href="#release-notes-2-0-beta2-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Add getFormats to MultiformatMessage and allow StructuredDataMessage to format as XML.</p>
</li>
<li>
<p>Add support for ANSI colors by adding the highlight and style pattern converters. Fix pattern parsing to allow nested patterns.</p>
</li>
<li>
<p>Allow the status logging to be directed to stderr or to a file.</p>
</li>
<li>
<p>Add interval and modulate options to TimeBasedTriggeringPolicy to allow more fine-grained control of when file rolling should occur. (<a href="https://issues.apache.org/jira/browse/LOG4J2-35">LOG4J2-35</a>)</p>
</li>
<li>
<p>Add support for filtering packages from stack traces. (<a href="https://issues.apache.org/jira/browse/LOG4J2-58">LOG4J2-58</a>)</p>
</li>
<li>
<p>If system property "disableThreadContextMap" is set puts to the ThreadContext will be ignored. If system property "disableThreadContext" is set both puts and pushes will be ignored. (<a href="https://issues.apache.org/jira/browse/LOG4J2-83">LOG4J2-83</a>)</p>
</li>
<li>
<p>If system property "disableThreadContextStack" is set pushes to the ThreadContext will be ignored. If system property "disableThreadContext" is set both puts and pushes will be ignored. (<a href="https://issues.apache.org/jira/browse/LOG4J2-84">LOG4J2-84</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-beta2-changed"><a class="anchor" href="#release-notes-2-0-beta2-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Made ParameterizedMessage, StringFormattedMessage and ThreadDumpMessage immutable. LocalizedMessage is immutable except that it will be updated with the logger name when it is added to the LogEvent.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-beta2-fixed"><a class="anchor" href="#release-notes-2-0-beta2-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>DefaultConfiguration was not starting the Console Appender.</p>
</li>
<li>
<p>If the ThreadContext map is empty the LogEvent will contain a null value to reduce the overhead of creating log events and in the size of the serialized object. (<a href="https://issues.apache.org/jira/browse/LOG4J2-83">LOG4J2-83</a>)</p>
</li>
<li>
<p>If the ThreadContext stack is empty the LogEvent will contain a null value to reduce the overhead of creating log events and in the size of the serialized object. Changed the ThreadContext stack to use a custom stack interface instead of java.util.Stack as that class is overly heavy. This change will cause an API incompatibility. (<a href="https://issues.apache.org/jira/browse/LOG4J2-84">LOG4J2-84</a>)</p>
</li>
<li>
<p>Many logging methods in AbstractLogger were set to an incorrect logging level. catching was using the THROWING marker and was set to debug instead of error. (<a href="https://issues.apache.org/jira/browse/LOG4J2-88">LOG4J2-88</a>)</p>
</li>
<li>
<p>Add documentation on client vs server mode to performance page. (<a href="https://issues.apache.org/jira/browse/LOG4J2-90">LOG4J2-90</a>)</p>
</li>
<li>
<p>Log4j 1.2 adapter&#8217;s Category class was missing 3 log methods. (<a href="https://issues.apache.org/jira/browse/LOG4J2-91">LOG4J2-91</a>)</p>
</li>
<li>
<p>Converted DynamicThresholdFilter to use KeyValuePair. Fixed bugs in the Map-based filters to allow declaration of multiple values for a key to match the documentation. (<a href="https://issues.apache.org/jira/browse/LOG4J2-92">LOG4J2-92</a>)</p>
</li>
<li>
<p>Move variable substitution from PatternLayout to appropriate converters to improve performance.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-0-beta1"><a class="anchor" href="#release-notes-2-0-beta1"></a>2.0-beta1</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2012-09-18</p>
</dd>
</dl>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-beta1-added"><a class="anchor" href="#release-notes-2-0-beta1-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Added AsynchAppender.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-beta1-changed"><a class="anchor" href="#release-notes-2-0-beta1-changed"></a>Changed</h3>
<div class="ulist">
<ul>
<li>
<p>Update the versions of SLF4J and Logback.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-beta1-fixed"><a class="anchor" href="#release-notes-2-0-beta1-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Created web module to allow web applications to include the Log4j context listener in WEB-INF/lib even if Log4j is in the container&#8217;s class path. Allow locating the LoggerContext to include the ClassLoader. Updated the Loader utility to always choose the child ClassLoader. Verified in Jboss 5 and Tomcat.</p>
</li>
<li>
<p>FileRenameAction did not create the parent directories of the archive files causing the rollover to fail. (<a href="https://issues.apache.org/jira/browse/LOG4J2-71">LOG4J2-71</a>)</p>
</li>
<li>
<p>NullPointerException in RollingFileManager when filePattern does not cause the file to be compressed. (<a href="https://issues.apache.org/jira/browse/LOG4J2-72">LOG4J2-72</a>)</p>
</li>
<li>
<p>Logger.error(Marker, Message, Throwable) was internally using Level.TRACE. (<a href="https://issues.apache.org/jira/browse/LOG4J2-74">LOG4J2-74</a>)</p>
</li>
<li>
<p>Enhanced Log4jContextListener to accept a configuration file location. Modified FileConfigurationMonitor to monitor files configured that way. Fixed other reconfiguration related bugs. Tested in JBoss and Tomcat. (<a href="https://issues.apache.org/jira/browse/LOG4J2-75">LOG4J2-75</a>)</p>
</li>
<li>
<p>RewriteAppender was calling the stop method of the referenced appender causing the referenced appender&#8217;s manager to have its use count decremented too many times. (<a href="https://issues.apache.org/jira/browse/LOG4J2-76">LOG4J2-76</a>)</p>
</li>
<li>
<p>RoutingAppender was calling the stop method for each of its referenced Appenders and was calling the stop method of the default Appender a second time. It will now only call the stop method of Appenders it creates. (<a href="https://issues.apache.org/jira/browse/LOG4J2-77">LOG4J2-77</a>)</p>
</li>
<li>
<p>LogFactoryImpl.setAttribute in the Commons Logging bridge got a NullPointerException when passed a null value. It will now remove the attribute. (<a href="https://issues.apache.org/jira/browse/LOG4J2-78">LOG4J2-78</a>)</p>
</li>
<li>
<p>Allow Log4j 2 to be used as the implementation with SLF4J and SLF4J&#8217;s jcl-over-slf4j by adding filtering to the log method in SLF4JLogger. (<a href="https://issues.apache.org/jira/browse/LOG4J2-80">LOG4J2-80</a>)</p>
</li>
<li>
<p>PatternLayout was not honoring format modifiers. (<a href="https://issues.apache.org/jira/browse/LOG4J2-81">LOG4J2-81</a>)</p>
</li>
<li>
<p>MarkerFilter called MarkerManager.getMarker causing the Marker to be created during the processing of the configuration. This prevents the application from creating the Marker with any parents. MarkerWrapper in SLF4J-impl was getting a ClassCastException in instanceOf because the Marker isn&#8217;t a MarkerWrapper. (<a href="https://issues.apache.org/jira/browse/LOG4J2-82">LOG4J2-82</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-0-alpha2"><a class="anchor" href="#release-notes-2-0-alpha2"></a>2.0-alpha2</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2012-08-24</p>
</dd>
</dl>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-alpha2-added"><a class="anchor" href="#release-notes-2-0-alpha2-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Allow components besides core to create a PluginMap for faster plugin loading and not having to specify the plugin package in the configuration. (<a href="https://issues.apache.org/jira/browse/LOG4J2-67">LOG4J2-67</a>)</p>
</li>
<li>
<p>Add support for formatting using String.format(). (<a href="https://issues.apache.org/jira/browse/LOG4J2-68">LOG4J2-68</a>)</p>
</li>
<li>
<p>Allow Flume agents to be embedded into the Flume Appender. (<a href="https://issues.apache.org/jira/browse/LOG4J2-69">LOG4J2-69</a>)</p>
</li>
<li>
<p>Add getLogger(Class) to LogManager. (<a href="https://issues.apache.org/jira/browse/LOG4J2-70">LOG4J2-70</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-alpha2-fixed"><a class="anchor" href="#release-notes-2-0-alpha2-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Fix compilation problems in Java 7. (<a href="https://issues.apache.org/jira/browse/LOG4J2-64">LOG4J2-64</a>)</p>
</li>
<li>
<p>Allow variable substitution on the configuration attributes and on the root log level. (<a href="https://issues.apache.org/jira/browse/LOG4J2-65">LOG4J2-65</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes-2-0-alpha1"><a class="anchor" href="#release-notes-2-0-alpha1"></a>2.0-alpha1</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Release date</dt>
<dd>
<p>2012-07-29</p>
</dd>
</dl>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-alpha1-added"><a class="anchor" href="#release-notes-2-0-alpha1-added"></a>Added</h3>
<div class="ulist">
<ul>
<li>
<p>Added ability to filter on the AppenderRef by adding either a level or a filter. (<a href="https://issues.apache.org/jira/browse/LOG4J2-60">LOG4J2-60</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release-notes-2-0-alpha1-fixed"><a class="anchor" href="#release-notes-2-0-alpha1-fixed"></a>Fixed</h3>
<div class="ulist">
<ul>
<li>
<p>Make sure all application facing log methods use their own FQCN. This patch resolves a unit test failure for the %C pattern when using the Category logger. (<a href="https://issues.apache.org/jira/browse/LOG4J2-50">LOG4J2-50</a>)</p>
</li>
<li>
<p>Remove LoggerContext support for custom logger factories. All Loggers returned by LoggerContext should be compatible and of the same type. (<a href="https://issues.apache.org/jira/browse/LOG4J2-51">LOG4J2-51</a>)</p>
</li>
<li>
<p>Level.toLevel would throw an IllegalArgumentException instead of returning the default value. (<a href="https://issues.apache.org/jira/browse/LOG4J2-56">LOG4J2-56</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>
    Copyright © 1999-2025 <a href="https://www.apache.org/">The Apache Software Foundation</a>.
    Licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache Software License, Version 2.0</a>.
    Please read our <a href="https://privacy.apache.org/policies/privacy-policy-public.html">privacy policy</a>.
  </p>
  <p>
    Apache, Log4j, and the Apache feather logo are trademarks or registered trademarks of The Apache Software Foundation.
    Oracle and Java are registered trademarks of Oracle and/or its affiliates.
    Other names may be trademarks of their respective owners.
  </p>
</footer>
<!-- Matomo -->
<script>
  var _paq = window._paq = window._paq || [];
  _paq.push(["disableCookies"]);
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://analytics.apache.org/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '42']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="https://analytics.apache.org/matomo.php?idsite=42&amp;rec=1" style="border:0;" alt="" /></p></noscript>
<!-- End Matomo Code -->
<script id="site-script" src="./_/js/site.js" data-ui-root-path="./_"></script>
<script async src="./_/js/vendor/highlight.js"></script>
<!-- `@asciidoctor/tabs` extension scripts -->
<script async src="./_/js/vendor/tabs.js"></script>
  </body>
</html>
