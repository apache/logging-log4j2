<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Markers :: Apache Log4j</title>
    <link rel="canonical" href="https://logging.apache.org/log4j/2.x/manual/markers.html">
    <meta name="generator" content="Antora 3.2.0-alpha.6">
<link rel="stylesheet" href="../_/css/site.css">
<link rel="icon" href="../_/../_images/favicon.ico" type="image/x-icon">
<!-- `@asciidoctor/tabs` extension styles -->
<link rel="stylesheet" href="../_/css/vendor/tabs.css">
<style>
  /* Swap colors of `IMPORTANT` and `WARNING` blocks */ 
  .doc .admonitionblock.important .icon { background-color: #f70; }
  .doc .admonitionblock.warning .icon { background-color: #e40046; }
  /* Default `h4`, `h5`, and `h6` are smaller than the normal text, fix header font sizing: */
  .doc h1 { font-size: 1.9rem; }
  .doc h2 { font-size: 1.7rem; }
  .doc h3 { font-size: 1.5rem; font-weight: 400; }
  .doc h4 { font-size: 1.3rem; font-weight: 500; }
  .doc h5 { font-size: 1.1rem; font-weight: 500; text-decoration: underline; }
  .doc h6 { font-size: 0.9rem; font-weight: 500; text-decoration: underline; }
  /* Default `code`, `pre`, and `.colist` (source code annotations) fonts are too big, adjust them: */
  .doc .colist>table code, .doc p code, .doc thead code { font-size: 0.8em; }
  .doc pre { font-size: 0.7rem; }
  .doc .colist { font-size: 0.75rem; }
  /* Make links more visible: */
  .doc a { text-decoration: underline; }
  .doc a code { text-decoration: underline; color: #1565c0; }
  /* Tab header fonts aren't rendered good, adjusting the font weight: */
  .tablist > ul li { font-weight: 500; }
  /* `page-toclevels` greater than 4 are not supported by Antora UI, patching it: */
  .toc .toc-menu li[data-level="4"] a {
    padding-left: 2.75rem;
  }
  /* Replace the default highlight.js color for strings from red (unnecessarily signaling something negative) to green: */
  .hljs-string {
    color: #0f8532;
  }
</style>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="navbar-item">
        <img src="../_/../_images/logo-small-white.png" alt="Apache Log4j"/>
      </div>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://logging.apache.org">a subproject of&nbsp;<strong>Apache Logging Services</strong></a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="ROOT" data-version="">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="../index.html">Home</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../download.html">Download</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../release-notes.html">Release Notes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="https://logging.apache.org/support.html">Support</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://logging.apache.org/security.html">Security</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Manual</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="getting-started.html">Getting started</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="installation.html">Installation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="api.html">API</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="api.html#loggers">Loggers</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="eventlogging.html">Event Logger</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="simple-logger.html">Simple Logger</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="status-logger.html">Status Logger</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="logbuilder.html">Fluent API</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="api.html#fish-tagging">Fish tagging</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="customloglevels.html">Levels</a>
  </li>
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="markers.html">Markers</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="thread-context.html">Thread Context</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="messages.html">Messages</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="flowtracing.html">Flow Tracing</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="implementation.html">Implementation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="architecture.html">Architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="config-intro.html">Configuration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="configuration.html">Configuration file</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="systemproperties.html">Configuration properties</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="customconfig.html">Programmatic configuration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="appenders.html">Appenders</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="appenders/file.html">File appenders</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="appenders/rolling-file.html">Rolling file appenders</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="appenders/database.html">Database appenders</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="appenders/network.html">Network Appenders</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="appenders/message-queue.html">Message queue appenders</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="appenders/delegating.html">Delegating Appenders</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="layouts.html">Layouts</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="json-template-layout.html">JSON Template Layout</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="pattern-layout.html">Pattern Layout</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lookups.html">Lookups</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="filters.html">Filters</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="scripts.html">Scripts</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="jmx.html">JMX</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="extending.html">Extending</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="plugins.html">Plugins</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="performance.html">Performance</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="async.html">Asynchronous loggers</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="garbagefree.html">Garbage-free logging</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">References</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../plugin-reference.html">Plugin reference</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../javadoc.html">Java API reference</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Resources</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../faq.html">F.A.Q.</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../migrate-from-log4j1.html">Migrating from Log4j 1</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../migrate-from-logback.html">Migrating from Logback</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../migrate-from-slf4j.html">Migrating from SLF4J</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../hibernate.html">Integrating with Hibernate</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../jakarta.html">Integrating with Jakarta EE</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../soa.html">Integrating with service-oriented architectures</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../development.html">Development</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../components.html">Components</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../log4j-iostreams.html">Log4j IOStreams</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../log4j-spring-boot.html">Log4j Spring Boot Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../log4j-spring-cloud-config-client.html">Log4j Spring Cloud Configuration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../log4j-jul.html">JUL-to-Log4j bridge</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../log4j-to-jul.html">Log4j-to-JUL bridge</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Related projects</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://logging.apache.org/log4j/jakarta/index.html">Log4j Jakarta EE</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://logging.apache.org/log4j/jmx-gui/index.html">Log4j JMX GUI</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://logging.apache.org/log4j/kotlin/index.html">Log4j Kotlin</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://logging.apache.org/log4j/scala/index.html">Log4j Scala</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://logging.apache.org/log4j/tools/index.html">Log4j Tools</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://logging.apache.org/log4j/transform/index.html">Log4j Transformation Tools</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Home</a></li>
    <li><a href="index.html">Manual</a></li>
    <li><a href="api.html">API</a></li>
    <li><a href="api.html#fish-tagging">Fish tagging</a></li>
    <li><a href="markers.html">Markers</a></li>
  </ul>
</nav>
<div class="edit-this-page"><a href="https://github.com/apache/logging-log4j2/edit/2.x/src/site/antora/modules/ROOT/pages/manual/markers.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="4">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Markers</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Markers allow to <em>tag</em> log statements with a
<a href="../javadoc/log4j-api/org/apache/logging/log4j/Marker.html"><code>Marker</code></a>
object, labeling them as belonging to a specific type.
For example, developers can use markers to tag log statements related to a particular subsystem or functionality.</p>
</div>
<div class="paragraph">
<p>By using markers, it is possible to filter log statements based on the <code>Marker</code>
and display only those log statements that are of interest, such as those
related to XML processing or SQL queries.</p>
</div>
<div class="paragraph">
<p>Markers offer more fine-grained control over log filtering beyond log levels or package names.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="create"><a class="anchor" href="#create"></a>Creating Markers</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="simple-markers"><a class="anchor" href="#simple-markers"></a>Simple markers</h3>
<div class="paragraph">
<p>To create a <code>Marker</code>, create a field in your class using the <code>MarkerManager.getMarker()</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">private static final Marker SQL_MARKER = MarkerManager.getMarker("SQL");</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since a <code>Marker</code> is reusable across multiple log statements, storing it in a <code>static final</code> field makes it a constant.
Once created, use it as the first argument in the log statement:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">LOGGER.debug(SQL_MARKER, "SELECT * FROM {}", table);</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you use the <a href="#example-configuration">configuration example below</a>, one can see the following log statement on your console:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">10:42:30.982 (SQL) SELECT * FROM my_table</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="hierarchy"><a class="anchor" href="#hierarchy"></a>Parent and child markers</h3>
<div class="paragraph">
<p>A marker can have zero or more parent markers, allowing for a hierarchy of markers.
To create such a hierarchy, you must use the <code>addParents()</code> method on the <code>Marker</code> object after you make the child marker.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">private static final Marker QUERY_MARKER =
        MarkerManager.getMarker("SQL_QUERY").addParents(SQL_MARKER);
private static final Marker UPDATE_MARKER =
        MarkerManager.getMarker("UPDATE").addParents(SQL_MARKER);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Child markers do not differ from simple markers; one must pass them on as the first argument of a logging call.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">LOGGER.debug(QUERY_MARKER, "SELECT * FROM {}", table);
LOGGER.debug(UPDATE_MARKER, "UPDATE {} SET {} = {}", table, column, value);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Messages marked with children&#8217;s markers behave as if they were both marked with the children&#8217;s marker and all its parents.
If you use the <a href="#example-configuration">configuration example below</a>, you&#8217;ll see the following log statement on your console:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">10:42:30.982 (SQL_QUERY[ SQL ]) SELECT * FROM my_table
10:42:30.982 (SQL_UPDATE[ SQL ]) UPDATE my_table SET column = value</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="pitfalls"><a class="anchor" href="#pitfalls"></a>Pitfalls</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It is important to note that marker names must be unique, as Log4j registers them permanently by name.
Developers are advised to avoid generic marker names, as they may conflict with those provided by third parties.</p>
</div>
<div class="paragraph">
<p>For technical reasons the
<a href="../javadoc/log4j-api/org/apache/logging/log4j/Marker.html#setParents(org.apache.logging.log4j.Marker&#8230;&#8203;)"><code>Marker.setParents(Marker&#8230;&#8203;)</code></a>
method can be called at runtime to modify the list of parents of the current marker.
However, we discourage such a practice and advise you to only use the method at initialization time.</p>
</div>
<div class="paragraph">
<p>It is also worth noting that markers without parents are more efficient to evaluate
than markers with multiple parents. It is generally a good idea to avoid
complex hierarchies of markers where possible.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring-log4j"><a class="anchor" href="#configuring-log4j"></a>Configuring filtering</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Developers can use markers to filter the log statements delivered to log files.
Marker processing is supported at least by <a href="https://logback.qos.ch/manual/filters.html">Logback</a> and the Log4j Core logging implementations.
We will provide a sample configuration for both these backends.</p>
</div>
<div class="sect2">
<h3 id="log4j-core"><a class="anchor" href="#log4j-core"></a>Log4j Core</h3>
<div class="paragraph">
<p>To filter messages by marker, you need to add
<a href="filters.html#MarkerFilter" class="xref page"><code>MarkerFilter</code></a>
to your configuration file.
For example, you can use the configuration below to redirect all SQL-related logs to the <code>SQL_LOG</code> appender,
regardless of the level of the events:</p>
</div>
<div id="example-configuration" class="openblock tabs is-sync is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="example_configuration_xml" class="tab">
<p>XML</p>
</li>
<li id="example_configuration_json" class="tab">
<p>JSON</p>
</li>
<li id="example_configuration_yaml" class="tab">
<p>YAML</p>
</li>
<li id="example_configuration_properties" class="tab">
<p>Properties</p>
</li>
</ul>
</div>
<div id="example_configuration_xml--panel" class="tabpanel" aria-labelledby="example_configuration_xml">
<div class="listingblock">
<div class="title">Snippet from an example <a href="https://github.com/apache/logging-log4j2/tree/2.x/src/site/antora/modules/ROOT/examples/manual/markers/log4j2.xml"><code>log4j2.xml</code></a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;Appenders&gt;
  &lt;Console name="SQL_LOG"&gt;
    &lt;PatternLayout pattern="%d{HH:mm:ss.SSS} (%marker) %m%n"/&gt;
  &lt;/Console&gt;
&lt;/Appenders&gt;
&lt;MarkerFilter marker="SQL"
              onMatch="ACCEPT"
              onMismatch="NEUTRAL"/&gt;<i class="conum" data-value="1"></i><b>(1)</b>
&lt;Loggers&gt;
  &lt;Root level="INFO"&gt;
    &lt;AppenderRef ref="SQL_LOG"&gt;
      &lt;MarkerFilter marker="SQL"/&gt;<i class="conum" data-value="2"></i><b>(2)</b>
    &lt;/AppenderRef&gt;
  &lt;/Root&gt;
&lt;/Loggers&gt;</code></pre>
</div>
</div>
</div>
<div id="example_configuration_json--panel" class="tabpanel" aria-labelledby="example_configuration_json">
<div class="listingblock">
<div class="title">Snippet from an example <a href="https://github.com/apache/logging-log4j2/tree/2.x/src/site/antora/modules/ROOT/examples/manual/markers/log4j2.json"><code>log4j2.json</code></a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"Appenders": {
  "Console": {
    "name": "SQL_LOG",
    "PatternLayout": {
      "pattern": "%d{HH:mm:ss.SSS} (%marker) %m%n"
    }
  }
},
"MarkerFilter": { <i class="conum" data-value="1"></i><b>(1)</b>
  "marker": "SQL",
  "onMatch": "ACCEPT",
  "onMismatch": "NEUTRAL"
},
"Loggers": {
  "Root": {
    "level": "INFO",
    "AppenderRef": {
      "ref": "SQL_LOG",
      "MarkerFilter": { <i class="conum" data-value="2"></i><b>(2)</b>
        "marker": "SQL"
      }
    }
  }
}</code></pre>
</div>
</div>
</div>
<div id="example_configuration_yaml--panel" class="tabpanel" aria-labelledby="example_configuration_yaml">
<div class="listingblock">
<div class="title">Snippet from an example <a href="https://github.com/apache/logging-log4j2/tree/2.x/src/site/antora/modules/ROOT/examples/manual/markers/log4j2.yaml"><code>log4j2.yaml</code></a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">Appenders:
  Console:
    name: "SQL_LOG"
    PatternLayout:
      pattern: "%d{HH:mm:ss.SSS} (%marker) %m%n"
MarkerFilter: <i class="conum" data-value="1"></i><b>(1)</b>
  marker: "SQL"
  onMatch: "ACCEPT"
  onMismatch: "NEUTRAL"
Loggers:
  Root:
    level: "INFO"
    AppenderRef:
      ref: "SQL_LOG"
      MarkerFilter: <i class="conum" data-value="2"></i><b>(2)</b>
        marker: "SQL"</code></pre>
</div>
</div>
</div>
<div id="example_configuration_properties--panel" class="tabpanel" aria-labelledby="example_configuration_properties">
<div class="listingblock">
<div class="title">Snippet from an example <a href="https://github.com/apache/logging-log4j2/tree/2.x/src/site/antora/modules/ROOT/examples/manual/markers/log4j2.properties"><code>log4j2.properties</code></a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">appender.0.type = Console
appender.0.name = SQL_LOG
appender.0.layout.type = PatternLayout
appender.0.layout.pattern = %d{HH:mm:ss.SSS} (%marker) %m%n

<i class="conum" data-value="1"></i><b>(1)</b>
filter.0.type = MarkerFilter
filter.0.marker = SQL
filter.0.onMatch = ACCEPT
filter.0.onMismatch = NEUTRAL

rootLogger.level = INFO
rootLogger.appenderRef.0.ref = SQL_LOG
<i class="conum" data-value="2"></i><b>(2)</b>
rootLogger.appenderRef.0.filter.type = MarkerFilter
rootLogger.appenderRef.0.filter.marker = SQL</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Accepts all events marked with <code>SQL</code> regardless of their level,</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Only allow events marked with <code>SQL</code> or one of its children to be sent to the <code>SQL_LOG</code> appender.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="logback"><a class="anchor" href="#logback"></a>Logback</h3>
<div class="paragraph">
<p>Logback differentiates two kinds of filters: <code>TurboFilter</code>s, which are applied before a log event is created, and
<code>Filter</code>s, which are applied only when a log event reaches an appender.
See <a href="https://logback.qos.ch/manual/filters.html">Logback filters</a> for more information.</p>
</div>
<div class="paragraph">
<p>You can use a combination of <code>MarkerFilter</code>, <code>EvaluatorFilter</code> and <code>OnMarkerEvaluator</code> to redirect all messages marked with <code>SQL</code> to a specific appender, regardless of their level.
In order to do that, you can use a configuration as below:</p>
</div>
<div class="listingblock">
<div class="title">Snippet from an example <a href="https://github.com/apache/logging-log4j2/tree/2.x/src/site/antora/modules/ROOT/examples/manual/markers/logback.xml"><code>logback.xml</code></a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;turboFilter class="ch.qos.logback.classic.turbo.MarkerFilter"&gt; <i class="conum" data-value="1"></i><b>(1)</b>
  &lt;Marker&gt;SQL&lt;/Marker&gt;
  &lt;OnMatch&gt;ACCEPT&lt;/OnMatch&gt;
&lt;/turboFilter&gt;
&lt;appender name="SQL_LOG" class="ch.qos.logback.core.ConsoleAppender"&gt;
  &lt;encoder&gt;
    &lt;pattern&gt;%d{HH:mm:ss.SSS} (%marker) %m%n&lt;/pattern&gt;
  &lt;/encoder&gt;
  &lt;filter class="ch.qos.logback.core.filter.EvaluatorFilter"&gt; <i class="conum" data-value="2"></i><b>(2)</b>
    &lt;evaluator class="ch.qos.logback.classic.boolex.OnMarkerEvaluator"&gt;
      &lt;marker&gt;SQL&lt;/marker&gt;
    &lt;/evaluator&gt;
    &lt;onMismatch&gt;DENY&lt;/onMismatch&gt;
  &lt;/filter&gt;
&lt;/appender&gt;
&lt;root level="INFO"&gt;
  &lt;appender-ref ref="SQL_LOG"/&gt;
&lt;/root&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Accepts all events marked with <code>SQL</code> regardless of their level,</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Only allow events marked with <code>SQL</code> or one of its children to be sent to the <code>SQL_LOG</code> appender.git</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="complete-example"><a class="anchor" href="#complete-example"></a>Complete example</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To try the examples on this page:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>add
<a href="https://github.com/apache/logging-log4j2/tree/2.x/src/site/antora/modules/ROOT/examples/manual/markers/MarkerExample.java">MarkerExample.java</a>
to the <code>src/main/java/example</code> folder of your project,</p>
</li>
<li>
<p>if your project uses Log4j Core add
<a href="https://github.com/apache/logging-log4j2/tree/2.x/src/site/antora/modules/ROOT/examples/manual/markers/log4j2.xml">log4j2.xml</a>
to the <code>src/main/resources</code> folder of your project.</p>
</li>
<li>
<p>if your project uses Logback add
<a href="https://github.com/apache/logging-log4j2/tree/2.x/src/site/antora/modules/ROOT/examples/manual/markers/logback.xml">logback.xml</a>
to the <code>src/main/resources</code> folder of your project.</p>
</li>
</ul>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>
    Copyright Â© 1999-2024 <a href="https://www.apache.org/">The Apache Software Foundation</a>.
    Licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache Software License, Version 2.0</a>.
    Please read our <a href="https://privacy.apache.org/policies/privacy-policy-public.html">privacy policy</a>.
  </p>
  <p>
    Apache, Log4j, and the Apache feather logo are trademarks or registered trademarks of The Apache Software Foundation.
    Oracle and Java are registered trademarks of Oracle and/or its affiliates.
    Other names may be trademarks of their respective owners.
  </p>
</footer>
<script id="site-script" src="../_/js/site.js" data-ui-root-path="../_"></script>
<script async src="../_/js/vendor/highlight.js"></script>
<!-- `@asciidoctor/tabs` extension scripts -->
<script async src="../_/js/vendor/tabs.js"></script>
  </body>
</html>
