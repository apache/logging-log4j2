<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Integrating with Jakarta EE :: Apache Log4j</title>
    <link rel="canonical" href="https://logging.apache.org/log4j/2.x/jakarta.html">
    <meta name="generator" content="Antora 3.2.0-alpha.8">
<link rel="stylesheet" href="./_/css/site.css">
<link rel="icon" href="./_/../_images/favicon.ico" type="image/x-icon">
<!-- `@asciidoctor/tabs` extension styles -->
<link rel="stylesheet" href="./_/css/vendor/tabs.css">
<style>
  /* Swap colors of `IMPORTANT` and `WARNING` blocks */ 
  .doc .admonitionblock.important .icon { background-color: #f70; }
  .doc .admonitionblock.warning .icon { background-color: #e40046; }
  /* Default `h4`, `h5`, and `h6` are smaller than the normal text, fix header font sizing: */
  .doc h1 { font-size: 1.9rem; }
  .doc h2 { font-size: 1.7rem; }
  .doc h3 { font-size: 1.5rem; font-weight: 400; }
  .doc h4 { font-size: 1.3rem; font-weight: 500; }
  .doc h5 { font-size: 1.1rem; font-weight: 500; text-decoration: underline; }
  .doc h6 { font-size: 0.9rem; font-weight: 500; text-decoration: underline; }
  /* Default `code`, `pre`, and `.colist` (source code annotations) fonts are too big, adjust them: */
  .doc .colist>table code, .doc p code, .doc thead code { font-size: 0.8em; }
  .doc pre { font-size: 0.7rem; }
  .doc .colist { font-size: 0.75rem; }
  /* Make links more visible: */
  .doc a { text-decoration: underline; }
  .doc a code { text-decoration: underline; color: #1565c0; }
  /* Tab header fonts aren't rendered good, adjusting the font weight: */
  .tablist > ul li { font-weight: 500; }
  /* `page-toclevels` greater than 4 are not supported by Antora UI, patching it: */
  .toc .toc-menu li[data-level="4"] a {
    padding-left: 2.75rem;
  }
  /* Replace the default highlight.js color for strings from red (unnecessarily signaling something negative) to green: */
  .hljs-string {
    color: #0f8532;
  }
</style>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="navbar-item">
        <img src="./_/../_images/logo-small-white.png" alt="Apache Log4j"/>
      </div>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://logging.apache.org">a subproject of&nbsp;<strong>Apache Logging Services</strong></a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="ROOT" data-version="">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="index.html">Home</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="download.html">Download</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="release-notes.html">Release notes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="https://logging.apache.org/support.html">Support</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://logging.apache.org/security.html">Security</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="manual/index.html">Manual</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="manual/getting-started.html">Getting started</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="manual/installation.html">Installation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="manual/api.html">API</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="manual/api.html#loggers">Loggers</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="manual/eventlogging.html">Event Logger</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="manual/simple-logger.html">Simple Logger</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="manual/status-logger.html">Status Logger</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="manual/logbuilder.html">Fluent API</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="manual/api.html#fish-tagging">Fish tagging</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="manual/customloglevels.html">Levels</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="manual/markers.html">Markers</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="manual/thread-context.html">Thread Context</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="manual/messages.html">Messages</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="manual/flowtracing.html">Flow Tracing</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="manual/implementation.html">Implementation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="manual/architecture.html">Architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="manual/config-intro.html">Configuration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="manual/configuration.html">Configuration file</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="manual/systemproperties.html">Configuration properties</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="manual/customconfig.html">Programmatic configuration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="manual/appenders.html">Appenders</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="manual/appenders/file.html">File appenders</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="manual/appenders/rolling-file.html">Rolling file appenders</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="manual/appenders/database.html">Database appenders</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="manual/appenders/network.html">Network Appenders</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="manual/appenders/message-queue.html">Message queue appenders</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="manual/appenders/delegating.html">Delegating Appenders</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="manual/layouts.html">Layouts</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="manual/json-template-layout.html">JSON Template Layout</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="manual/pattern-layout.html">Pattern Layout</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="manual/lookups.html">Lookups</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="manual/filters.html">Filters</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="manual/scripts.html">Scripts</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="manual/jmx.html">JMX</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="manual/extending.html">Extending</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="manual/plugins.html">Plugins</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="manual/performance.html">Performance</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="manual/async.html">Asynchronous loggers</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="manual/garbagefree.html">Garbage-free logging</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">References</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="plugin-reference.html">Plugin reference</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="javadoc.html">Java API reference</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Resources</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="faq.html">F.A.Q.</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="migrate-from-log4j1.html">Migrating from Log4j 1</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="migrate-from-logback.html">Migrating from Logback</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="migrate-from-slf4j.html">Migrating from SLF4J</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="graalvm.html">Building GraalVM native images</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="hibernate.html">Integrating with Hibernate</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="jakarta.html">Integrating with Jakarta EE</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="soa.html">Integrating with service-oriented architectures</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="development.html">Development</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="components.html">Components</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="log4j-iostreams.html">Log4j IOStreams</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="log4j-spring-boot.html">Log4j Spring Boot Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="log4j-spring-cloud-config-client.html">Log4j Spring Cloud Configuration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="log4j-jul.html">JUL-to-Log4j bridge</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="log4j-to-jul.html">Log4j-to-JUL bridge</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Related projects</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://logging.apache.org/log4j/jakarta/index.html">Log4j Jakarta EE</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://logging.apache.org/log4j/jmx-gui/index.html">Log4j JMX GUI</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://logging.apache.org/log4j/kotlin/index.html">Log4j Kotlin</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://logging.apache.org/log4j/scala/index.html">Log4j Scala</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://logging.apache.org/log4j/tools/index.html">Log4j Tools</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://logging.apache.org/log4j/transform/index.html">Log4j Transformation Tools</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Home</a></li>
    <li>Resources</li>
    <li><a href="jakarta.html">Integrating with Jakarta EE</a></li>
  </ul>
</nav>
<div class="edit-this-page"><a href="https://github.com/apache/logging-log4j2/edit/2.x/src/site/antora/modules/ROOT/pages/jakarta.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="4">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Integrating with Jakarta EE</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>In a Jakarta EE environment, there are two possible approaches to logging:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Each application can use their own copy of Log4j Core and include <code>log4j-core</code> in the WAR or EAR archive.</p>
</li>
<li>
<p>Applications can also use a single copy of Log4j Core that must be installed globally on the application server.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>While the first approach is the easiest to implement, it has some limitations:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Shared libraries</dt>
<dd>
<p>Log events emitted by each application and the libraries bundled with it will be handled by Log4j Core,
but events related to the application emitted by a <strong>shared</strong> library (e.g. JPA implementation) will be handled by the application server.
To diagnose a problem with the application, you might need to look into multiple log files.</p>
</dd>
<dt class="hdlist1">Separate log files</dt>
<dd>
<p>Each application must use a <strong>different</strong> log file to prevent problems with concurrent access to the same file by multiple applications.
Problems may arise, especially if a <a href="manual/appenders/rolling-file.html" class="xref page">rolling file appender</a> is used.</p>
</dd>
<dt class="hdlist1">Lifecycle</dt>
<dd>
<p>Web applications have a different lifecycle from the application server.
Additional care is required to stop Log4j Core when the application is stopped.
See <a href="#log4j-jakarta-web">Integrating with web applications</a> for more details.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The second approach requires changes to the configuration of the application server,
but produces better results in terms of separating log events of different applications.
See <a href="#sharing">Sharing Log4j Core between Web Applications</a> for more details.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="log4j-jakarta-web"><a class="anchor" href="#log4j-jakarta-web"></a>Integrating with web applications</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>To avoid problems,
some Log4j API and Log4j Core features are automatically disabled when running in a Jakarta EE environment.
Most notably:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the usage of <code>ThreadLocal</code> for object pooling is disabled.</p>
</li>
<li>
<p>a web-safe implementation of
<a href="javadoc/log4j-api/org/apache/logging/log4j/spi/ThreadContextMap.html"><code>ThreadContextMap</code></a> is used.</p>
</li>
<li>
<p>JMX notifications are sent synchronously.</p>
</li>
<li>
<p>the JVM shutdown hook is disabled.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="manual/systemproperties.html#log4j2.isWebapp" class="xref page"><code>log4j2.isWebapp</code></a> for more details.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Using a logging implementation like <strong>Log4j Core</strong> in a Jakarta EE application requires particular care.
Since the lifecycle of a container or web application is independent of the lifecycle of the JVM, it&#8217;s important for logging resources to be properly cleaned up (database connections closed, files closed, etc.) when the container or web application shuts down.</p>
</div>
<div class="paragraph">
<p>To properly synchronize the lifecycles of Log4j Core and Jakarta EE applications,
an additional <strong>Log4j Web</strong> artifact is provided.</p>
</div>
<div class="sect2">
<h3 id="log4j-jakarta-web-installation"><a class="anchor" href="#log4j-jakarta-web-installation"></a>Installation</h3>
<div class="paragraph">
<p>To install Log4j Web in your web application, you need to add it as a runtime dependency:</p>
</div>
<div id="_tabs_1" class="openblock tabs is-sync is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_1_maven" class="tab">
<p>Maven</p>
</li>
<li id="_tabs_1_gradle" class="tab">
<p>Gradle</p>
</li>
</ul>
</div>
<div id="_tabs_1_maven--panel" class="tabpanel" aria-labelledby="_tabs_1_maven">
<div class="paragraph">
<p>We assume you use <a href="components.html#log4j-bom" class="xref page"><code>log4j-bom</code></a> for dependency management.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;
  &lt;artifactId&gt;log4j-jakarta-web&lt;/artifactId&gt;
  &lt;scope&gt;runtime&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</div>
<div id="_tabs_1_gradle--panel" class="tabpanel" aria-labelledby="_tabs_1_gradle">
<div class="paragraph">
<p>We assume you use <a href="components.html#log4j-bom" class="xref page"><code>log4j-bom</code></a> for dependency management.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">runtimeOnly 'org.apache.logging.log4j:log4j-jakarta-web'</code></pre>
</div>
</div>
</div>
</div>
</div>
<details>
<summary class="title">Click here if you are you using Jakarta EE 8 or any version of Java EE?</summary>
<div class="content">
<div class="paragraph">
<p>Jakarta EE 8 and all Java EE applications servers use the legacy <code>javax</code> package prefix instead of <code>jakarta</code>.
If you are using those application servers, you should replace the dependencies above with:</p>
</div>
<div id="_tabs_2" class="openblock tabs is-sync is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_2_maven" class="tab">
<p>Maven</p>
</li>
<li id="_tabs_2_gradle" class="tab">
<p>Gradle</p>
</li>
</ul>
</div>
<div id="_tabs_2_maven--panel" class="tabpanel" aria-labelledby="_tabs_2_maven">
<div class="paragraph">
<p>We assume you use <a href="components.html#log4j-bom" class="xref page"><code>log4j-bom</code></a> for dependency management.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;
  &lt;artifactId&gt;log4j-web&lt;/artifactId&gt;
  &lt;scope&gt;runtime&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</div>
<div id="_tabs_2_gradle--panel" class="tabpanel" aria-labelledby="_tabs_2_gradle">
<div class="paragraph">
<p>We assume you use <a href="components.html#log4j-bom" class="xref page"><code>log4j-bom</code></a> for dependency management.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">runtimeOnly 'org.apache.logging.log4j:log4j-web'</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</details>
<div class="paragraph">
<p>If you are writing a Servlet 3.0 or later application, Apache Log4j Web will register a
<a href="https://jakarta.ee/specifications/servlet/5.0/apidocs/jakarta/servlet/servletcontainerinitializer"><code>ServletContainerInitializer</code></a>
that takes care of configuring the Log4j lifecycle for you. Under the hood this will:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>initialize Log4j Core with the correct configuration file.</p>
</li>
<li>
<p>register a <code>Log4jServletContextListener</code> to automatically shut down Log4j Core, when the application shuts down.</p>
</li>
<li>
<p>register a <code>Log4jServletFilter</code> to enable the <a href="manual/lookups.html#WebLookup" class="xref page">web lookup</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See also <a href="#web-application-specific">Application server specific notes</a>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>While the Servlet Specification allows web fragments to automatically add context listeners, it does not give any guarantees regarding the order in which those listeners are executed
(see <a href="https://jakarta.ee/specifications/servlet/5.0/jakarta-servlet-spec-5.0#Assembling_the_descriptor">Section 8.2.3</a>).</p>
</div>
<div class="paragraph">
<p>If other context listeners in your application use logging, you need to make sure that <code>Log4jServletContextListener</code> is the last listener to be executed at shutdown.
To do it, you must create a <code>web.xml</code> descriptor and add the <code>Log4jServletContextListener</code> explicitly as the <strong>first</strong> context listener:</p>
</div>
<div class="listingblock">
<div class="title">Snippet from an example <a href="https://github.com/apache/logging-log4j2/tree/rel/2.25.0/src/site/antora/modules/ROOT/examples/manual/webapp/web.xml"><code>web.xml</code></a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;listener&gt;
  &lt;description&gt;Handles Log4j Core lifecycle&lt;/description&gt;
  &lt;listener-class&gt;
    org.apache.logging.log4j.web.Log4jServletContextListener
  &lt;/listener-class&gt;
&lt;/listener&gt;</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="log4j-jakarta-manual-instalation"><a class="anchor" href="#log4j-jakarta-manual-instalation"></a>Manual installation</h4>
<div class="paragraph">
<p>If you are maintaining an older Servlet 2.5 (or earlier) application,
or if you disabled the <a href="#isLog4jAutoInitializationDisabled">servlet container initializer</a>.</p>
</div>
<div class="listingblock">
<div class="title">Snippet from an example <a href="https://github.com/apache/logging-log4j2/tree/rel/2.25.0/src/site/antora/modules/ROOT/examples/manual/webapp/web.xml"><code>web.xml</code></a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;listener&gt;
  &lt;description&gt;Handles Log4j Core lifecycle&lt;/description&gt;
  &lt;listener-class&gt;
    org.apache.logging.log4j.web.Log4jServletContextListener
  &lt;/listener-class&gt;
&lt;/listener&gt;
&lt;filter&gt;
  &lt;description&gt;Adds Log4j Core specific attributes to each request&lt;/description&gt;
  &lt;filter-name&gt;log4jServletFilter&lt;/filter-name&gt;
  &lt;filter-class&gt;org.apache.logging.log4j.web.Log4jServletFilter&lt;/filter-class&gt;
&lt;/filter&gt;
&lt;filter-mapping&gt;
  &lt;filter-name&gt;log4jServletFilter&lt;/filter-name&gt;
  &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
  &lt;dispatcher&gt;REQUEST&lt;/dispatcher&gt;
  &lt;dispatcher&gt;FORWARD&lt;/dispatcher&gt;
  &lt;dispatcher&gt;INCLUDE&lt;/dispatcher&gt;
  &lt;dispatcher&gt;ERROR&lt;/dispatcher&gt;
  &lt;!-- Servlet 3.0 with disabled auto-initialization; not supported in 2.5
  &lt;dispatcher&gt;ASYNC&lt;/dispatcher&gt;
  --&gt;
&lt;/filter-mapping&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuration"><a class="anchor" href="#configuration"></a>Configuration</h3>
<div class="paragraph">
<p>Log4j Web provides many configuration options to finely tune its installation.
These configuration options should be specified as
<a href="https://jakarta.ee/specifications/servlet/5.0/jakarta-servlet-spec-5.0#initialization-parameters">servlet context initialization parameters</a>.</p>
</div>
<div class="sect3">
<h4 id="isLog4jAutoInitializationDisabled"><a class="anchor" href="#isLog4jAutoInitializationDisabled"></a><code>isLog4jAutoInitializationDisabled</code></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Type</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Default value</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>If set to <code>true</code>, the <code>Log4jServletContainerInitializer</code> will be disabled, which prevents the automatic registration of both the <code>Log4jServletContextListener</code> and <code>Log4jServletFilter</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="isLog4jAutoShutdownDisabled"><a class="anchor" href="#isLog4jAutoShutdownDisabled"></a><code>isLog4jAutoShutdownDisabled</code></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Type</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Default value</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>If set to <code>true</code>, the <code>Log4jServletContextListener</code> will not register a <code>Log4jServletContextListener</code> to handle the web application shut down.</p>
</div>
</div>
<div class="sect3">
<h4 id="log4j.stop.timeout.timeunit"><a class="anchor" href="#log4j.stop.timeout.timeunit"></a><code>log4j.stop.timeout.timeunit</code></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Type</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeUnit.html"><code>TimeUnit</code></a></p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Default value</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeUnit.html#SECONDS"><code>SECONDS</code></a></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Specifies the <code>TimeUnit</code> used for the shut-down delay.</p>
</div>
</div>
<div class="sect3">
<h4 id="log4j.stop.timeout"><a class="anchor" href="#log4j.stop.timeout"></a><code>log4j.stop.timeout</code></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Type</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>long</code></p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Default value</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>30</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>It specifies the duration of the shut-down delay.</p>
</div>
</div>
<div class="sect3">
<h4 id="log4jContextName"><a class="anchor" href="#log4jContextName"></a><code>log4jContextName</code></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Type</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Default value</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>automatically computed</em></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Used to specify the name of the logger context.</p>
</div>
<div class="paragraph">
<p>If <a href="#jndi-configuration"><code>JndiContextSelector</code></a> is used, this parameter <strong>must</strong> be explicitly provided. Otherwise, the default value is:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>the servlet context name, if present,</p>
</li>
<li>
<p>the servlet context path, including the leading <code>/</code>, otherwise.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="isLog4jContextSelectorNamed"><a class="anchor" href="#isLog4jContextSelectorNamed"></a><code>isLog4jContextSelectorNamed</code></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Type</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Default value</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Must be set to <code>true</code> to use the <a href="#jndi-configuration">JNDI configuration</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="log4jConfiguration"><a class="anchor" href="#log4jConfiguration"></a><code>log4jConfiguration</code></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Type</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.oracle.com/javase/8/docs/api/java/net/URI.html"><code>URI</code></a></p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Default value</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The location of a Log4j Core configuration file.
If the provided value is not an <strong>absolute</strong> URI, Log4j interprets it as:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>the path to an existing
<a href="https://jakarta.ee/specifications/servlet/5.0/apidocs/jakarta/servlet/servletcontext#getResource(java.lang.String)">servlet context resource</a>,</p>
</li>
<li>
<p>the path to an existing file,</p>
</li>
<li>
<p>the path to a
<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/ClassLoader.html#getResource-java.lang.String-">classpath resource</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If no value is provided:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log4j Web looks for a servlet context resource named <code>/WEB-INF/log4j2-&lt;contextName&gt;.&lt;extension&gt;</code>, where <code>&lt;contextName&gt;</code> is the name of the logger context,</p>
</li>
<li>
<p>if no such file exists it looks for a servlet context resource named <code>/WEB-INF/log4j2.&lt;extension&gt;</code>,</p>
</li>
<li>
<p>otherwise, it searches for a configuration file on the classpath using the usual <a href="https://logging.apache.org/log4j/2.x/manual/configuration.html#automatic-configuration">automatic configuration procedure</a>.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="async"><a class="anchor" href="#async"></a>Asynchronous requests and threads</h3>
<div class="paragraph">
<p>In order for the
<a href="manual/lookups.html#WebLookup" class="xref page">web lookup</a>
to work correctly, Log4j must be able to always identify the <code>ServletContext</code> used by the current thread.
When standard requests, forwards, inclusions, and error resources are processed,
the <code>Log4jServletFilter</code> binds the <code>LoggerContext</code> to the thread handling the request,
and you don&#8217;t have to do anything.</p>
</div>
<div class="paragraph">
<p>The handling of asynchronous requests is however more tricky, since it allows you to execute code on threads that were not prepared by <code>Log4jServletFilter</code>.
Such a situation occurs, for example, if your code was started using the
<a href="https://jakarta.ee/specifications/servlet/5.0/apidocs/jakarta/servlet/asynccontext#start(java.lang.Runnable)"><code>AsyncContext.start(Runnable)</code></a>
method.</p>
</div>
<div class="paragraph">
<p>To successfully propagate the logger context along asynchronous calls, the
<a href="javadoc/log4j-jakarta-web/org/apache/logging/log4j/web/WebLoggerContextUtils.html"><code>WebLoggerContextUtils</code></a>
helper class is made available.
Using this class you can either decorate a <code>Runnable</code> with method calls that bind the appropriate logger context to the thread:</p>
</div>
<div class="listingblock">
<div class="title">Snippet from an example <a href="https://github.com/apache/logging-log4j2/tree/rel/2.25.0/src/site/antora/modules/ROOT/examples/manual/webapp/AsyncServlet.java"><code>AsyncServlet.java</code></a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">AsyncContext asyncContext = req.startAsync();
asyncContext.start(WebLoggerContextUtils.wrapExecutionContext(getServletContext(), () -&gt; {
    // Put your logic here
}));</code></pre>
</div>
</div>
<div class="paragraph">
<p>or, if more flexibility is required, you can apply the same logic by using
<a href="javadoc/log4j-jakarta-web/org/apache/logging/log4j/web/Log4jWebSupport.html"><code>Log4jWebSupport</code></a>:</p>
</div>
<div class="listingblock">
<div class="title">Snippet from an example <a href="https://github.com/apache/logging-log4j2/tree/rel/2.25.0/src/site/antora/modules/ROOT/examples/manual/webapp/AsyncServlet.java"><code>AsyncServlet.java</code></a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">AsyncContext asyncContext = req.startAsync();
Log4jWebSupport webSupport = WebLoggerContextUtils.getWebLifeCycle(getServletContext());
asyncContext.start(() -&gt; {
    try {
        webSupport.setLoggerContext();
        // Put your logic here
    } finally {
        webSupport.clearLoggerContext();
    }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="log4j-taglib"><a class="anchor" href="#log4j-taglib"></a>Logging in JavaServer Pages</h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>The Log4j Tag library is planned to be removed in the next major release!</strong>
If you are using this library, please get in touch with the Log4j maintainers using <a href="https://logging.apache.org/support.html">the official support channels</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To help users add logging statements to JavaServer Pages, Log4j provides a JSP tag library modeled after the
<a href="https://web.archive.org/web/20140215182415/http://jakarta.apache.org/taglibs/log/">Jakarta Commons Log Tag library</a>.
To use it, you need to add the following runtime dependency to your web application project:</p>
</div>
<div id="_tabs_3" class="openblock tabs is-sync is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_3_maven" class="tab">
<p>Maven</p>
</li>
<li id="_tabs_3_gradle" class="tab">
<p>Gradle</p>
</li>
</ul>
</div>
<div id="_tabs_3_maven--panel" class="tabpanel" aria-labelledby="_tabs_3_maven">
<div class="paragraph">
<p>We assume you use <a href="components.html#log4j-bom" class="xref page"><code>log4j-bom</code></a> for dependency management.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;
  &lt;artifactId&gt;log4j-taglib&lt;/artifactId&gt;
  &lt;scope&gt;runtime&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</div>
<div id="_tabs_3_gradle--panel" class="tabpanel" aria-labelledby="_tabs_3_gradle">
<div class="paragraph">
<p>We assume you use <a href="components.html#log4j-bom" class="xref page"><code>log4j-bom</code></a> for dependency management.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">runtimeOnly 'org.apache.logging.log4j:log4j-taglib'</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>and add the following declaration to your JSP pages:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-jsp hljs" data-lang="jsp">&lt;%@ taglib prefix="log4j" uri="http://logging.apache.org/log4j/tld/log" %&gt;</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The Log4j Taglib component is deprecated and is scheduled for removal in Log4j 3.</p>
</div>
<div class="paragraph">
<p>Currently, it only works with JavaServer Pages 2.3 and previous releases,
and no version compatible with Jakarta Server Pages 3.0 is available.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The Log4j Taglib library defines a tag for most
<a href="javadoc/log4j-api/org/apache/logging/log4j/Logger.html"><code>Logger</code></a>
methods, including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>simple and parameterized log statements:</p>
<div class="listingblock">
<div class="title">Snippet from an example <a href="https://github.com/apache/logging-log4j2/tree/rel/2.25.0/src/site/antora/modules/ROOT/examples/manual/webapp/taglib.jsp"><code>taglib.jsp</code></a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;log4j:debug message="Simple message"/&gt;
&lt;log4j:info message="Hello {}!" p0="${param.who}"/&gt;
&lt;log4j:warn message="Message with marker" marker="${requestScope.marker}"/&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>flow tracing statements:</p>
<div class="listingblock">
<div class="title">Snippet from an example <a href="https://github.com/apache/logging-log4j2/tree/rel/2.25.0/src/site/antora/modules/ROOT/examples/manual/webapp/taglib.jsp"><code>taglib.jsp</code></a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;log4j:entry p0="${param.who}"/&gt;
&lt;log4j:exit/&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>catching and throwing statements:</p>
<div class="listingblock">
<div class="title">Snippet from an example <a href="https://github.com/apache/logging-log4j2/tree/rel/2.25.0/src/site/antora/modules/ROOT/examples/manual/webapp/taglib.jsp"><code>taglib.jsp</code></a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;c:catch var="exception"&gt;
    &lt;%= 5 / 0 %&gt;
&lt;/c:catch&gt;
&lt;c:if test="${exception != null}"&gt;
    &lt;log4j:catching exception="${exception}"/&gt;
&lt;/c:if&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>tags to test the current log level:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;log4j:ifEnabled level="INFO"&gt;
    &lt;code&gt;INFO&lt;/code&gt; is enabled.
&lt;/log4j:ifEnabled&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>tags to set the name of the logger used:</p>
<div class="listingblock">
<div class="title">Snippet from an example <a href="https://github.com/apache/logging-log4j2/tree/rel/2.25.0/src/site/antora/modules/ROOT/examples/manual/webapp/taglib.jsp"><code>taglib.jsp</code></a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;log4j:setLogger logger="example.jsp"/&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>a <code>dump</code> tag that prints the contents of a JSP scope:</p>
<div class="listingblock">
<div class="title">Snippet from an example <a href="https://github.com/apache/logging-log4j2/tree/rel/2.25.0/src/site/antora/modules/ROOT/examples/manual/webapp/taglib.jsp"><code>taglib.jsp</code></a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;log4j:dump scope="request"/&gt;</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="web-application-specific"><a class="anchor" href="#web-application-specific"></a>Application server specific notes</h3>
<div id="web-application-wildfly" class="dlist">
<dl>
<dt class="hdlist1">WildFly</dt>
<dd>
<div class="paragraph">
<p>WildFly implicitly adds a shared copy of <code>log4j-api</code> to each web application deployment.
This copy of <code>log4j-api</code> is configured to forward all events to WildFly&#8217;s centralized logging system and does <strong>not</strong> use the copy of Log4j Core bundled with the web application.</p>
</div>
<div class="paragraph">
<p>To use Log4j Core, you need to set the <code>add-logging-api-dependencies</code> attribute of the logging subsystem to <code>false</code>.
See <a href="https://docs.wildfly.org/32/Admin_Guide.html#logging-attributes">WildFly documentation</a> for more details.</p>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sharing"><a class="anchor" href="#sharing"></a>Sharing Log4j Core between Web Applications</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Since Log4j Core supports multiple <a href="manual/architecture.html#LoggerContext" class="xref page">logger contexts</a>, it is possible to share a single instance of Log4j Core
without losing the ability to configure logging for each application separately.</p>
</div>
<div class="paragraph">
<p>Sharing Log4j Core has two main advantages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You can send log statements from multiple applications to the same log file.
Under the hood, Log4j Core will use a single
<a href="manual/architecture.html#AbstractManager" class="xref page">manager</a>
per file, which will serialize concurrent access from multiple applications.</p>
</li>
<li>
<p>You can capture log statements issued by other shared libraries, so you don&#8217;t have to look for them in the global application server log.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="sharing-setup"><a class="anchor" href="#sharing-setup"></a>Setup</h3>
<div class="paragraph">
<p>To share Log4j Core between applications, you need to share at least these two JAR files:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://central.sonatype.com/artifact/org.apache.logging.log4j/log4j-api/${log4j-api.version}"><code>log4j-api</code></a></p>
</li>
<li>
<p><a href="https://central.sonatype.com/artifact/org.apache.logging.log4j/log4j-core/2.25.0"><code>log4j-core</code></a></p>
</li>
<li>
<p><a href="https://central.sonatype.com/artifact/org.apache.logging.log4j/log4j-jakarta-web/2.25.0"><code>log4j-jakarta-web</code></a>
(or
<a href="https://central.sonatype.com/artifact/org.apache.logging.log4j/log4j-web/2.25.0"><code>log4j-web</code></a>
if you use a Java EE application server)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Since sharing libraries between applications is not part of the Jakarta EE standard, the instructions are specific to each application server:</p>
</div>
<div id="_tabs_4" class="openblock tabs is-sync is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_4_glassfish" class="tab">
<p>GlassFish</p>
</li>
<li id="_tabs_4_jetty" class="tab">
<p>Jetty</p>
</li>
<li id="_tabs_4_openliberty" class="tab">
<p>OpenLiberty</p>
</li>
<li id="_tabs_4_payara" class="tab">
<p>Payara</p>
</li>
<li id="_tabs_4_tomcat" class="tab">
<p>Tomcat</p>
</li>
<li id="_tabs_4_wildfly" class="tab">
<p>WildFly</p>
</li>
</ul>
</div>
<div id="_tabs_4_glassfish--panel" class="tabpanel" aria-labelledby="_tabs_4_glassfish">
<div class="paragraph">
<p>In GlassFish, you can add those libraries to the <em>common classloader</em>.
See <a href="https://glassfish.org/docs/latest/application-development-guide.html#circumventing-class-loader-isolation">GlassFish documentation</a> for more details.</p>
</div>
</div>
<div id="_tabs_4_jetty--panel" class="tabpanel" aria-labelledby="_tabs_4_jetty">
<div class="paragraph">
<p>Recent versions of Jetty have a <code>logging-log4j2</code> module that can be easily enabled to share Log4j Core between applications and to use Log4j Core for the Jetty server itself.
See <a href="https://jetty.org/docs/jetty/12/operations-guide/modules/index.html">Jetty Modules documentation</a> for more details.</p>
</div>
</div>
<div id="_tabs_4_openliberty--panel" class="tabpanel" aria-labelledby="_tabs_4_openliberty">
<div class="paragraph">
<p>In OpenLiberty, you can add Log4j as a <em>global library</em>.
See <a href="https://openliberty.io/docs/latest/class-loader-library-config.html#_configure_global_libraries">OpenLiberty documentation</a> for more details.</p>
</div>
</div>
<div id="_tabs_4_payara--panel" class="tabpanel" aria-labelledby="_tabs_4_payara">
<div class="paragraph">
<p>See <a href="https://docs.payara.fish/community/docs/Technical%20Documentation/Payara%20Server%20Documentation/Server%20Configuration%20And%20Management/Classloading/Standard%20Classloading.html#common-libraries">Payara Common Libraries documentation</a>.</p>
</div>
</div>
<div id="_tabs_4_tomcat--panel" class="tabpanel" aria-labelledby="_tabs_4_tomcat">
<div class="paragraph">
<p>In Tomcat, you can use the <em>common classloader</em>.
See <a href="https://tomcat.apache.org/tomcat-11.0-doc/class-loader-howto.html">Tomcat classloader documentation</a> for more details.</p>
</div>
</div>
<div id="_tabs_4_wildfly--panel" class="tabpanel" aria-labelledby="_tabs_4_wildfly">
<div class="paragraph">
<p>You can install Log4j as a <em>global module</em> or in a <em>global directory</em>.
See <a href="https://docs.wildfly.org/32/Admin_Guide.html#EE_Application_Deployment_Configuration">WildFly EE Application Deployment documentation</a> for more details.</p>
</div>
<div class="paragraph">
<p>Check also the <a href="#web-application-wildfly">WildFly note above</a>.</p>
</div>
</div>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Web application classloaders (see
<a href="https://jakarta.ee/specifications/servlet/6.0/jakarta-servlet-spec-6.0#web-application-class-loader">Servlet Specification 10.7.2</a>
) use a <em>"parent last"</em> delegation strategy, but prevent application from overriding implementation classes provided by the container.</p>
</div>
<div class="paragraph">
<p>If you share Log4j between applications and the applications themselves contain Log4j Core, the logging behavior depends on the application server.
Some application servers will use the shared instance (e.g., WildFly), while others will use the application instance (e.g., Tomcat).
There are two solutions to this problem:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>you can remove Log4j from the WAR or EAR archive:</p>
<div id="_tabs_5" class="openblock tabs is-sync is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_5_maven" class="tab">
<p>Maven</p>
</li>
<li id="_tabs_5_gradle" class="tab">
<p>Gradle</p>
</li>
</ul>
</div>
<div id="_tabs_5_maven--panel" class="tabpanel" aria-labelledby="_tabs_5_maven">
<div class="paragraph">
<p>You can declare the
<a href="https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope">scope</a>
of all Log4j libraries as <code>provided</code>.</p>
</div>
</div>
<div id="_tabs_5_gradle--panel" class="tabpanel" aria-labelledby="_tabs_5_gradle">
<div class="paragraph">
<p>You can add <code>log4j-api</code> to the <code>providedCompile</code> configuration, while <code>log4j-core</code> to the <code>providedRuntime</code> configuration.
See the <a href="https://docs.gradle.org/current/userguide/war_plugin.html#sec:war_dependency_management">Gradle WAR plugin</a> for more details.</p>
</div>
</div>
</div>
</div>
</li>
<li>
<p>you can use an application-server-specific configuration option to delegate the loading of Log4j API to the parent classloader.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="log-separation"><a class="anchor" href="#log-separation"></a>Log separation</h3>
<div class="paragraph">
<p>When using a shared instance of Log4j Core,
you might be interested in identifying the application associated with a given log event.
Log4j Core provides a mechanism to split all
<a href="javadoc/log4j-api/org/apache/logging/log4j/Logger.html"><code>Logger</code></a>
instances into logging domains called
<a href="manual/architecture.html#LoggerContext" class="xref page"><code>LoggerContext</code></a>s.
You have therefore two ways to separate log events:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You can create a separate logger context for each web application and one context for the common libraries.
See <a href="#multiple-contexts">Multiple logger contexts</a> for more details.</p>
</li>
<li>
<p>You can also use a <strong>single</strong> logger context for all log events, but use
<a href="manual/lookups.html" class="xref page">lookups</a> to add context data to your log events.
See <a href="#single-context">Single logger context</a> for more details.</p>
</li>
</ol>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>These two approaches deliver similar results for log events generated by the web applications themselves or the libraries
bundled in the WAR or EAR archive.</p>
</div>
<div class="paragraph">
<p>Differences between these approaches appear in the handling of <strong>shared</strong> libraries.
There are two kinds of shared libraries:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Shared libraries that use <strong>static</strong> <code>Logger</code> fields.
These libraries will always use the same logger context, which will not be one of the per-application contexts.</p>
<div class="paragraph">
<p>This kind includes all the shared libraries, which were not written with Jakarta EE in mind.</p>
</div>
</li>
<li>
<p>Shared libraries that use <strong>instance</strong> <code>Logger</code> fields.
These libraries will use the logger context associated with the web application that uses them.</p>
<div class="paragraph">
<p>Application server implementations usually use instance <code>Logger</code> fields.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Since the first kind of libraries is more common,
counterintuitively the <a href="#single-context">Single logger context</a> approach will usually give better results than the <a href="#multiple-contexts">Multiple logger contexts</a> approach.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="single-context"><a class="anchor" href="#single-context"></a>Single logger context</h4>
<div class="paragraph">
<p>By default, Log4j Core creates a separate logger context per classloader.
To use a single logger context, you need to set the
<a href="manual/systemproperties.html#log4j2.contextSelector" class="xref page"><code>log4j2.contextSelector</code></a>
system property to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>either
<a href="javadoc/log4j-core/org/apache/logging/log4j/core/selector/BasicContextSelector.html"><code>org.apache.logging.log4j.core.selector.BasicContextSelector</code></a>
to use synchronous loggers,</p>
</li>
<li>
<p>or
<a href="javadoc/log4j-core/org/apache/logging/log4j/core/async/BasicAsyncLoggerContextSelector.html"><code>org.apache.logging.log4j.core.async.BasicAsyncLoggerContextSelector</code></a>
to use asynchronous loggers.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In this approach, you must use <a href="manual/lookups.html" class="xref page">lookups</a> to register the application that generated a log event.
The most useful lookups in this case are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Web lookup</dt>
<dd>
<p>It does not require any setup, but it is available only after <code>Log4jServletFilter</code> has been executed.
Some log events pertinent to a web application can be unmarked.
See <a href="manual/lookups.html#WebLookup" class="xref page">web lookup</a> for more information.</p>
</dd>
<dt class="hdlist1">JNDI lookup</dt>
<dd>
<p>It covers a larger part of the handling of a request, but it requires additional setup to export the name of the application via JNDI.
See <a href="manual/lookups.html#JndiLookup" class="xref page">JNDI lookup</a> for more information.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>When using a single logger context, you choose between:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Logging all events to a single appender.
We strongly recommend using a structured layout (e.g., <a href="manual/json-template-layout.html" class="xref page">JSON Template Layout</a>) with an additional field capturing the Servlet context name.
This would allow separation of application logs by filtering on the context name.
The following example demonstrates this scheme using a Socket Appender writing to Elasticsearch:</p>
<div id="_tabs_6" class="openblock tabs is-sync is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_6_xml" class="tab">
<p>XML</p>
</li>
<li id="_tabs_6_json" class="tab">
<p>JSON</p>
</li>
<li id="_tabs_6_yaml" class="tab">
<p>YAML</p>
</li>
<li id="_tabs_6_properties" class="tab">
<p>Properties</p>
</li>
</ul>
</div>
<div id="_tabs_6_xml--panel" class="tabpanel" aria-labelledby="_tabs_6_xml">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;File name="GLOBAL" fileName="logs/global.log"&gt;
  &lt;JsonTemplateLayout&gt;
    &lt;EventTemplateAdditionalField key="contextName"
                                  value="$${web:contextName}"/&gt;
  &lt;/JsonTemplateLayout&gt;
&lt;/File&gt;</code></pre>
</div>
</div>
</div>
<div id="_tabs_6_json--panel" class="tabpanel" aria-labelledby="_tabs_6_json">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"File": {
  "name": "GLOBAL",
  "fileName": "logs/global.log",
  "JsonTemplateLayout": {
    "EventTemplateAdditionalField": {
      "key": "contextName",
      "value": "$${web:contextName}"
    }
  }
},</code></pre>
</div>
</div>
</div>
<div id="_tabs_6_yaml--panel" class="tabpanel" aria-labelledby="_tabs_6_yaml">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">File:
  name: "GLOBAL"
  fileName: "logs/global.log"
  JsonTemplateLayout:
    EventTemplateAdditionalField:
      key: "contextName",
      value: "$${web:contextName"</code></pre>
</div>
</div>
</div>
<div id="_tabs_6_properties--panel" class="tabpanel" aria-labelledby="_tabs_6_properties">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">appender.0.type = File
appender.0.name = GLOBAL
appender.0.fileName = logs/global
appender.0.layout.type = JsonTemplateLayout
appender.0.layout.0.type = EventTemplateAdditionalField
appender.0.layout.0.key = contextName
appender.0.layout.0.value = $${web:contextName}</code></pre>
</div>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Logging events to a separate appender for each application.
In this case, you can use
<a href="manual/appenders/delegating.html#RoutingAppender" class="xref page">routing appender</a>
to separate the events.
This kind of configuration might be used on the development server together with the
<a href="manual/pattern-layout.html" class="xref page">human-friendly Pattern Layout</a>:</p>
<div id="_tabs_7" class="openblock tabs is-sync is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_7_xml" class="tab">
<p>XML</p>
</li>
<li id="_tabs_7_json" class="tab">
<p>JSON</p>
</li>
<li id="_tabs_7_yaml" class="tab">
<p>YAML</p>
</li>
<li id="_tabs_7_properties" class="tab">
<p>Properties</p>
</li>
</ul>
</div>
<div id="_tabs_7_xml--panel" class="tabpanel" aria-labelledby="_tabs_7_xml">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;Routing name="ROUTING"&gt;
  &lt;Routes pattern="$${web:contextName:-common}"&gt;
    &lt;Route&gt;
      &lt;File name="${web:contextName:-common}"
            fileName="logs/${web:contextName:-common}.log"&gt;
        &lt;PatternLayout pattern="%d [%t] %-5p %c - %m%n"/&gt;
      &lt;/File&gt;
    &lt;/Route&gt;
  &lt;/Routes&gt;
&lt;/Routing&gt;</code></pre>
</div>
</div>
</div>
<div id="_tabs_7_json--panel" class="tabpanel" aria-labelledby="_tabs_7_json">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"Routing": {
  "name": "ROUTING",
  "Routes": {
    "pattern": "$${web:contextName:-common}",
    "Route": {
      "File": {
        "name": "${web:contextName:-common}",
        "fileName": "logs/${web:contextName:-common}.log",
        "PatternLayout": {
          "pattern": "d [%t] %-5p %c - %m%n"
        }
      }
    }
  }
}</code></pre>
</div>
</div>
</div>
<div id="_tabs_7_yaml--panel" class="tabpanel" aria-labelledby="_tabs_7_yaml">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">Routing:
  name: "ROUTING"
  Routes:
    pattern: "$${web:contextName:-common}"
    File:
      name: "${web:contextName:-common}"
      fileName: "logs/${web:contextName:-common}.log"
      PatternLayout:
        pattern: "%d [%t] %-5p %c - %m%n"</code></pre>
</div>
</div>
</div>
<div id="_tabs_7_properties--panel" class="tabpanel" aria-labelledby="_tabs_7_properties">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">appender.1.type = Routing
appender.1.name = ROUTING
appender.1.route.type = Routes
appender.1.route.pattern = $${web:contextName:-common}
appender.1.route.0.type = Route
appender.1.route.0.appender.type = File
appender.1.route.0.appender.name = ${web:contextName:-common}
appender.1.route.0.appender.fileName = logs/${web:contextName:-common}.log
appender.1.route.0.appender.layout.type = PatternLayout
appender.1.route.0.appender.layout.pattern = %d [%t] %-5p %c - %m%n</code></pre>
</div>
</div>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="multiple-contexts"><a class="anchor" href="#multiple-contexts"></a>Multiple logger contexts</h4>
<div class="paragraph">
<p>Since Log4j Core uses
<a href="javadoc/log4j-core/org/apache/logging/log4j/core/selector/ClassLoaderContextSelector.html"><code>ClassLoaderContextSelector</code></a>
by default, no configuration is needed to achieve multiple logger contexts in your application server:
the classes of each classloader will use the logger context associated with the classloader.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>To provide a different configuration file for each logger context, you can add files named <code>log4j2&lt;contextName&gt;.xml</code> to the classpath of your application server.</p>
</div>
<div class="paragraph">
<p>See <a href="#log4jContextName"><code>log4jContextName</code></a> and <a href="#log4jConfiguration"><code>log4jConfiguration</code></a> for more details.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Associating logger contexts to classloaders has, however, some limitations: <strong>shared</strong> libraries will not be able to use the per-application logger contexts.
To overcome this limitation, Log4j Core provides an alternative algorithm to determine the right logger context to choose: JNDI lookups.</p>
</div>
</div>
<div class="sect3">
<h4 id="jndi-configuration"><a class="anchor" href="#jndi-configuration"></a>JNDI context selector</h4>
<div class="paragraph">
<p>Application servers set up the correct JNDI context as soon as they determine which application will handle a request.
Log4j Core allows the usage of JNDI to coordinate the usage of logger contexts in a Jakarta EE application server.
To use this feature, you need to:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Set the
<a href="manual/systemproperties.html#log4j2.contextSelector" class="xref page"><code>log4j2.contextSelector</code></a>
Log4j configuration property to <code>org.apache.logging.log4j.core.selector.JndiContextSelector</code>,</p>
</li>
<li>
<p>For security reasons you need to enable the selector, by setting the
<a href="manual/systemproperties.html#log4j2.enableJndiContextSelector" class="xref page"><code>log4j2.enableJndiContextSelector</code></a>
Log4j configuration property to <code>true</code>,</p>
</li>
<li>
<p>Each web application needs to configure the servlet context parameter <code>isLog4jContextSelectorNamed</code> to <code>true</code> and provide a value for the <code>log4jContextName</code> servlet context parameter and <code>java:comp/env/log4j/context-name</code> JNDI environment entry:</p>
<div class="listingblock">
<div class="title">Snippet from an example <a href="https://github.com/apache/logging-log4j2/tree/rel/2.25.0/src/site/antora/modules/ROOT/examples/manual/webapp/jndi.xml"><code>web.xml</code></a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;context-param&gt;
  &lt;param-name&gt;isLog4jContextSelectorNamed&lt;/param-name&gt;
  &lt;param-value&gt;true&lt;/param-value&gt;
&lt;/context-param&gt;
&lt;context-param&gt;
  &lt;param-name&gt;log4jContextName&lt;/param-name&gt;
  &lt;param-value&gt;your_application_name&lt;/param-value&gt;
&lt;/context-param&gt;
&lt;env-entry&gt;
  &lt;env-entry-name&gt;log4j/context-name&lt;/env-entry-name&gt;
  &lt;env-entry-value&gt;your_application_name&lt;/env-entry-value&gt;
  &lt;env-entry-type&gt;java.lang.String&lt;/env-entry-type&gt;
&lt;/env-entry&gt;</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="replace"><a class="anchor" href="#replace"></a>Replacing the application server logging subsystem</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Some application servers allow administrators to replace the default logging subsystem of the application server with Log4j Core.
Known instructions are listed in the section.
If your application server is not listed here, check the documentation of the application server.</p>
</div>
<div class="sect2">
<h3 id="replace-tomcat"><a class="anchor" href="#replace-tomcat"></a>Tomcat</h3>
<div class="paragraph">
<p>Tomcat uses a modified version of Apache Commons Logging called
<a href="https://tomcat.apache.org/tomcat-11.0-doc/logging.html">Tomcat JULI</a>
as the internal logging system.
Tomcat JULI uses <code>java.util.logging</code> as default logging implementation,
but since Tomcat 8.5 you can replace it with a different backend.</p>
</div>
<div class="paragraph">
<p>To use Log4j Core as logging backend, you need to modify the
<a href="https://tomcat.apache.org/tomcat-11.0-doc/class-loader-howto.html#Class_Loader_Definitions">system classloader</a>
of the server.
Assuming <code>$CATALINA_BASE</code> is the main directory of your Tomcat instance you need to:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a <code>$CATALINA_BASE/log4j</code> folder to contain Log4j dependencies,</p>
</li>
<li>
<p>Download the following JAR files into <code>$CATALINA_BASE/log4j</code>:</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://central.sonatype.com/artifact/org.apache.logging.log4j/log4j-appserver/${log4j-api.version}"><code>log4j-appserver</code></a>: the bridge between Tomcat JULI and Log4j API,</p>
</li>
<li>
<p><a href="https://central.sonatype.com/artifact/org.apache.logging.log4j/log4j-api/${log4j-api.version}"><code>log4j-api</code></a>,</p>
</li>
<li>
<p><a href="https://central.sonatype.com/artifact/org.apache.logging.log4j/log4j-core/2.25.0"><code>log4j-core</code></a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Add a Log4j Core <a href="manual/configuration.html" class="xref page">configuration file</a> called either <code>log4j2.xml</code> or <code>log4j2-tomcat.xml</code> to the <code>$CATALINA_BASE/log4j</code> folder.</p>
</li>
<li>
<p>Modify the system classloader classpath to include all the JAR files and the <code>$CATALINA_BASE/log4j</code> folder itself.
If you are starting Tomcat using the scripts in <code>$CATALINA_HOME/bin</code>, you can do it by creating a <code>$CATALINA_BASE/bin/setenv.sh</code> file with content:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">CLASSPATH="$CATALINA_HOME/log4j/*:$CATALINA_HOME/log4j/"</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Windows users can modify the classpath using the
<a href="https://commons.apache.org/proper/commons-daemon/procrun.html">Procrun monitor application</a>
GUI application.
The application is traditionally located in <code>$CATALINA_HOME/bin/tomcat&lt;n&gt;w.exe</code>, where <code>&lt;n&gt;</code> is the major version number of Tomcat.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="replace-jetty"><a class="anchor" href="#replace-jetty"></a>Jetty</h3>
<div class="paragraph">
<p>In recent Jetty versions you just need to enable the <code>logging-log4j2</code> module.
See <a href="https://jetty.org/docs/jetty/12/operations-guide/modules/index.html">Jetty Modules documentation</a> for more details.</p>
</div>
<div class="paragraph">
<p>On Jetty 9.x or earlier you need to:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add the following JAR files to Jetty&#8217;s classpath:</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://central.sonatype.com/artifact/org.apache.logging.log4j/log4j-appserver/${log4j-api.version}"><code>log4j-appserver</code></a>,</p>
</li>
<li>
<p><a href="https://central.sonatype.com/artifact/org.apache.logging.log4j/log4j-api/${log4j-api.version}"><code>log4j-api</code></a>,</p>
</li>
<li>
<p><a href="https://central.sonatype.com/artifact/org.apache.logging.log4j/log4j-core/2.25.0"><code>log4j-core</code></a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Set the system property <code>org.eclipse.jetty.util.log.class</code> to <code>org.apache.logging.log4j.appserver.jetty.Log4j2Logger</code></p>
</li>
</ol>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>
    Copyright © 1999-2025 <a href="https://www.apache.org/">The Apache Software Foundation</a>.
    Licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache Software License, Version 2.0</a>.
    Please read our <a href="https://privacy.apache.org/policies/privacy-policy-public.html">privacy policy</a>.
  </p>
  <p>
    Apache, Log4j, and the Apache feather logo are trademarks or registered trademarks of The Apache Software Foundation.
    Oracle and Java are registered trademarks of Oracle and/or its affiliates.
    Other names may be trademarks of their respective owners.
  </p>
</footer>
<!-- Matomo -->
<script>
  var _paq = window._paq = window._paq || [];
  _paq.push(["disableCookies"]);
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://analytics.apache.org/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '42']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="https://analytics.apache.org/matomo.php?idsite=42&amp;rec=1" style="border:0;" alt="" /></p></noscript>
<!-- End Matomo Code -->
<script id="site-script" src="./_/js/site.js" data-ui-root-path="./_"></script>
<script async src="./_/js/vendor/highlight.js"></script>
<!-- `@asciidoctor/tabs` extension scripts -->
<script async src="./_/js/vendor/tabs.js"></script>
  </body>
</html>
